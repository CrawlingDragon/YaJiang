var H=Object.defineProperty;var I=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var D=(t,e,n)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||(e={}))w.call(e,n)&&D(t,n,e[n]);if(I)for(var n of I(e))M.call(e,n)&&D(t,n,e[n]);return t};import{H as T}from"./header.d5316539.js";import{O as A}from"./online_item.56032ee1.js";import{R as B}from"./recommend_hospital.27e1d6f2.js";import{I as v,m as V,c as u,e as i,h as l,j as d,k as o,z as _,t as r,f as O,v as h,g as p,F as g,i as f,x as S,y as E}from"./index.3518e5b0.js";import{u as N}from"./useTitles.54f46820.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.40db65c6.js";const z={setup(){N("\u4E2A\u4EBA\u4E3B\u9875")},name:"meHomePage",components:{Header:T,OnlineItem:A,RecommendHospital:B,[v.Component.name]:v.Component},props:{},data(){return{active:0,id:this.$route.query.id,expertData:"",askedList:[],askMeList:[],hospitalList:[],status:""}},computed:y({},V(["uId"])),watch:{id(t){this.getExpertData(t)}},mounted(){this.getExpertData()},methods:{getExpertData(){this.$axios.fetchPost("Mobile/user/homepage",{id:this.uId,uId:this.uId}).then(t=>{t.data.code==0&&(this.expertData=t.data.data,this.status=t.data.data.status,setTimeout(()=>{this.getIAsked(),this.getAskMe()},100))})},getIAsked(){this.$axios.fetchPost("/Mobile/user/getWenList",{uId:this.uId,page:1,pagesize:12,action:"answer"}).then(t=>{t.data.code==0&&(this.askedList=t.data.data)})},getAskMe(){this.$axios.fetchPost("/Mobile/user/getWenList",{uId:this.uId,page:1,pagesize:12,action:"tome"}).then(t=>{t.data.code==0&&(this.askMeList=t.data.data)})},getHospitalList(){this.$axios.fetchPost("/Mobile/user/myJoinHospital",{uId:this.uId}).then(t=>{t.data.code==0&&(this.hospitalList=t.data.data.list)})},preverImg(t){v({images:t.arr,startPosition:t.index,closeable:!0})},onClickTab(t){t==2&&this.getHospitalList()},goToAsk(){this.$router.push({path:"/ask"})},goToPersondetail(){this.$router.push({path:"expert_detail",query:{id:this.expertData.id,uId:this.uId}})},attention(){this.status==1?this.$axios.fetchPost("/Mobile/User/addOrCancelAttention",{uId:this.uId,followId:this.expertData.id,action:"cancel"}).then(e=>{e.data.code==0&&(this.status=0)}):this.$axios.fetchPost("/Mobile/User/addOrCancelAttention",{uId:this.uId,followId:this.expertData.id,action:"add"}).then(e=>{e.data.code==0&&(this.status=1)})}}},U=t=>(S("data-v-7090501e"),t=t(),E(),t),j={class:"expert-container"},q={class:"person-box"},F={class:"name-bar"},W={class:"name"},J={class:"p1"},G={class:"btns"},K=_("\u63D0\u95EE "),Q={key:2,class:"edit"},X={class:"fans"},Y={class:"item"},Z={class:"item"},$={key:0,class:"person-info"},tt=_(" \u4E2A\u4EBA\u7B80\u4ECB "),et=U(()=>o("div",{class:"look-more"},"\u8BE6\u7EC6\u8D44\u6599 >",-1)),st=[tt,et],at={class:"goodat"},ot={class:"explan"},it={class:"answer-ul"},nt={class:"answer-ul"},lt={class:"hospital-ul"};function rt(t,e,n,dt,s,c){const b=u("Header"),P=u("van-image"),x=u("van-icon"),k=u("OnlineItem"),m=u("van-tab"),C=u("RecommendHospital"),L=u("van-tabs");return i(),l("div",j,[d(b,{indexHeader:!1}),o("div",q,[o("div",F,[d(P,{class:"avator",src:s.expertData.avatar},null,8,["src"]),o("div",W,[_(r(s.expertData.name),1),o("span",null,r(s.expertData.groupname),1)]),o("div",J,r(s.expertData.company),1)]),o("div",G,[s.expertData.id!=t.uId?(i(),l("div",{key:0,class:"btn-look",onClick:e[0]||(e[0]=(...a)=>c.attention&&c.attention(...a))},[s.status==0?(i(),O(x,{key:0,name:"plus",class:"plus"})):h("v-if",!0),_(r(s.status==1?"\u5DF2\u5173\u6CE8":"\u5173\u6CE8"),1)])):h("v-if",!0),s.expertData.identity==1&&s.expertData.id!=t.uId?(i(),l("div",{key:1,class:"btn-ask",onClick:e[1]||(e[1]=(...a)=>c.goToAsk&&c.goToAsk(...a))},[d(x,{name:"records",class:"records"}),K])):h("v-if",!0),s.expertData.id==t.uId?(i(),l("div",Q,"\u7F16\u8F91\u8D44\u6599")):h("v-if",!0)]),o("div",X,[o("div",Y,"\u5173\u6CE8 "+r(s.expertData.tofollower),1),o("div",Z,"\u7C89\u4E1D "+r(s.expertData.follower),1)])]),s.expertData.identity==1?(i(),l("div",$,[o("div",{class:"title-bar",onClick:e[2]||(e[2]=(...a)=>c.goToPersondetail&&c.goToPersondetail(...a))},st),o("p",at,"\u64C5\u957F\uFF1A"+r(s.expertData.skill),1),o("p",ot,r(s.expertData.introduce),1)])):h("v-if",!0),d(L,{modelValue:s.active,"onUpdate:modelValue":e[3]||(e[3]=a=>s.active=a),sticky:"",class:"tabs",color:"#155BBB",onClick:c.onClickTab},{default:p(()=>[d(m,null,{title:p(()=>[_(" \u89E3\u7B54 "+r(s.expertData.posts),1)]),default:p(()=>[o("ul",it,[(i(!0),l(g,null,f(s.askedList,a=>(i(),l("li",{key:a.id},[d(k,{list:a,onPreImage:c.preverImg},null,8,["list","onPreImage"])]))),128))])]),_:1}),d(m,{sticky:""},{title:p(()=>[_(" \u63D0\u95EE "+r(s.expertData.threads),1)]),default:p(()=>[o("ul",nt,[(i(!0),l(g,null,f(s.askMeList,a=>(i(),l("li",{key:a.id},[d(k,{list:a,onPreImage:c.preverImg},null,8,["list","onPreImage"])]))),128))])]),_:1}),d(m,{sticky:""},{title:p(()=>[_(" \u52A0\u5165\u7684\u533B\u9662 "+r(s.expertData.join),1)]),default:p(()=>[o("ul",lt,[(i(!0),l(g,null,f(s.hospitalList,a=>(i(),l("li",{key:a.id},[d(C,{list:a},null,8,["list"])]))),128))])]),_:1})]),_:1},8,["modelValue","onClick"])])}var ft=R(z,[["render",rt],["__scopeId","data-v-7090501e"]]);export{ft as default};
