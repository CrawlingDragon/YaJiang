var D=Object.defineProperty,U=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var y=(o,e,l)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,_=(o,e)=>{for(var l in e||(e={}))T.call(e,l)&&y(o,l,e[l]);if(C)for(var l of C(e))G.call(e,l)&&y(o,l,e[l]);return o},g=(o,e)=>U(o,A(e));import{c as m,e as f,h as b,j as n,g as s,k as c,F as v,i as E,l as B,t as x,m as F,a3 as M,v as Z,z as j,f as V,Z as N,_ as R,x as q,y as L}from"./index.3518e5b0.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import{C as O}from"./compressor.esm.c4e5fc50.js";const K={name:"",components:{},props:{chooseData:{type:Array,default:function(){return[]}}},data(){return{zuowuShow:!1,result:[]}},computed:{},watch:{},mounted(){},unmounted(){},methods:{onZuowuCancel(){this.$emit("emitArray",this.result),this.zuowuShow=!1}}},W={class:"zuowuContent"},H={class:"item-wrap"};function J(o,e,l,p,t,r){const k=m("van-checkbox"),i=m("van-checkbox-group"),u=m("van-action-sheet");return f(),b("div",null,[n(u,{show:t.zuowuShow,"onUpdate:show":e[1]||(e[1]=d=>t.zuowuShow=d),"cancel-text":"\u786E\u5B9A",onCancel:r.onZuowuCancel},{default:s(()=>[c("div",W,[n(i,{modelValue:t.result,"onUpdate:modelValue":e[0]||(e[0]=d=>t.result=d)},{default:s(()=>[(f(!0),b(v,null,E(l.chooseData,d=>(f(),b("div",{class:"item",key:d},[c("div",H,[n(k,{name:d},{icon:s(h=>[c("div",{class:B([h.checked?"activeIcon":"inactiveIcon","props"])},x(d),3)]),_:2},1032,["name"])])]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["show","onCancel"])])}var Q=I(K,[["render",J],["__scopeId","data-v-49ab7f22"]]);const X={metaInfo:{title:1},name:"base_edit",components:{Checkbox:Q},props:{},data(){return{uploader:[{url:""}],name:"",zuowu:"",time:"",scale:"",scaleId:"",module:"",address:"",sell:"",sellShow:!1,linkman:"",phone:"",areaname:"",areanameId:"",genre:"",popupShow:!1,ChooseData:"",zuowuShow:!0,checked:!1,typesname:"",typesnameId:"",guimoPicker:!1,result:[],addressPicker:!1,ThreeTreeAddressColumns:[],typesnamePicker:!1,genrePicker:!1}},computed:g(_({},F(["uId"])),{routeFrom(){return this.$route.query.from}}),watch:{},mounted(){this.routeFrom==="edit"&&this.getBaseInfo(),this.getChooseData(),this.getThreeTreeAddress()},unmounted(){},methods:{beforeRead(o){return new Promise(e=>{new O(o,{quality:.6,success(l){e(l)},error(l){this.$toast(l.message)}})})},afterRead(o,e){let l=new FormData;l.append("urls[]",o.file,o.file.name),l.append("uId",this.uId),l.append("type","company"),this.$axios.fetchPost("/Mobile/Wen/OssUploadFile",l).then(p=>{p.data.code==0?(this.uploader=[{url:p.data.data_tiny}],console.log("res.data :>> ",p.data)):(this.$toast(p.data.message),console.log("detail :>> ",e))})},onSubmit(o){console.log("values :>> ",o),this.updataBaseInfo()},clickZuowu(){this.$refs.zuowu.zuowuShow=!0},clickTime(){this.$refs.time.zuowuShow=!0},onZuowuCancel(o){o.length!==0&&(this.zuowu=o.join(","))},cancelTime(o){o.length!==0&&(this.time=o.join(","))},guimoConfirm(o){this.guimoPicker=!1,this.scale=o.text,this.scaleId=o.id},clickModule(){console.log(this.$refs.pattern.zuowuShow),this.$refs.pattern.zuowuShow=!0},onAddressConfirm(o){let e="";o.forEach(p=>{p.text!=""&&(e+=p.text+",")}),this.areaname=e.substring(0,e.length-1);let l=o[o.length-1].id;this.areanameId=l?o[o.length-1].id:o[o.length-2].id,this.addressPicker=!1},cancelPattern(o){o.length!==0&&(this.module=o.join(","))},clickCompanyTypes(){this.typesnamePicker=!0},typesConfirm(o){this.typesname=o.text,this.typesnameId=o.id,this.typesnamePicker=!1},clickGenre(){this.genrePicker=!0},genreConfirm(o){this.genre=o,this.genrePicker=!1},chooseSell(o){this.sell=o.name},getBaseInfo(){M.fetchGet("/Mobile/Gbase/getCompanyinfo",{uId:this.uId}).then(o=>{let e=o.data;e.code===0&&(this.name=e.data.title,this.zuowu=e.data.zwtype,this.time=e.data.supplytime,this.scale=e.data.guimo.text,this.scaleId=e.data.guimo.id,this.module=e.data.pattern,this.address=e.data.address,this.sell=e.data.products,this.linkman=e.data.linkman,this.phone=e.data.bile,this.areaname=e.data.areaname.text,this.areanameId=e.data.areaname.id,this.genre=e.data.genre,this.typesname=e.data.typesname.text,this.typesnameId=e.data.typesname.id,this.uploader=[{url:e.data.logo}])})},getChooseData(){this.$axios.fetchGet("/Mobile/Gbase/getBaseOptions").then(o=>{let e=o.data;e.code==0&&(this.ChooseData=e.data)})},getThreeTreeAddress(){this.$axios.fetchGet("/Mobile/Gbase/getLinkagelist").then(o=>{let e=o.data;e.code===0&&(this.ThreeTreeAddressColumns=e.data)})},updataBaseInfo(){this.$axios.fetchPost("/Mobile/Gbase/subCompanyAttention",{uId:this.uId,title:this.name,zwtype:this.zuowu,guimo:this.scaleId,pattern:this.module,supplytime:this.time,areaid:this.areaname,linkman:this.linkman,bile:this.phone,address:this.address,types:this.typesnameId,genre:this.genre,products:this.sell,logo:this.uploader[0].url}).then(o=>{let e=o.data;e.code===0&&(this.$toast(e.message),this.routeFrom==="add"&&this.$router.replace({path:"/base_center"}))})},openSeller(){this.$router.push({path:"/baseInfoEdit/ask_choose_crop",query:{crop:this.sell}})}}},Y=o=>(q("data-v-b6d466ce"),o=o(),L(),o),$={class:"edit-container"},ee=Y(()=>c("div",{class:"icon"},null,-1)),oe={class:"company-box",style:{"margin-top":"10px"}},te={style:{margin:"16px"}};function ne(o,e,l,p,t,r){const k=m("van-uploader"),i=m("van-field"),u=m("van-icon"),d=m("Checkbox"),h=m("van-picker"),w=m("van-popup"),P=m("van-button"),S=m("van-form"),z=m("router-view");return f(),b(v,null,[c("div",$,[n(S,{onSubmit:r.onSubmit},{default:s(()=>[n(i,{name:"uploader",class:"upload-box"},{input:s(()=>[n(k,{modelValue:t.uploader,"onUpdate:modelValue":e[0]||(e[0]=a=>t.uploader=a),class:"upload",deletable:!1,"after-read":r.afterRead,accept:"image/*","before-read":r.beforeRead},{default:s(()=>[ee]),_:1},8,["modelValue","after-read","before-read"])]),_:1}),n(i,{modelValue:t.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.name=a),name:"\u540D\u79F0",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),n(i,{modelValue:t.zuowu,"onUpdate:modelValue":e[2]||(e[2]=a=>t.zuowu=a),name:"\u4F5C\u7269\u79CD\u7C7B",label:"\u4F5C\u7269\u79CD\u7C7B",placeholder:"\u8BF7\u9009\u62E9\u4F5C\u7269\u79CD\u7C7B",readonly:"",onClick:r.clickZuowu},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),n(d,{chooseData:t.ChooseData.zwtype,onEmitArray:r.onZuowuCancel,ref:"zuowu"},null,8,["chooseData","onEmitArray"]),n(i,{modelValue:t.time,"onUpdate:modelValue":e[3]||(e[3]=a=>t.time=a),name:"\u4F9B\u5E94\u65F6\u95F4",label:"\u4F9B\u5E94\u65F6\u95F4",placeholder:"\u8BF7\u9009\u62E9\u4F9B\u5E94\u65F6\u95F4",readonly:"",onClick:r.clickTime},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),n(d,{chooseData:t.ChooseData.supplytime,onEmitArray:r.cancelTime,ref:"time"},null,8,["chooseData","onEmitArray"]),n(i,{modelValue:t.scale,"onUpdate:modelValue":e[4]||(e[4]=a=>t.scale=a),name:"\u89C4\u6A21",label:"\u89C4\u6A21",readonly:"",placeholder:"\u8BF7\u8F93\u5165\u89C4\u6A21",onClick:e[5]||(e[5]=a=>t.guimoPicker=!0)},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),n(w,{show:t.guimoPicker,"onUpdate:show":e[7]||(e[7]=a=>t.guimoPicker=a),position:"bottom"},{default:s(()=>[n(h,{"show-toolbar":"",columns:t.ChooseData.guimo,onConfirm:r.guimoConfirm,onCancel:e[6]||(e[6]=a=>t.guimoPicker=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),n(i,{modelValue:t.module,"onUpdate:modelValue":e[8]||(e[8]=a=>t.module=a),name:"\u7ECF\u8425\u6A21\u5F0F",label:"\u7ECF\u8425\u6A21\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u7ECF\u8425\u6A21\u5F0F",readonly:"",onClick:r.clickModule},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),n(d,{chooseData:t.ChooseData.pattern,onEmitArray:r.cancelPattern,ref:"pattern"},null,8,["chooseData","onEmitArray"]),n(i,{modelValue:t.areaname,"onUpdate:modelValue":e[9]||(e[9]=a=>t.areaname=a),name:"\u6240\u5728\u5730",label:"\u6240\u5728\u5730",placeholder:"\u8BF7\u9009\u62E9\u6240\u5728\u5730",readonly:"",onClick:e[10]||(e[10]=a=>t.addressPicker=!0)},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),n(w,{show:t.addressPicker,"onUpdate:show":e[12]||(e[12]=a=>t.addressPicker=a),position:"bottom"},{default:s(()=>[n(h,{"show-toolbar":"",columns:t.ThreeTreeAddressColumns,onConfirm:r.onAddressConfirm,onCancel:e[11]||(e[11]=a=>t.addressPicker=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),n(i,{modelValue:t.sell,"onUpdate:modelValue":e[13]||(e[13]=a=>t.sell=a),name:"\u4E3B\u8425",label:"\u4E3B\u8425",placeholder:"\u8BF7\u9009\u62E9\u4E3B\u8425\u5546\u54C1",readonly:"",onClick:r.openSeller},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),Z(` <AskChooseCrop
        v-show="sellShow"
        :baseEdit="true"
        @getCrop="chooseSell"
      ></AskChooseCrop> `),n(i,{modelValue:t.linkman,"onUpdate:modelValue":e[14]||(e[14]=a=>t.linkman=a),name:"\u8054\u7CFB\u4EBA",label:"\u8054\u7CFB\u4EBA",placeholder:"\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA"},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),n(i,{modelValue:t.phone,"onUpdate:modelValue":e[15]||(e[15]=a=>t.phone=a),name:"\u53F7\u7801",label:"\u53F7\u7801",placeholder:"\u8BF7\u8F93\u5165\u53F7\u7801"},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),n(i,{modelValue:t.address,"onUpdate:modelValue":e[16]||(e[16]=a=>t.address=a),name:"\u7ECF\u8425\u5730\u5740",label:"\u7ECF\u8425\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u7ECF\u8425\u5730\u5740"},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue"]),c("div",oe,[n(i,{modelValue:t.typesname,"onUpdate:modelValue":e[17]||(e[17]=a=>t.typesname=a),name:"\u4F01\u4E1A\u7C7B\u578B",label:"\u4F01\u4E1A\u7C7B\u578B",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u7C7B\u578B",readonly:"",onClick:r.clickCompanyTypes},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),n(w,{show:t.typesnamePicker,"onUpdate:show":e[19]||(e[19]=a=>t.typesnamePicker=a),position:"bottom"},{default:s(()=>[n(h,{"show-toolbar":"",columns:t.ChooseData.types,onConfirm:r.typesConfirm,onCancel:e[18]||(e[18]=a=>t.typesnamePicker=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"]),n(i,{modelValue:t.genre,"onUpdate:modelValue":e[20]||(e[20]=a=>t.genre=a),name:"\u4F01\u4E1A\u6027\u8D28",label:"\u4F01\u4E1A\u6027\u8D28",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u6027\u8D28",onClick:r.clickGenre,readonly:""},{button:s(()=>[n(u,{name:"arrow",class:"arrow"})]),_:1},8,["modelValue","onClick"]),n(w,{show:t.genrePicker,"onUpdate:show":e[22]||(e[22]=a=>t.genrePicker=a),position:"bottom"},{default:s(()=>[n(h,{"show-toolbar":"",columns:t.ChooseData.genre,onConfirm:r.genreConfirm,onCancel:e[21]||(e[21]=a=>t.genrePicker=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"])]),c("div",te,[n(P,{round:"",block:"",type:"info","native-type":"submit",class:"submit"},{default:s(()=>[j(x(r.routeFrom=="edit"?"\u4FEE\u6539":"\u521B\u5EFA"),1)]),_:1})])]),_:1},8,["onSubmit"]),n(w,{modelValue:t.popupShow,"onUpdate:modelValue":e[23]||(e[23]=a=>t.popupShow=a),position:"bottom",style:{height:"30%"}},null,8,["modelValue"])]),n(z,null,{default:s(({Component:a})=>[(f(),V(R,null,[(f(),V(N(a),{onGetCrop:r.chooseSell},null,8,["onGetCrop"]))],1024))]),_:1})],64)}var ie=I(X,[["render",ne],["__scopeId","data-v-b6d466ce"]]);export{ie as default};
