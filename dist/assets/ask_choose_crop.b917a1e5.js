var L=Object.defineProperty,I=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var m=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&m(e,o,t[o]);if(v)for(var o of v(t))B.call(t,o)&&m(e,o,t[o]);return e},y=(e,t)=>I(e,T(t));import{m as N,c as h,e as r,h as i,k as n,j as C,C as u,t as f,F as d,i as _,D as p,v as k,f as R,g as D,n as E,x as z,y as F,z as M}from"./index.a3582b47.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";const j={name:"askChooseCrop",data(){return{value:"",list:[],hispitalList:[],searchResult:[],searchResultShow:!1,noResult:!1,barTop:68}},computed:y(x({cropName(){return this.$route.query.crop}},N(["uId"])),{letterList(){let e=[];return this.list.forEach(t=>{e.push(t.letter)}),e},crops(){let e=[];return this.list.forEach(t=>{e=e.concat(t.index)}),e}}),watch:{searchResult(e){e.length==0?this.noResult=!0:this.noResult=!1},cropName(e){e!=null&&this.getCropList()}},mounted(){this.getCropList()},methods:{onSearch(e){this.searchResult=[],this.crops.forEach(t=>{t.name.indexOf(e)>=0&&this.searchResult.push(t)}),this.searchResultShow=!0,e==""&&(this.searchResultShow=!1)},choose(e){this.$router.go(-1),this.$emit("getCrop",e),this.searchResultShow=!1},onCancel(){this.$router.go(-1),this.searchResultShow=!1},getCropList(){this.$axios.fetchPost("Mobile/Mpublic/getCropIndexQuery",{uId:this.uId}).then(e=>{e.data.code==0&&(e.data.historydata&&(this.hispitalList=e.data.historydata),this.$nextTick(()=>{this.computedBarTop(),this.list=e.data.data}))})},computedBarTop(){let e=this.$refs.historyRef.getBoundingClientRect().height;e>0?this.barTop=e+68:this.barTop=68}}},q=e=>(z("data-v-02518faa"),e=e(),F(),e),O={class:"choose_crop-container",id:"wrap"},P={action:"/",class:"from"},Q={key:0,class:"history-box",ref:"historyRef"},A={class:"title"},G={class:"history-ul"},H=q(()=>n("div",{class:"small-title"},"\u6700\u8FD1\u9009\u62E9/\u5168\u90E8\u4F5C\u7269",-1)),J=["onClick"],K={class:"search_result-ul"},W={class:"noData"},X=M(" \u62B1\u6B49\u6CA1\u6709\u8BE5\u4F5C\u7269,\u53EF\u9009\u62E9"),Y=["onClick"];function Z(e,t,o,$,a,l){const S=h("van-search"),g=h("van-index-anchor"),w=h("van-cell"),b=h("van-index-bar");return r(),i("div",O,[n("form",P,[C(S,{modelValue:a.value,"onUpdate:modelValue":[t[0]||(t[0]=s=>a.value=s),l.onSearch],"show-action":"",placeholder:"\u8BF7\u8F93\u5165\u4F5C\u7269\u540D",onSearch:l.onSearch,onCancel:l.onCancel,clearable:""},null,8,["modelValue","onSearch","onCancel","onUpdate:modelValue"])]),a.hispitalList?u((r(),i("div",Q,[n("div",A,"\u5F53\u524D\u9009\u62E9\uFF1A"+f(l.cropName),1),u(n("div",G,[H,(r(!0),i(d,null,_(a.hispitalList,s=>(r(),i("li",{key:s.fid,onClick:c=>l.choose(s)},f(s.name),9,J))),128))],512),[[p,a.hispitalList.length!=0]])],512)),[[p,!1]]):k("v-if",!0),a.searchResultShow?k("v-if",!0):(r(),R(b,{key:1,class:"bar","index-list":l.letterList,style:E({top:a.barTop+"px"})},{default:D(()=>[(r(!0),i(d,null,_(a.list,s=>(r(),i("div",{key:s.id},[C(g,{index:s.letter},null,8,["index"]),(r(!0),i(d,null,_(s.index,c=>(r(),R(w,{title:c.name,key:c.fid,onClick:ee=>l.choose(c)},null,8,["title","onClick"]))),128))]))),128))]),_:1},8,["index-list","style"])),u(n("ul",K,[u(n("div",W,[X,n("span",{class:"other",onClick:t[1]||(t[1]=s=>l.choose({name:"\u5176\u4ED6",fid:195}))},"\u5176\u4ED6")],512),[[p,a.noResult]]),(r(!0),i(d,null,_(a.searchResult,s=>(r(),i("li",{key:s.fid,onClick:c=>l.choose(s)},f(s.name),9,Y))),128))],512),[[p,a.searchResultShow]])])}var ae=U(j,[["render",Z],["__scopeId","data-v-02518faa"]]);export{ae as default};
