var z=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var C=(e,s,t)=>s in e?z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,k=(e,s)=>{for(var t in s||(s={}))R.call(s,t)&&C(e,t,s[t]);if(y)for(var t of y(s))q.call(s,t)&&C(e,t,s[t]);return e},w=(e,s)=>N(e,O(s));import{H as F}from"./header.1705d6a2.js";import{g as M}from"./baidu_locationAddress.f951769d.js";import{u as P,a as j,G as B,S as J,T as v,m as K,c,e as l,h as d,j as u,g as b,k as n,l as g,t as p,v as S,F as _,i as m,n as Q,C as V,D as L,U as W,x as X,y as Y,B as Z,f as $}from"./index.a3582b47.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.a53c4cb6.js";const se={name:"index_online_address",metaInfo(){return{title:"\u5207\u6362\u5730\u533A"}},components:{Headers:F},setup(e,{emit:s}){const t=P(),i=j(),r=B(()=>i.getters.geoViewAddress),a=B(()=>i.state.geoAddress),{geolocationAgain:f}=M();J(()=>{if(console.log("geoAddress",a),r.value=="\u5B9A\u4F4D\u4E2D..."){i.commit("setGeoAddress","\u5B9A\u4F4D\u5931\u8D25");return}});async function A(){if(r.value=="\u5B9A\u4F4D\u4E2D..."){W("\u5B9A\u4F4D\u4E2D");return}if(r.value==="\u5B9A\u4F4D\u5931\u8D25"){i.commit("setGeoAddress","\u5B9A\u4F4D\u4E2D..."),await f();return}setTimeout(()=>{s("update:fetchAddress",a.value),t.push({path:"/index_online"})},300)}return{clickGeoAddress:A,geoViewAddress:r}},emits:["update:fetchAddress"],data(){return{value:"",hotCity:[],list:[],searchAddress:[],searchBox:!1,noData:!1,show:!0,barTop:64,storageArr:v.get("onlineLatelyAddressArray",[])}},activated(){this.value="",this.searchBox=!1,this.storageArr=v.get("onlineLatelyAddressArray",[]),console.log(" this.storageArr",this.storageArr)},computed:w(k({},K(["geoAddress","latelyAddressArray"])),{initSearchListAll(){let e=[];return this.list.forEach(s=>{e=e.concat(s.items)}),e},computedList(){let e=[];return e=this.list.filter(s=>s.items.length!=0),e},indexList(){let e=[];return this.list.forEach(s=>{s.items.length!=0&&e.push(s.index)}),e},latelyAddressArrayComputed(){let e=[];return this.storageArr.forEach(s=>{let t=s.split(","),i=t[t.length-1];e.push(i)}),e},currentSelectAddress(){return this.$route.query.address},currentAxiosAddress(){return this.$route.query.axiosAddress}}),mounted(){this.getAreaList()},methods:{onSearch(e){e!=""&&(this.page=0,this.searchAddress=[],this.searchBox=!0,this.filtrate(e),this.searchAddress.length==0?this.noData=!0:this.noData=!1),e==""&&(this.searchAddress=[],this.searchBox=!1)},filtrate(e){this.initSearchListAll.forEach(s=>{s.name.includes(e)&&this.searchAddress.push(s)})},onCancel(){this.searchBox=!1,this.$router.go(-1)},choose(e){setTimeout(()=>{this.$router.push({path:"/index_online"}),this.$emit("update:fetchAddress",e.data),this.searchBox=!1},100)},goToIndexOnline(e){if(e==="\u5168\u90E8\u5730\u533A")this.$router.push({path:"/index_online"}),this.$emit("update:fetchAddress","\u5168\u90E8\u5730\u533A");else{let t=v.get("onlineLatelyAddressArray",[])[e];this.$router.push({path:"/index_online"}),this.$emit("update:fetchAddress",t)}this.searchBox=!1},getAreaList(){this.$axios.fetchGet("Mobile/Position/getAreaPostion").then(e=>{e.data.code==0&&(this.hotCity=e.data.data.hotcity.letterlist,this.list=e.data.data.lists,this.show=!1)})},computedBarTop(){let e=this.$refs.historyRef.getBoundingClientRect().height;console.log("h",e),e>0?this.barTop=e+64:this.barTop=64}}},x=e=>(X("data-v-ac81bcb6"),e=e(),Y(),e),te={class:"area-container",teleport:"body"},oe={action:"/",class:"from"},re={style:{background:"#ebebeb"}},ae={class:"now-choose-title"},ne=x(()=>n("div",{class:"tip-title"},"\u5B9A\u4F4D/\u6700\u8FD1\u8BBF\u95EE",-1)),ie={class:"choose-wrap"},le=x(()=>n("div",{class:"icon"},null,-1)),de=["onClick"],ce=x(()=>n("div",{class:"tip-title"},"\u70ED\u95E8\u57CE\u5E02",-1)),he={class:"hot-city-ul"},ue=["onClick"],_e={class:"search-content"},pe=["onClick"];function me(e,s,t,i,r,a){const f=c("Headers"),A=c("van-loading"),T=c("van-overlay"),I=c("van-search"),D=c("van-index-anchor"),G=c("van-cell"),E=c("van-index-bar"),H=c("van-empty");return l(),d("div",te,[u(f,{ref:"header","index-header":!1},null,512),u(T,{show:r.show,class:"loading","z-index":"99999999999999"},{default:b(()=>[n("div",{class:"wrapper",onClick:s[0]||(s[0]=Z(()=>{},["stop"]))},[u(A,{type:"spinner",vertical:""})])]),_:1},8,["show"]),n("div",{class:g(["area-content",{searchBox:r.searchBox}])},[n("form",oe,[u(I,{modelValue:r.value,"onUpdate:modelValue":[s[1]||(s[1]=o=>r.value=o),a.onSearch],"show-action":"",clearable:"",placeholder:"\u8F93\u5165\u57CE\u5E02\u540D\u3001\u62FC\u97F3\u6216\u5B57\u6BCD\u67E5\u8BE2",onSearch:a.onSearch,onCancel:a.onCancel,class:g(["search-input",{searchBox:r.searchBox}])},null,8,["modelValue","onSearch","onUpdate:modelValue","onCancel","class"])]),n("div",re,[n("div",ae,"\u5F53\u524D\u9009\u62E9:"+p(a.currentSelectAddress),1),ne,n("div",ie,[n("div",{class:g(["choosed-area location",{fail:i.geoViewAddress=="\u5B9A\u4F4D\u5931\u8D25"||i.geoViewAddress=="\u5B9A\u4F4D\u4E2D..."||i.geoViewAddress==""}]),onClick:s[2]||(s[2]=(...o)=>i.clickGeoAddress&&i.clickGeoAddress(...o))},[le,n("div",null,p(i.geoViewAddress||"\u5B9A\u4F4D\u5931\u8D25"),1)],2),S("  \u6700\u8FD1\u9009\u62E9\u5730\u5740 "),n("div",{class:"choosed-area",onClick:s[3]||(s[3]=o=>a.goToIndexOnline("\u5168\u90E8\u5730\u533A"))},"\u5168\u90E8\u5730\u533A"),(l(!0),d(_,null,m(a.latelyAddressArrayComputed,(o,h)=>(l(),d("div",{class:"choosed-area",onClick:U=>a.goToIndexOnline(h),key:o},p(o),9,de))),128))]),ce,n("ul",he,[(l(!0),d(_,null,m(r.hotCity,o=>(l(),d("li",{key:o.id,onClick:h=>a.choose(o)},p(o.name),9,ue))),128))]),u(E,{"sticky-offset-top":40,"index-list":a.indexList,style:Q({top:r.barTop+"px"})},{default:b(()=>[S(' class="bar" '),(l(!0),d(_,null,m(a.computedList,o=>(l(),d(_,{key:o.items},[u(D,{index:o.index},null,8,["index"]),(l(!0),d(_,null,m(o.items,h=>(l(),$(G,{title:h.name,key:h.name,onClick:U=>a.choose(h)},null,8,["title","onClick"]))),128))],64))),128))]),_:1},8,["index-list","style"])]),V(n("div",_e,[(l(!0),d(_,null,m(r.searchAddress,o=>(l(),d("div",{class:"item",key:o.name,onClick:h=>a.choose(o)},p(o.name),9,pe))),128)),V(u(H,{description:"\u672A\u641C\u7D22\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5185\u5BB9"},null,512),[[L,r.noData]])],512),[[L,r.searchBox]])],2)])}var Ce=ee(se,[["render",me],["__scopeId","data-v-ac81bcb6"]]);export{Ce as default};
