import{p as b,d as w,a as A,u as R,M as I,r as n,c as L,e as f,h as p,j as l,k as s,g as M,V as h,F as N,i as S,t as m,$ as E,a4 as H}from"./index.3518e5b0.js";import{H as P}from"./header.d5316539.js";import{u as U}from"./useTitles.54f46820.js";import{_ as j,f as D}from"./rate_popup.69f4d39d.js";import"./fast_nav.40db65c6.js";import"./plugin-vue_export-helper.21dcd24c.js";function T(u){return b("Mobile/News/getComplaintLists",u)}function $({uId:u,star:i,content:r}){return b("Mobile/News/submitComplaint",{uId:u,star:i,content:r})}const z={class:"container"},q={class:"ul"},G={class:"time f18"},J={class:"rate"},K={class:"f18"},O={class:"text f20"},te=w({setup(u){const i=A(),r=R(),_=I(()=>i.state.uId),v=n(1);U("\u6295\u8BC9\u4E0E\u8BC4\u4EF7");const g=n(null);function x(){var e;(e=g.value)==null||e.open()}const y=e=>{const{roteMessage:o,roteValue:t}=e;F({roteMessage:o,roteValue:t})};async function F({roteMessage:e,roteValue:o}){const t=await $({uId:_.value,star:o,content:e});t!=null&&t.code?h(t.message):(h("\u8BC4\u4EF7\u6210\u529F"),r.go(0))}const c=n([]),d=n(!1),C=n(!1);function V(){B()}async function B(){const e=await T({uId:_.value,page:v.value,pagesize:10});v.value+=1,c.value=c.value.concat(e),d.value=!1,(e==null?void 0:e.code)===201&&(C.value=!0)}return(e,o)=>{const t=L("van-list");return f(),p("div",z,[l(P,{indexHeader:!1}),s("ul",q,[l(t,{loading:d.value,"onUpdate:loading":o[0]||(o[0]=a=>d.value=a),finished:C.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:V},{default:M(()=>[(f(!0),p(N,null,S(c.value,a=>(f(),p("li",{key:a.id},[s("div",G,m(a.add_time),1),s("div",J,[l(E(H),{modelValue:a.star,"onUpdate:modelValue":k=>a.star=k,readonly:"",icon:"star","void-icon":"star-o"},null,8,["modelValue","onUpdate:modelValue"]),s("span",K,m(E(D)(a.star)),1)]),s("div",O,m(a.content),1)]))),128))]),_:1},8,["loading","finished"])]),s("div",{class:"btn-box"},[s("div",{class:"btn f22",onClick:x},"\u6211\u8981\u8BC4\u4EF7")]),l(j,{author:"\u4E3A\u519C\u670D\u52A1\u5E73\u53F0",ref_key:"ratePopupRef",ref:g,onEmitSub:y},null,512)])}}});export{te as default};
