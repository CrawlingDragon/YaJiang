var T=Object.defineProperty,L=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var x=(s,e,n)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,b=(s,e)=>{for(var n in e||(e={}))B.call(e,n)&&x(s,n,e[n]);if(k)for(var n of k(e))P.call(e,n)&&x(s,n,e[n]);return s},y=(s,e)=>L(s,U(e));import{H}from"./header.1705d6a2.js";import{r as f,w as F,c as d,e as v,h as g,k as a,j as r,g as h,v as _,t as D,B as V,F as I,z as w,L as z,J as N,x as q,y as A,C as G,D as j,l as E}from"./index.a3582b47.js";import{u as J}from"./useTitles.0514a601.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.a53c4cb6.js";import"./index.40ed97f4.js";const K={props:{checked:{type:Boolean,default:!1}},setup(s,{emit:e}){const n=f(!1),o=f(!1),t=f(!1);F(n,u=>{e("update:checked",u)});function i(){o.value=!1}function m(){t.value=!1}return{checkbox:n,show:o,privacyShow:t,closeDeal:i,closePrivacy:m}},data(){return{dealData:{},privacyData:{}}},created(){this.getUserAgreement(),this.getUserPrivacy()},methods:{getUserAgreement(){this.$axios.fetchGet("/Mobile/User/user_agreement").then(s=>{s.data.code===0&&(this.dealData=s.data.data)})},getUserPrivacy(){this.$axios.fetchGet("/Mobile/User/service_agreement").then(s=>{s.data.code===0&&(this.privacyData=s.data.data)})}}},O={class:"deal-box"},Q=w(" \u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"),R=w("\u4E0E"),W=["innerHTML"],X=["innerHTML"];function Y(s,e,n,o,t,i){const m=d("van-checkbox"),u=d("van-icon"),p=d("van-overlay");return v(),g(I,null,[a("div",O,[r(m,{modelValue:o.checkbox,"onUpdate:modelValue":e[0]||(e[0]=l=>o.checkbox=l),"icon-size":"20px",class:"checkbox","checked-color":"#338aff"},null,8,["modelValue"]),Q,a("span",{onClick:e[1]||(e[1]=l=>o.show=!0)},"\u7528\u6237\u534F\u8BAE"),R,a("span",{onClick:e[2]||(e[2]=l=>o.privacyShow=!0)},"\u9690\u79C1\u653F\u7B56")]),r(p,{show:o.show,onClick:e[5]||(e[5]=l=>o.show=!1),"z-index":"20","lock-scroll":!1},{default:h(()=>[_(" \u7528\u6237\u534F\u8BAE "),a("div",{class:"wrapper",onClick:e[4]||(e[4]=V(()=>{},["stop"]))},[a("div",{class:"close-btn",onClick:e[3]||(e[3]=(...l)=>o.closeDeal&&o.closeDeal(...l))},[r(u,{name:"cross"})]),a("h3",null,D(t.privacyData.title),1),a("p",{class:"text",innerHTML:t.privacyData.content},null,8,W)])]),_:1},8,["show"]),r(p,{show:o.privacyShow,onClick:e[8]||(e[8]=l=>o.privacyShow=!1),"z-index":"20","lock-scroll":!1},{default:h(()=>[_(" \u9690\u79C1\u653F\u7B56 "),a("div",{class:"wrapper",onClick:e[7]||(e[7]=V(()=>{},["stop"]))},[a("div",{class:"close-btn",onClick:e[6]||(e[6]=(...l)=>o.closePrivacy&&o.closePrivacy(...l))},[r(u,{name:"cross"})]),a("h3",null,D(t.dealData.title),1),a("p",{class:"text",innerHTML:t.dealData.content},null,8,X)])]),_:1},8,["show"])],64)}var Z=C(K,[["render",Y]]);const $={name:"sign",components:{Header:H,Deal:Z},setup(){J("\u6CE8\u518C")},props:{},data(){return{showBtn:!0,clickTrue:!1,username:"",sms:"",password:"",checked:!1,passwordLengthMessage:"\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E6\u4F4D"}},created(){},computed:{},watch:{},mounted(){},methods:y(b({},z(["saveUserInfo"])),{passwordLengValidator(){if(this.password.length<=5)return this.passwordLengthMessage="\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E6\u4F4D",!1;if(this.password.length>=21)return this.passwordLengthMessage="\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u591A\u4E8E20\u4F4D",!1},validatorPhone(s){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(s)?this.clickTrue=!0:this.clickTrue=!1,/^1(3|4|5|6|7|8|9)\d{9}$/.test(s)},finish(){this.$refs.countDown.reset(),this.showBtn=!0,this.clickTrue=!0},onSubmit2(){if(!this.checked){this.$toast("\u5FC5\u987B\u5148\u540C\u610F\u7528\u6237\u534F\u8BAE\u548C\u9690\u79C1\u653F\u7B56");return}this.signFn(this.username,this.password,this.sms)},signFn(s,e,n){this.$axios.fetchPost("Mobile/Member/register",{username:s,password:e,code:n}).then(o=>{const t=o.data;this.$toast(o.data.message),t.code==0&&(this.saveUserInfo(t.data),setTimeout(()=>{this.$router.push({path:"/index"})},500))})},start(){!this.clickTrue||this.sendPhone()},sendPhone(){this.$axios.fetchPost("Mobile/Member/ServerSmsCode",{mobile:this.username,action:"reg"}).then(s=>{s.data.code==0?(this.$toast(s.data.message),this.clickTrue=!1,this.showBtn=!1,setTimeout(()=>{this.$refs.countDown.start()},100)):this.$dialog.alert({message:s.data.message,confirmButtonText:"\u77E5\u9053\u4E86",confirmButtonColor:"#338aff"}).then(()=>{})})},goLogin(){N()}})},ee=s=>(q("data-v-d79c12b6"),s=s(),A(),s),se={class:"sign-container"},te=ee(()=>a("div",{class:"title"},"\u5FEB\u901F\u6CE8\u518C",-1)),oe={style:{"margin-top":"30px","margin-left":"16px"}},ne={style:{margin:"16px"}},ae=w(" \u6CE8\u518C ");function re(s,e,n,o,t,i){const m=d("Header"),u=d("van-field"),p=d("van-count-down"),l=d("Deal"),M=d("van-button"),S=d("van-form");return v(),g("div",se,[r(m,{indexHeader:!1}),te,r(S,{onSubmit:i.onSubmit2,class:"from"},{default:h(()=>[r(u,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=c=>t.username=c),name:"phone",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{required:!0,message:"\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A"},{validator:i.validatorPhone,message:"\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E"}]},null,8,["modelValue","rules"]),r(u,{modelValue:t.sms,"onUpdate:modelValue":e[2]||(e[2]=c=>t.sms=c),center:"",clearable:"",name:"code",placeholder:"\u8BF7\u8F93\u51654\u4F4D\u9A8C\u8BC1\u7801",maxlength:"4",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]},{button:h(()=>[t.showBtn?(v(),g("div",{key:0,class:"btn",onClick:e[1]||(e[1]=(...c)=>i.start&&i.start(...c))},"\u53D1\u9001\u9A8C\u8BC1\u7801")):_("v-if",!0),G(a("div",null,[r(p,{ref:"countDown",millisecond:"",time:6e4,"auto-start":!1,format:"ss\u79D2\u540E\u91CD\u8BD5",onFinish:i.finish},null,8,["onFinish"])],512),[[j,!t.showBtn]])]),_:1},8,["modelValue"]),r(u,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=c=>t.password=c),type:"password",name:"pwd",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF086-20\u4F4D\uFF09",minlength:"6",maxlength:"20",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{validator:i.passwordLengValidator,message:t.passwordLengthMessage}]},null,8,["modelValue","rules"]),a("div",oe,[r(l,{checked:t.checked,"onUpdate:checked":e[4]||(e[4]=c=>t.checked=c)},null,8,["checked"])]),a("div",ne,[r(M,{round:"",block:"",type:"info","native-type":"submit",class:E(["sub",{success:t.checked&&t.password&&t.username&&t.sms}])},{default:h(()=>[ae]),_:1},8,["class"])])]),_:1},8,["onSubmit"]),a("div",{class:"go-login",onClick:e[5]||(e[5]=(...c)=>i.goLogin&&i.goLogin(...c))},"\u5DF2\u6709\u76CA\u519C\u5B9D\u8D26\u53F7\uFF0C\u53BB\u767B\u5F55")])}var pe=C($,[["render",re],["__scopeId","data-v-d79c12b6"]]);export{pe as default};
