var b=Object.defineProperty,x=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var h=(s,e,o)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,c=(s,e)=>{for(var o in e||(e={}))C.call(e,o)&&h(s,o,e[o]);if(m)for(var o of m(e))B.call(e,o)&&h(s,o,e[o]);return s},p=(s,e)=>x(s,k(e));import{H as T}from"./header.d5316539.js";import{Q as y,c as i,e as w,h as _,j as n,g as u,x as S,y as M,v as I,C as L,D as U,k as f,l as D,z as H}from"./index.3518e5b0.js";import{u as q}from"./useTitles.54f46820.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.40db65c6.js";const N={setup(){q("\u627E\u56DE\u5BC6\u7801")},name:"findPassword",components:{Header:T},props:{},data(){return{showBtn:!0,clickTrue:!1,findPhone:"",findCode:"",findPassword:"",findPassword2:"",passwordLengthMessage:"\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E6\u4F4D"}},created(){},computed:{},watch:{},mounted(){},methods:p(c({},y(["saveUserInfo"])),{validatorPhone(s){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(s)?this.clickTrue=!0:this.clickTrue=!1,/^1(3|4|5|6|7|8|9)\d{9}$/.test(s)},passwordLengValidator(){if(this.findPassword.length<=5)return this.passwordLengthMessage="\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E6\u4F4D",!1;if(this.findPassword.length>=21)return this.passwordLengthMessage="\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u591A\u4E8E20\u4F4D",!1},validatorPw2(){return this.findPassword2!=""&&this.findPassword2==this.findPassword},finish(){this.$refs.countDown.reset(),this.showBtn=!0,this.clickTrue=!0},onSubmit(){this.lookForPwd(this.findPhone,this.findCode,this.findPassword)},start(){!this.clickTrue||this.sendPhone()},sendPhone(){this.$axios.fetchPost("Mobile/Member/ServerSmsCode",{mobile:this.findPhone}).then(s=>{s.data.code==0?(this.$toast(s.data.message),this.clickTrue=!1,this.showBtn=!1,setTimeout(()=>{this.$refs.countDown.start()},100)):this.$dialog.alert({message:s.data.message,confirmButtonText:"\u77E5\u9053\u4E86",confirmButtonColor:"#338aff"}).then(()=>{})})},lookForPwd(s,e,o){this.$axios.fetchPost("/Mobile/Member/BackupPasswd",{mobile:s,code:e,password:o}).then(d=>{d.data.code==0?(this.saveUserInfo(d.data.data),this.$toast(d.data.message),setTimeout(()=>{this.$router.push({path:"/"})},200)):this.$dialog.alert({message:d.data.message,confirmButtonText:"\u77E5\u9053\u4E86",confirmButtonColor:"#338aff"}).then(()=>{})})}})},z=s=>(S("data-v-5df074ee"),s=s(),M(),s),j={class:"find_password-container"},A=z(()=>f("div",{class:"title"},"\u627E\u56DE\u5BC6\u7801",-1)),E={style:{margin:"16px","margin-top":"45px"}},Q=H(" \u4FDD\u5B58 ");function G(s,e,o,d,t,r){const g=i("Header"),l=i("van-field"),P=i("van-count-down"),v=i("van-button"),V=i("van-form");return w(),_("div",j,[n(g,{indexHeader:!1}),A,n(V,{onSubmit:r.onSubmit,class:"from"},{default:u(()=>[n(l,{modelValue:t.findPhone,"onUpdate:modelValue":e[0]||(e[0]=a=>t.findPhone=a),name:"findPhone",type:"tel",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{validator:r.validatorPhone,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]},null,8,["modelValue","rules"]),n(l,{modelValue:t.findCode,"onUpdate:modelValue":e[2]||(e[2]=a=>t.findCode=a),name:"findCode",center:"",clearable:"",placeholder:"\u8BF7\u8F93\u51654\u4F4D\u9A8C\u8BC1\u7801",maxlength:"4",rules:[{required:!0,message:"\u8BF7\u8F93\u51654\u4F4D\u9A8C\u8BC1\u7801"}]},{button:u(()=>[t.showBtn?(w(),_("div",{key:0,class:"btn",onClick:e[1]||(e[1]=(...a)=>r.start&&r.start(...a))},"\u53D1\u9001\u9A8C\u8BC1\u7801")):I("v-if",!0),L(f("div",null,[n(P,{ref:"countDown",millisecond:"",time:6e4,"auto-start":!1,format:"ss\u79D2\u540E\u91CD\u8BD5",onFinish:r.finish},null,8,["onFinish"])],512),[[U,!t.showBtn]])]),_:1},8,["modelValue"]),n(l,{modelValue:t.findPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>t.findPassword=a),type:"password",name:"findPassword",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF086-20\u4F4D\uFF09",maxlength:"20",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF086-20\u4F4D\uFF09"},{validator:r.passwordLengValidator,message:t.passwordLengthMessage}],formatter:a=>a.replace(/\s/g,"")},null,8,["modelValue","rules","formatter"]),n(l,{modelValue:t.findPassword2,"onUpdate:modelValue":e[4]||(e[4]=a=>t.findPassword2=a),type:"password",name:"findPassword2",placeholder:"\u8BF7\u786E\u8BA4\u5BC6\u7801",maxlength:"20",formatter:a=>a.replace(/\s/g,""),rules:[{required:!0,message:"\u65B0\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"},{validator:r.validatorPw2,message:"\u65B0\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"}]},null,8,["modelValue","formatter","rules"]),f("div",E,[n(v,{round:"",block:"",type:"info","native-type":"submit",class:D(["sub",{success:t.findPhone&&t.findCode&&t.findPassword&&t.findPassword2}])},{default:u(()=>[Q]),_:1},8,["class"])])]),_:1},8,["onSubmit"])])}var Y=F(N,[["render",G],["__scopeId","data-v-5df074ee"]]);export{Y as default};
