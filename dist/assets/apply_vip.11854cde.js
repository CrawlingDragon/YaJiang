var U=Object.defineProperty,A=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var v=(e,o,d)=>o in e?U(e,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[o]=d,b=(e,o)=>{for(var d in o||(o={}))T.call(o,d)&&v(e,d,o[d]);if(f)for(var d of f(o))q.call(o,d)&&v(e,d,o[d]);return e},x=(e,o)=>A(e,L(o));import{H as M}from"./hospital_header.56138803.js";import{a as H}from"./area.bba88a9b.js";import{m as N,c as u,e as p,h as _,j as n,g as h,x as P,y as j,v as z,F as D,i as E,C as F,a1 as G,k as a,f as w,Z as K,_ as X,z as V}from"./index.3518e5b0.js";import{u as Z}from"./useTitles.54f46820.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.40db65c6.js";const O={name:"applyVip",components:{Header:M},props:{},setup(){Z("\u7533\u8BF7\u4F1A\u5458")},data(){return{userInfo:"",name:"",phone:"1",card:"1",sex:"",province:"",city:"",town:"",address:"",cardShow:!1,sexShow:!1,detailAddress:"",showArea:!1,addList:[{fid:"",name:"\u96F7\u7B0B",mushu:"",unit:"\u4EA9"}],areaList:H,actions:[{name:"\u7537"},{name:"\u5973"}],choosedIndex:0,hospitalTown:""}},computed:x(b({},N(["mid","uId","initMid","hospitalName"])),{cropNumberBoolean(){let e=!0;return this.addList.forEach(o=>{o.name!=""&&o.mushu==""&&(e=!1)}),e}}),mounted(){this.getUserInfo(),this.getHospitalTown()},methods:{add(){this.addList.push({fid:"",name:"\u96F7\u7B0B",mushu:"",unit:"\u4EA9"})},onSelectSex(e){this.sex=e.name,this.sexShow=!1},onConfirm(e){console.log(e),this.address=e.map(o=>o.name).join("/"),this.province=e[0].name,this.city=e[1].name,this.town=e[2].name,this.showArea=!1},onSubmit(e){if(e.sex==""||e.name==""||e.address==""||e.detailAddress==""){this.$dialog.alert({message:"\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u4FEE\u6539\u4FE1\u606F\u540E\u518D\u63D0\u4EA4",confirmButtonText:"\u77E5\u9053\u4E86",confirmButtonColor:"#155BBB"}).then(()=>{});return}if(!this.cropNumberBoolean){this.$toast("\u4F5C\u7269\u4EA9\u6570\u4E0D\u80FD\u4E3A\u7A7A");return}this.town!=this.hospitalTown?this.$dialog.confirm({message:"\u60A8\u7684\u5730\u5740\u4F4D\u7F6E\u79BB\u533B\u9662\u8F83\u8FDC,\u786E\u5B9A\u7EE7\u7EED\u63D0\u4EA4\u5417?",cancelButtonText:"\u7EE7\u7EED\u63D0\u4EA4",cancelButtonColor:"#155BBB",confirmButtonText:"\u6211\u518D\u60F3\u60F3",confirmButtonColor:"#999"}).then(()=>{}).catch(()=>{this.apply()}):this.apply()},apply(){this.$axios.fetchPost("Mobile/Mpublic/joinMpublic",{mId:this.mid,uId:this.uId,username:this.name,mobile:this.phone,idcard:this.card,sex:this.sex,province:this.province,city:this.city,town:this.town,address:this.detailAddress,zuowu:this.addList}).then(e=>{e.data.code==0&&(this.name="",this.card="",this.sex="",this.address="",this.detailAddress="",this.addList=[{fid:"",name:"",mushu:"",unit:"\u4EA9"}],this.$toast(e.data.message),this.$router.push({path:"/apply_vip_succeed"}))})},removeItem(e){this.addList.splice(e,1)},choosedCrop(e){this.addList[this.choosedIndex].name=e.name,this.addList[this.choosedIndex].fid=e.fid},goToChooseCrop(e){this.choosedIndex=e,this.$router.push({path:"/apply_vip/ask_choose_crop",query:{crop:this.addList[this.choosedIndex].name}})},getUserInfo(){this.$axios.fetchPost("Mobile/User/userCenter",{uId:this.uId,mId:this.mid}).then(e=>{e.data.code==0&&(this.phone=e.data.data.username,this.card="\u5F85\u5B8C\u6210")})},getHospitalTown(){this.$axios.fetchPost("Mobile/Mpublic/MpublicPage",{mId:this.mid,uId:this.uId}).then(e=>{e.data.code==0&&(this.hospitalTown=e.data.data.mpublic.town)})}}},l=e=>(P("data-v-bcb3dac2"),e=e(),j(),e),Q={class:"apply_vip-container"},R=l(()=>a("div",{class:"title f18"},"\u79CD\u690D\u4F5C\u7269\u60C5\u51B5",-1)),W=["onUpdate:modelValue"],Y=l(()=>a("option",{value:"\u4EA9"},"\u4EA9",-1)),$=l(()=>a("option",{value:"\u5C3E"},"\u5C3E",-1)),ee=l(()=>a("option",{value:"\u7BB1"},"\u7BB1",-1)),oe=l(()=>a("option",{value:"\u5934"},"\u5934",-1)),te=l(()=>a("option",{value:"\u7FBD"},"\u7FBD",-1)),se=l(()=>a("option",{value:"\u53EA"},"\u53EA",-1)),ne=l(()=>a("option",{value:"\u68D2"},"\u68D2",-1)),ae=[Y,$,ee,oe,te,se,ne],de=["onClick"],le=l(()=>a("span",null,"+",-1)),ie=V("\u6DFB\u52A0\u4F5C\u7269"),re=[le,ie],ue={style:{margin:"16px"}},me=V(" \u63D0\u4EA4\u4F1A\u5458\u7533\u8BF7 "),pe=l(()=>a("div",{class:"bottom-title f14"},"\u7533\u8BF7\u52A0\u5165\u690D\u7269\u533B\u9662\uFF0C\u4EAB\u53D7\u4F1A\u5458\u670D\u52A1",-1));function he(e,o,d,ce,s,i){const y=u("Header"),r=u("van-field"),C=u("van-action-sheet"),I=u("van-area"),S=u("van-popup"),g=u("van-button"),B=u("van-form"),k=u("router-view");return p(),_("div",Q,[n(y,{header:"indexHeader",navHeader:"\u7533\u8BF7\u4F1A\u5458"}),n(B,{onSubmit:i.onSubmit},{default:h(()=>[n(r,{modelValue:s.name,"onUpdate:modelValue":o[0]||(o[0]=t=>s.name=t),name:"name",label:"\u59D3\u540D",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",required:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"}]},null,8,["modelValue"]),n(r,{modelValue:s.phone,"onUpdate:modelValue":o[1]||(o[1]=t=>s.phone=t),name:"phone",label:"\u624B\u673A\u53F7",readonly:""},null,8,["modelValue"]),n(r,{modelValue:s.card,"onUpdate:modelValue":o[2]||(o[2]=t=>s.card=t),name:"card",label:"\u8EAB\u4EFD\u8BC1",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7\u7801",readonly:""},null,8,["modelValue"]),z(' <van-number-keyboard :show="cardShow" extra-key="X" close-button-text="\u5B8C\u6210" @blur="cardShow = false" v-model="card" /> '),n(r,{modelValue:s.sex,"onUpdate:modelValue":o[3]||(o[3]=t=>s.sex=t),name:"sex",onClick:o[4]||(o[4]=t=>s.sexShow=!0),label:"\u6027\u522B",placeholder:"\u8BF7\u9009\u62E9",required:"",readonly:"",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},null,8,["modelValue"]),n(C,{show:s.sexShow,"onUpdate:show":o[5]||(o[5]=t=>s.sexShow=t),actions:s.actions,onSelect:i.onSelectSex},null,8,["show","actions","onSelect"]),n(r,{readonly:"",required:"",clickable:"",name:"address",modelValue:s.address,"onUpdate:modelValue":o[6]||(o[6]=t=>s.address=t),label:"\u5730\u533A\u9009\u62E9",placeholder:"\u70B9\u51FB\u9009\u62E9\u7701\u5E02\u533A",onClick:o[7]||(o[7]=t=>s.showArea=!0),rules:[{required:!0,message:"\u70B9\u51FB\u9009\u62E9\u7701\u5E02\u533A"}]},null,8,["modelValue"]),n(S,{show:s.showArea,"onUpdate:show":o[9]||(o[9]=t=>s.showArea=t),position:"bottom"},{default:h(()=>[n(I,{"area-list":s.areaList,onConfirm:i.onConfirm,onCancel:o[8]||(o[8]=t=>s.showArea=!1)},null,8,["area-list","onConfirm"])]),_:1},8,["show"]),n(r,{modelValue:s.detailAddress,"onUpdate:modelValue":o[10]||(o[10]=t=>s.detailAddress=t),name:"detailAddress",label:"\u8BE6\u7EC6\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",required:"",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"}]},null,8,["modelValue"]),R,(p(!0),_(D,null,E(s.addList,(t,c)=>(p(),_("div",{class:"add-box",key:c},[n(r,{modelValue:t.name,"onUpdate:modelValue":m=>t.name=m,name:"\u4F5C\u7269\u540D",label:"\u4F5C\u7269\u540D",placeholder:"\u8BF7\u9009\u62E9",readonly:"",onClick:m=>i.goToChooseCrop(c)},null,8,["modelValue","onUpdate:modelValue","onClick"]),n(r,{modelValue:t.mushu,"onUpdate:modelValue":m=>t.mushu=m,name:"\u79CD\u517B\u6570\u91CF",label:"\u79CD\u517B\u6570\u91CF",placeholder:"\u8BF7\u9009\u62E9",type:"number"},{button:h(()=>[F(a("select",{name:"",id:"",class:"select","onUpdate:modelValue":m=>t.unit=m},ae,8,W),[[G,t.unit]])]),_:2},1032,["modelValue","onUpdate:modelValue"]),a("div",{class:"close",onClick:m=>i.removeItem(c)},"x",8,de)]))),128)),a("div",{class:"add-btn f18",onClick:o[11]||(o[11]=(...t)=>i.add&&i.add(...t))},re),a("div",ue,[n(g,{round:"",block:"",type:"info","native-type":"submit",class:"subBtn f20"},{default:h(()=>[me]),_:1})])]),_:1},8,["onSubmit"]),pe,n(k,null,{default:h(({Component:t})=>[(p(),w(X,null,[(p(),w(K(t),{onGetCrop:i.choosedCrop},null,8,["onGetCrop"]))],1024))]),_:1})])}var ye=J(O,[["render",he],["__scopeId","data-v-bcb3dac2"]]);export{ye as default};
