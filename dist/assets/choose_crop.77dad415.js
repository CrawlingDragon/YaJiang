var L=Object.defineProperty,I=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,x=(e,t)=>{for(var a in t||(t={}))V.call(t,a)&&v(e,a,t[a]);if(m)for(var a of m(t))B.call(t,a)&&v(e,a,t[a]);return e},C=(e,t)=>I(e,T(t));import{m as N,c as h,e as l,h as r,k as i,j as y,t as _,C as p,D as f,F as u,i as d,v as k,f as R,g as D,n as E,x as z,y as F,z as M}from"./index.a3582b47.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";const j={name:"askChooseCrop",metaInfo:{title:"\u9009\u62E9\u4F5C\u7269"},components:{},props:{},data(){return{value:"",list:[],hispitalList:[],cropName:this.$route.query.crop,searchResult:[],searchResultShow:!1,noResult:!1,barTop:54}},created(){},computed:C(x({},N(["uId"])),{letterList(){let e=[];return this.list.forEach(t=>{e.push(t.letter)}),e},crops(){let e=[];return this.list.forEach(t=>{e=e.concat(t.index)}),e}}),watch:{searchResult(e){e.length==0?this.noResult=!0:this.noResult=!1}},mounted(){this.getCropList()},methods:{onSearch(e){this.searchResult=[],this.crops.forEach(t=>{t.name.indexOf(e)>=0&&this.searchResult.push(t)}),this.searchResultShow=!0,e==""&&(this.searchResultShow=!1)},choose(e){this.$router.go(-1),this.$emit("getCrop",e),this.searchResultShow=!1},onCancel(){this.$router.go(-1),this.searchResultShow=!1},getCropList(){this.$axios.fetchPost("Mobile/Mpublic/getCropIndexQuery",{uId:this.uId}).then(e=>{e.data.code==0&&(this.hispitalList=e.data.historydata,this.$nextTick(()=>{this.computedBarTop(),this.list=e.data.data}))})},computedBarTop(){let e=this.$refs.historyRef.getBoundingClientRect().height;console.log("h",e),e>0?this.barTop=e+54:this.barTop=54}}},q=e=>(z("data-v-d546eb92"),e=e(),F(),e),O={class:"choose_crop-container",id:"wrap"},P={action:"/",class:"from"},Q={key:0,class:"history-box",ref:"historyRef"},A={class:"title"},G={class:"history-ul"},H=q(()=>i("div",{class:"small-title"},"\u6700\u8FD1\u9009\u62E9/\u5168\u90E8\u4F5C\u7269",-1)),J=["onClick"],K={class:"search_result-ul"},W={class:"noData"},X=M(" \u62B1\u6B49\u6CA1\u6709\u8BE5\u4F5C\u7269,\u53EF\u9009\u62E9"),Y=["onClick"];function Z(e,t,a,$,o,n){const S=h("van-search"),g=h("van-index-anchor"),w=h("van-cell"),b=h("van-index-bar");return l(),r("div",O,[i("form",P,[y(S,{modelValue:o.value,"onUpdate:modelValue":[t[0]||(t[0]=s=>o.value=s),n.onSearch],"show-action":"",placeholder:"\u8BF7\u8F93\u5165\u4F5C\u7269\u540D",onSearch:n.onSearch,onCancel:n.onCancel,clearable:""},null,8,["modelValue","onSearch","onCancel","onUpdate:modelValue"])]),o.hispitalList?(l(),r("div",Q,[i("div",A,"\u5F53\u524D\u9009\u62E9\uFF1A"+_(o.cropName),1),p(i("div",G,[H,(l(!0),r(u,null,d(o.hispitalList,s=>(l(),r("li",{key:s.fid,onClick:c=>n.choose(s)},_(s.name),9,J))),128))],512),[[f,o.hispitalList.length!=0]])],512)):k("v-if",!0),o.searchResultShow?k("v-if",!0):(l(),R(b,{key:1,class:"bar","index-list":n.letterList,style:E({top:o.barTop+"px"})},{default:D(()=>[(l(!0),r(u,null,d(o.list,s=>(l(),r("div",{key:s.id},[y(g,{index:s.letter},null,8,["index"]),(l(!0),r(u,null,d(s.index,c=>(l(),R(w,{title:c.name,key:c.fid,onClick:ee=>n.choose(c)},null,8,["title","onClick"]))),128))]))),128))]),_:1},8,["index-list","style"])),p(i("ul",K,[p(i("div",W,[X,i("span",{class:"other",onClick:t[1]||(t[1]=s=>n.choose({name:"\u5176\u4ED6",fid:195}))},"\u5176\u4ED6")],512),[[f,o.noResult]]),(l(!0),r(u,null,d(o.searchResult,s=>(l(),r("li",{key:s.fid,onClick:c=>n.choose(s)},_(s.name),9,Y))),128))],512),[[f,o.searchResultShow]])])}var ae=U(j,[["render",Z],["__scopeId","data-v-d546eb92"]]);export{ae as default};
