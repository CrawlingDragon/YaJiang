import{H as k}from"./header.d5316539.js";import{O as S}from"./online_item.56032ee1.js";import{u as D}from"./useTitles.54f46820.js";import{c as l,e as s,h as a,j as c,k as i,F as _,i as u,v as p,g as z,C as I,D as b,x as L,y as O,t as f}from"./index.3518e5b0.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.40db65c6.js";const H={setup(){D("\u641C\u7D22\u7F51\u8BCA")},name:"searchOnline",components:{Header:k,OnlineItem:S},props:{},data(){return{value:"",zuowu:[],online:[],noData:!1,loading:!0,finished:!1,page:0}},beforeRouteEnter(e,t,r){t.name!="askDetail"&&r(d=>{d.value="",d.zuowu=[],d.online=[]}),r()},methods:{onLoad(){this.getSearchResult()},onSearch(e){e!=""&&(this.page=0,this.online=[],this.zuowu=[],this.finished=!1,this.onLoad())},getSearchResult(){this.noData=!1,this.page+=1,this.$axios.fetchPost("Mobile/Wen/index",{keyword:this.value,page:this.page,isall:"all"}).then(e=>{e.data.code==0?(this.loading=!1,this.zuowu=e.data.zwdata,this.online=this.online.concat(e.data.data)):e.data.code==201&&(this.page==1?(this.online=[],this.noData=!0):this.finished=!0)})},onCancel(){this.$router.push({path:"/index"})},goToCrop(e,t,r){this.$router.push({path:"/searchOnlineCrop",query:{crop:e,time:t,fid:r}})}}},v=e=>(L("data-v-95b0d4ca"),e=e(),O(),e),B={class:"search-online"},N={action:"/"},R={key:0,class:"content01"},T=v(()=>i("div",{class:"title"},"\u4F5C\u7269",-1)),E=["onClick"],F={class:"text"},U={class:"p1"},j={class:"p2"},q={key:1,class:"content02"},M=v(()=>i("div",{class:"title"},"\u7EBF\u4E0A\u7F51\u8BCA",-1)),P={class:"online-ul"};function W(e,t,r,d,n,h){const m=l("Header"),g=l("van-search"),x=l("van-image"),y=l("OnlineItem"),w=l("van-list"),C=l("van-empty");return s(),a("div",B,[c(m,{indexHeader:!1}),i("form",N,[c(g,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),"show-action":"",clearable:"",placeholder:"\u641C\u7D22\u95EE\u7B54",onSearch:h.onSearch,onCancel:h.onCancel},null,8,["modelValue","onSearch","onCancel"])]),n.zuowu!=""?(s(),a("div",R,[T,(s(!0),a(_,null,u(n.zuowu,o=>(s(),a("div",{class:"text-box",key:o.fid,onClick:A=>h.goToCrop(o.name,o.threads,o.fid)},[c(x,{class:"img",src:o.icon},null,8,["src"]),i("div",F,[i("div",U,f(o.name),1),i("div",j,"\u7F51\u8BCA\uFF1A"+f(o.threads)+"\u6B21",1)])],8,E))),128))])):p("v-if",!0),n.online.length!=""?(s(),a("div",q,[M,i("ul",P,[c(w,{loading:n.loading,"onUpdate:loading":t[1]||(t[1]=o=>n.loading=o),finished:n.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:h.onLoad},{default:z(()=>[(s(!0),a(_,null,u(n.online,o=>(s(),a("li",{key:o.id},[c(y,{list:o},null,8,["list"])]))),128))]),_:1},8,["loading","finished","onLoad"])])])):p("v-if",!0),I(c(C,{description:"\u672A\u641C\u7D22\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5185\u5BB9"},null,512),[[b,n.noData]])])}var Z=V(H,[["render",W],["__scopeId","data-v-95b0d4ca"]]);export{Z as default};
