var H=Object.defineProperty,M=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(e,s,t)=>s in e?H(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,p=(e,s)=>{for(var t in s||(s={}))z.call(s,t)&&k(e,t,s[t]);if(w)for(var t of w(s))F.call(s,t)&&k(e,t,s[t]);return e},f=(e,s)=>M(e,U(s));import{H as N}from"./header.1705d6a2.js";import{g as P}from"./baidu_locationAddress.f951769d.js";import{u as j,a as q,G as C,S as R,m as J,q as K,s as O,c,e as i,h as d,j as u,g as B,k as o,l as A,t as m,F as _,i as v,C as x,D as g,U as Q,x as W,y as X,B as Y,f as Z}from"./index.a3582b47.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.a53c4cb6.js";const ee={name:"areas",metaInfo(){return{title:"\u5207\u6362\u5730\u533A"}},components:{Headers:N},setup(){const e=j(),s=q(),t=C(()=>s.getters.geoViewAddress),l=C(()=>s.state.geoAddress),{geolocationAgain:n}=P();R(()=>{if(t.value=="\u5B9A\u4F4D\u4E2D..."){s.commit("setGeoAddress","\u5B9A\u4F4D\u5931\u8D25");return}});async function r(){if(t.value=="\u5B9A\u4F4D\u4E2D..."){Q("\u5B9A\u4F4D\u4E2D");return}if(t.value==="\u5B9A\u4F4D\u5931\u8D25"){s.commit("setGeoAddress","\u5B9A\u4F4D\u4E2D..."),await n();return}s.commit("setAxiosAddress",l.value),setTimeout(()=>{e.push({path:"/index"})},300)}return{clickGeoAddress:r,geoViewAddress:t}},data(){return{value:"",hotCity:[],list:[],searchAddress:[],searchBox:!1,noData:!1,show:!0}},activated(){this.value="",this.searchBox=!1},computed:f(p(p({},J(["initMid","geoAddress","latelyAddressArray"])),K(["viewAddress"])),{initSearchListAll(){let e=[];return this.list.forEach(s=>{e=e.concat(s.items)}),e},computedList(){let e=[];return e=this.list.filter(s=>s.items.length!=0),e},indexList(){let e=[];return this.list.forEach(s=>{s.items.length!=0&&e.push(s.index)}),e},latelyAddressArrayComputed(){let e=[];return this.latelyAddressArray.forEach(s=>{let t=s.split(","),l=t[t.length-1];e.push(l)}),e}}),watch:{},mounted(){this.getAreaList()},methods:f(p({},O(["setAxiosAddress"])),{onSearch(e){e!=""&&(this.page=0,this.searchAddress=[],this.searchBox=!0,this.filtrate(e),this.searchAddress.length==0?this.noData=!0:this.noData=!1),e==""&&(this.searchAddress=[],this.searchBox=!1)},filtrate(e){this.initSearchListAll.forEach(s=>{s.name.includes(e)&&this.searchAddress.push(s)})},onCancel(){this.searchBox=!1,this.$router.go(-1)},choose(e){this.setAxiosAddress(e.data),setTimeout(()=>{this.$router.push({path:"/index"}),this.searchBox=!1},100)},goToIndex(e){this.setAxiosAddress(this.latelyAddressArray[e]),setTimeout(()=>{this.$router.push({path:"/index"}),this.searchBox=!1},100)},getAreaList(){this.$axios.fetchGet("Mobile/Position/getAreaPostion",{mId:this.initMid}).then(e=>{e.data.code==0&&(this.hotCity=e.data.data.hotcity.letterlist,this.list=e.data.data.lists,this.show=!1)})}})},y=e=>(W("data-v-0cd838a5"),e=e(),X(),e),se={class:"area-container"},te={action:"/",class:"from"},ae={style:{background:"#ebebeb"}},oe={class:"now-choose-title"},re=y(()=>o("div",{class:"tip-title"},"\u5B9A\u4F4D/\u6700\u8FD1\u8BBF\u95EE",-1)),ne={class:"choose-wrap"},ie=y(()=>o("div",{class:"icon"},null,-1)),le=["onClick"],de=y(()=>o("div",{class:"tip-title"},"\u70ED\u95E8\u57CE\u5E02",-1)),ce={class:"hot-city-ul"},he=["onClick"],ue={class:"search-content"},_e=["onClick"];function me(e,s,t,l,n,r){const S=c("Headers"),V=c("van-loading"),L=c("van-overlay"),b=c("van-search"),G=c("van-index-anchor"),I=c("van-cell"),D=c("van-index-bar"),T=c("van-empty");return i(),d("div",se,[u(S,{ref:"header","index-header":!1},null,512),u(L,{show:n.show,class:"loading","z-index":"99999999999999"},{default:B(()=>[o("div",{class:"wrapper",onClick:s[0]||(s[0]=Y(()=>{},["stop"]))},[u(V,{type:"spinner",vertical:""})])]),_:1},8,["show"]),o("div",{class:A(["area-content",{searchBox:n.searchBox}])},[o("form",te,[u(b,{modelValue:n.value,"onUpdate:modelValue":[s[1]||(s[1]=a=>n.value=a),r.onSearch],"show-action":"",clearable:"",placeholder:"\u8F93\u5165\u57CE\u5E02\u540D\u3001\u62FC\u97F3\u6216\u5B57\u6BCD\u67E5\u8BE2",onSearch:r.onSearch,onCancel:r.onCancel,class:A(["search-input",{searchBox:n.searchBox}])},null,8,["modelValue","onSearch","onUpdate:modelValue","onCancel","class"])]),o("div",ae,[o("div",oe,"\u5F53\u524D\u9009\u62E9:"+m(e.viewAddress),1),re,o("div",ne,[o("div",{class:A(["choosed-area location",{fail:l.geoViewAddress=="\u5B9A\u4F4D\u5931\u8D25"||l.geoViewAddress=="\u5B9A\u4F4D\u4E2D..."||l.geoViewAddress==""}]),onClick:s[2]||(s[2]=(...a)=>l.clickGeoAddress&&l.clickGeoAddress(...a))},[ie,o("div",null,m(l.geoViewAddress||"\u5B9A\u4F4D\u5931\u8D25"),1)],2),(i(!0),d(_,null,v(r.latelyAddressArrayComputed,(a,h)=>x((i(),d("div",{class:"choosed-area",onClick:E=>r.goToIndex(h),key:a},m(a),9,le)),[[g,e.viewAddress]])),128))]),de,o("ul",ce,[(i(!0),d(_,null,v(n.hotCity,a=>(i(),d("li",{key:a.id,onClick:h=>r.choose(a)},m(a.name),9,he))),128))]),u(D,{"sticky-offset-top":40,"index-list":r.indexList},{default:B(()=>[(i(!0),d(_,null,v(r.computedList,a=>(i(),d(_,{key:a.items},[u(G,{index:a.index},null,8,["index"]),(i(!0),d(_,null,v(a.items,h=>(i(),Z(I,{title:h.name,key:h.name,onClick:E=>r.choose(h)},null,8,["title","onClick"]))),128))],64))),128))]),_:1},8,["index-list"])]),x(o("div",ue,[(i(!0),d(_,null,v(n.searchAddress,a=>(i(),d("div",{class:"item",key:a.name,onClick:h=>r.choose(a)},m(a.name),9,_e))),128)),x(u(T,{description:"\u672A\u641C\u7D22\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5185\u5BB9"},null,512),[[g,n.noData]])],512),[[g,n.searchBox]])],2)])}var ye=$(ee,[["render",me],["__scopeId","data-v-0cd838a5"]]);export{ye as default};
