var R=Object.defineProperty,b=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var k=(t,e,i)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_=(t,e)=>{for(var i in e||(e={}))M.call(e,i)&&k(t,i,e[i]);if(H)for(var i of H(e))V.call(e,i)&&k(t,i,e[i]);return t},w=(t,e)=>b(t,D(e));import{H as F}from"./header.d5316539.js";import{m as T,s as E,c as d,e as n,h as c,j as p,k as o,C as h,D as r,F as v,i as m,v as g,f as B,x as N,y as P,t as u,z}from"./index.3518e5b0.js";import{u as A}from"./useTitles.54f46820.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import"./fast_nav.40db65c6.js";const L={setup(){A("\u641C\u7D22\u533B\u9662")},name:"searchHospital",components:{Header:F},props:{},data(){return{value:"",list:[],hispital:[],hot:[],noData:!1,showResult:!1}},computed:_({},T(["uId","axiosAddress"])),watch:{},mounted(){this.getHispital(),this.gerHot()},methods:w(_({searchFocus(){this.showResult=!1},hideHot(){(this.list.length!=0||this.noData==!0)&&(this.showResult=!0)}},E(["setMid"])),{onSearch(t){this.getSearchresult(t),this.showResult=!0},onCancel(){this.$router.push({path:"/into_hospital"})},search(t){this.showResult=!0;let e=t.title;this.value=t.title,this.getSearchresult(e)},getSearchresult(t){this.noData=!1,this.$axios.fetchPost("Mobile/Entrance/lists",{keyword:t,location:this.axiosAddress,uId:this.uId,page_size:200}).then(e=>{e.data.code==0&&(this.list=e.data.data,this.getHispital(),e.data.data.length==0&&(this.noData=!0))})},getHispital(){this.$axios.fetchPost("Mobile/Entrance/getHistory",{uId:this.uId}).then(t=>{t.data.code==0&&(this.hispital=t.data.data)})},gerHot(){this.$axios.fetchPost("Mobile/Entrance/getHotwords").then(t=>{t.data.code==0&&(this.hot=t.data.data)})},goToHospital(t){this.setMid(t),setTimeout(()=>{this.$router.push({path:"/hospital"})},100)},clearHispital(){this.$axios.fetchPost("/Mobile/Entrance/clearRecord",{uId:this.uId}).then(t=>{t.data.code==0&&(this.$toast(t.data.message),this.getHispital())})}})},y=t=>(N("data-v-b72189ae"),t=t(),P(),t),U={class:"search_hospital-container"},q={action:"/"},G={class:"hot",style:{"padding-left":"12px"}},J=y(()=>o("div",{class:"title"},"\u70ED\u641C\u8BCD",-1)),K={class:"hot-ul"},O=["onClick"],Q={key:0,class:"hot"},W=y(()=>o("div",{class:"title",style:{"margin-bottom":"5px"}},"\u5386\u53F2\u641C\u7D22",-1)),X={class:"history-ul"},Y=["onClick"],Z={class:"result-box"},$={class:"title"},tt=["onClick"],et={class:"right"},st={class:"name"},ot={class:"knid"};function at(t,e,i,it,a,l){const x=d("Header"),C=d("van-search"),S=d("van-image"),I=d("van-empty");return n(),c("div",U,[p(x,{indexHeader:!1}),o("form",q,[p(C,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),"show-action":"",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:l.onSearch,onCancel:l.onCancel,onFocus:l.searchFocus},null,8,["modelValue","onSearch","onCancel","onFocus"])]),o("div",{class:"wrap",onClick:e[2]||(e[2]=(...s)=>l.hideHot&&l.hideHot(...s))},[h(o("div",G,[J,o("ul",K,[(n(!0),c(v,null,m(a.hot,s=>(n(),c("li",{key:s.title,onClick:f=>l.goToHospital(s.mid)},u(s.title),9,O))),128))])],512),[[r,!a.showResult]]),a.hispital.length!=0?h((n(),c("div",Q,[W,o("ul",X,[(n(!0),c(v,null,m(a.hispital,s=>(n(),c("li",{key:s.title,onClick:f=>l.search(s)},u(s.title),9,Y))),128))]),o("div",{class:"clear",onClick:e[1]||(e[1]=s=>l.clearHispital())},"\u6E05\u7A7A\u5386\u53F2")],512)),[[r,!a.showResult]]):g("v-if",!0),h(o("div",Z,[h(o("div",$,"\u641C\u7D22\u7ED3\u679C",512),[[r,a.list.length!=0]]),o("ul",null,[(n(!0),c(v,null,m(a.list,s=>(n(),c("li",{key:s.mid,onClick:f=>l.goToHospital(s.mid)},[p(S,{class:"img",src:s.logo,fit:"cover"},null,8,["src"]),o("div",et,[o("div",st,[z(u(s.title)+" ",1),h(o("span",null,"\u5B9E\u4F53\u5E97",512),[[r,!1]]),g(' <span v-show="item.isstore == 1">\u5B9E\u4F53\u5E97</span> ')]),o("div",ot,"\u79D1\u5BA4\uFF1A"+u(s.zuowu),1)])],8,tt))),128))])],512),[[r,a.showResult]]),a.noData?h((n(),B(I,{key:1,image:"error",description:"\u672A\u641C\u7D22\u5230\u7B26\u5408\u6761\u4EF6\u7684\u5185\u5BB9"},null,512)),[[r,a.showResult]]):g("v-if",!0)])])}var ut=j(L,[["render",at],["__scopeId","data-v-b72189ae"]]);export{ut as default};
