import{p as b,d as w,a as A,u as R,G as I,r as n,c as L,e as f,h as p,j as l,k as s,g as N,U as h,F as P,i as S,t as m,P as E,a2 as U}from"./index.a3582b47.js";import{H}from"./header.1705d6a2.js";import{u as M}from"./useTitles.0514a601.js";import{_ as j,f as D}from"./rate_popup.d8d29d6f.js";import"./fast_nav.a53c4cb6.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./index.40ed97f4.js";function T(u){return b("Mobile/News/getComplaintLists",u)}function z({uId:u,star:i,content:r}){return b("Mobile/News/submitComplaint",{uId:u,star:i,content:r})}const G={class:"container"},$={class:"ul"},q={class:"time f18"},J={class:"rate"},K={class:"f18"},O={class:"text f20"},ae=w({setup(u){const i=A(),r=R(),_=I(()=>i.state.uId),v=n(1);M("\u6295\u8BC9\u4E0E\u8BC4\u4EF7");const g=n(null);function x(){var e;(e=g.value)==null||e.open()}const F=e=>{const{roteMessage:o,roteValue:t}=e;y({roteMessage:o,roteValue:t})};async function y({roteMessage:e,roteValue:o}){const t=await z({uId:_.value,star:o,content:e});t!=null&&t.code?h(t.message):(h("\u8BC4\u4EF7\u6210\u529F"),r.go(0))}const c=n([]),d=n(!1),C=n(!1);function B(){V()}async function V(){const e=await T({uId:_.value,page:v.value,pagesize:10});v.value+=1,c.value=c.value.concat(e),d.value=!1,(e==null?void 0:e.code)===201&&(C.value=!0)}return(e,o)=>{const t=L("van-list");return f(),p("div",G,[l(H,{indexHeader:!1}),s("ul",$,[l(t,{loading:d.value,"onUpdate:loading":o[0]||(o[0]=a=>d.value=a),finished:C.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:B},{default:N(()=>[(f(!0),p(P,null,S(c.value,a=>(f(),p("li",{key:a.id},[s("div",q,m(a.add_time),1),s("div",J,[l(E(U),{modelValue:a.star,"onUpdate:modelValue":k=>a.star=k,readonly:"",icon:"star","void-icon":"star-o"},null,8,["modelValue","onUpdate:modelValue"]),s("span",K,m(E(D)(a.star)),1)]),s("div",O,m(a.content),1)]))),128))]),_:1},8,["loading","finished"])]),s("div",{class:"btn-box"},[s("div",{class:"btn f22",onClick:x},"\u6211\u8981\u8BC4\u4EF7")]),l(j,{author:"\u4E3A\u5F04\u670D\u52A1\u5E73\u53F0",ref_key:"ratePopupRef",ref:g,onEmitSub:F},null,512)])}}});export{ae as default};
