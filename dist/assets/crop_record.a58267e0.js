var P=Object.defineProperty,$=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(e,t,i)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,p=(e,t)=>{for(var i in t||(t={}))q.call(t,i)&&v(e,i,t[i]);if(h)for(var i of h(t))B.call(t,i)&&v(e,i,t[i]);return e},f=(e,t)=>$(e,S(t));import{c as d,e as c,h as l,k as s,t as g,F as w,i as k,f as b,v as x,j as m,x as C,y as D,z as N,m as T,I as V,C as I,D as y,g as G}from"./index.a3582b47.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";const j={name:"fram_item",components:{},props:{item:{type:Object,default:function(){return{}}}},data(){return{}},computed:{},watch:{},mounted(){},unmounted(){},methods:{showPriviewImg(e,t){let i={imgList:e,index:t};this.$emit("priview",i)},deteleFramHistory(e){this.$dialog.confirm({message:"\u786E\u5B9A\u5220\u9664"}).then(()=>{this.detetleHistory(e)}).catch(()=>{})},detetleHistory(e){this.$axios.fetchGet("/Mobile/User/delfarmerdata",{Id:e}).then(t=>{t.data.code==0&&this.$emit("deteleHistory",e)})},edit(e){this.$router.push({path:"/base_edit",query:{id:e}})},detail(e){this.$router.push({path:"/base_edit",query:{id:e}})}}},M=e=>(C("data-v-df852c76"),e=e(),D(),e),U={class:"item van-hairline--bottom"},z={class:"text"},E={class:"edit-bar"},O=M(()=>s("div",{class:"edit-icon"},null,-1)),A=N(" \u66F4\u6539 "),J=[O,A];function K(e,t,i,F,n,o){const u=d("van-image"),_=d("van-icon");return c(),l("div",U,[s("div",{class:"left-time",onClick:t[0]||(t[0]=r=>o.detail(i.item.id))},g(i.item.adddate),1),s("div",z,[s("div",{class:"p",onClick:t[1]||(t[1]=r=>o.detail(i.item.id))},g(i.item.content),1),(c(!0),l(w,null,k(i.item.thumb_urls,(r,a)=>(c(),b(u,{class:"img",key:a,fit:"cover",src:r,onClick:oe=>o.showPriviewImg(i.item.thumb_urls,a)},null,8,["src","onClick"]))),128)),s("div",E,[s("div",{class:"left",onClick:t[2]||(t[2]=r=>o.edit(i.item.id))},J),x("v-if",!0),s("div",{class:"medicine-icon",onClick:t[4]||(t[4]=r=>o.detail(i.item.id))},[m(_,{name:"arrow",class:"arrow"})])])])])}var Q=H(j,[["render",K],["__scopeId","data-v-df852c76"]]);const R={name:"crop_record",components:{FramItem:Q},props:{},data(){return{list:[],noData:!1,page:0,loading:!1,finished:!1}},computed:f(p({},T(["uId"])),{gId(){return this.$route.query.gId},pId(){return this.$route.query.pId}}),watch:{},mounted(){this.getHistoryList()},unmounted(){},methods:{onLoad(){this.getHistoryList()},goLook(){this.$router.replace({path:"/into_hospital"})},getHistoryList(){this.id=this.$route.query.id,this.page++,this.loading=!0,this.$axios.fetchGet("/Mobile/Gbase/getgbaserecordlist",{uId:this.uId,page:this.page,pId:this.pId}).then(e=>{e.data.code==0&&(this.list=this.list.concat(e.data.data),this.loading=!1),e.data.code==201&&(this.page==1?this.noData=!0:this.finished=!0)})},imagePriview(e){V({images:e.imgList,startPosition:e.index,closeable:!0})},updateDeteleHistory(e){this.list=this.list.filter(t=>t.id!=e)},goBack(){this.$router.go(-1)},goToIssueFram(){this.$router.push({path:"/base_edit"})}}},L=e=>(C("data-v-ef254e0a"),e=e(),D(),e),W={class:"crop_record-container"},X={class:"farm-record-content"},Y={class:"bottom-bar"},Z=L(()=>s("span",null,"\u53D1\u5E03\u519C\u4E8B",-1)),ee={class:"no-take-wrap"},te=L(()=>s("p",null,"\u6682\u65E0\u8BB0\u5F55",-1)),ie=[te];function se(e,t,i,F,n,o){d("router-link");const u=d("FramItem"),_=d("van-list"),r=d("van-icon");return c(),l("div",W,[x("v-if",!0),s("div",X,[I(m(_,{loading:n.loading,"onUpdate:loading":t[0]||(t[0]=a=>n.loading=a),finished:n.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:o.onLoad},{default:G(()=>[(c(!0),l(w,null,k(n.list,a=>(c(),b(u,{key:a.id,item:a,onPriview:o.imagePriview,onDeteleHistory:o.updateDeteleHistory},null,8,["item","onPriview","onDeteleHistory"]))),128))]),_:1},8,["loading","finished","onLoad"]),[[y,!n.noData]]),s("div",Y,[s("div",{class:"issue-btn1",onClick:t[1]||(t[1]=(...a)=>o.goToIssueFram&&o.goToIssueFram(...a))},[m(r,{name:"plus",class:"issue-icon"}),Z])])]),I(s("div",ee,ie,512),[[y,n.noData]])])}var de=H(R,[["render",se],["__scopeId","data-v-ef254e0a"]]);export{de as default};
