{"version":3,"sources":["webpack:///./src/views/base_center/crop_management/crop_management.vue?6db0","webpack:///./src/views/base_center/crop_management/progress_item.vue?540f","webpack:///./src/views/base_center/crop_management/period.vue?e15f","webpack:///./src/views/base_center/crop_management/crop_management.vue","webpack:///./src/views/base_center/crop_management/period.vue","webpack:///./src/views/base_center/crop_management/progress_item.vue","webpack:///./src/views/base_center/crop_management/progress_item.vue?9bb8","webpack:///./src/views/base_center/crop_management/period.vue?27e4","webpack:///./src/views/base_center/crop_management/crop_management.vue?b152"],"names":["class","ref","to","replace","navProgressList","it","index","key","classname","clickProgress","item","offset-top","stickyChange","setItemRef","active1","clickHandle","name","isFixed","management","setPeriods","clasname","id","period","percent","lists","isdeal","detail","issue","show","message","show-confirm-button","show-cancel-button","confirm-button-text","cancel-button-text","confirmDialog","cancelDialog","size","percentage","color","show-pivot","stroke-width","components","props","type","Object","default","data","computed","watch","mounted","unmounted","methods","__exports__","ProgressItem","activeItem","this","confirmIssue","uId","$router","push","path","query","classId","editCase","iswrite","rid","classid","fetchPost","then","res","code","window","location","reload","$toast","Period","w","refItem","periods","active","topArr","pId","$route","arr","forEach","option","$nextTick","offsetTop","getmanagementData","addEventListener","scrollHander","removeEventListener","el","obj","top","scrollTo","behavior","setTimeout","aa","document","documentElement","scrollTop","reverse","i","length","getNavWidth","alert","w1","offsetWidth","$refs","title","style","width","render"],"mappings":"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","file":"js/cropManagement.8069bc6a.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./crop_management.vue?vue&type=style&index=0&id=cb2c8348&lang=stylus&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./progress_item.vue?vue&type=style&index=0&id=2f851b32&lang=stylus&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./period.vue?vue&type=style&index=0&id=1eeb53bc&lang=stylus&scoped=true\"","<template>\n  <div class=\"crop_management-container\">\n    <div class=\"nav-bar van-hairline--bottom\" ref=\"h1\">\n      <router-link\n        class=\"nav\"\n        :to=\"{\n          path: '/cropManagement',\n          query: { pId: this.$route.query.pId, gId: this.$route.query.gId }\n        }\"\n        replace\n      >\n        农事管理\n      </router-link>\n      <router-link\n        class=\"nav\"\n        :to=\"{\n          path: '/cropRecord',\n          query: { pId: this.$route.query.pId, gId: this.$route.query.gId }\n        }\"\n        replace\n        >农事记录</router-link\n      >\n    </div>\n    <div class=\"progress-box van-hairline--bottom\" ref=\"h2\">\n      <div\n        v-for=\"(it, index) in navProgressList\"\n        :key=\"it.classname\"\n        @click=\"clickProgress(index)\"\n      >\n        <ProgressItem :item=\"it\"></ProgressItem>\n      </div>\n    </div>\n    <div class=\"period-box\">\n      <van-sticky :offset-top=\"40\" @scroll=\"stickyChange\">\n        <div class=\"period-title-bar\">\n          <div class=\"title-content\" ref=\"title\">\n            <div\n              v-for=\"(item, index) in navProgressList\"\n              :key=\"item.classname\"\n              :ref=\"setItemRef\"\n              class=\"item-wrap\"\n              :class=\"{ active: index == active1 }\"\n              @click=\"clickHandle(item, index)\"\n            >\n              <div class=\"item\">\n                {{ item.classname }}\n              </div>\n              <van-icon name=\"arrow\" class=\"arrow\" />\n            </div>\n          </div>\n        </div>\n      </van-sticky>\n      <div :class=\"{ paddingTop: isFixed }\">\n        <div\n          :ref=\"setPeriods\"\n          v-for=\"item in management\"\n          :key=\"item.clasname\"\n          class=\"periods\"\n        >\n          <div :ref=\"item.id\">\n            <Period :period=\"item\"></Period>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Period from \"./period.vue\";\nimport ProgressItem from \"./progress_item.vue\";\nimport axios from \"@/http\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"crop_management\",\n  components: { Period, ProgressItem },\n  props: {},\n  data() {\n    return {\n      w: 10,\n      refItem: [],\n      periods: [],\n      management: [],\n      active1: 0,\n      active: 0,\n      isFixed: false,\n      topArr: [] //各个dom的offsetTop\n    };\n  },\n  computed: {\n    ...mapState([\"uId\"]),\n    pId() {\n      // 农事管理的pId\n      return this.$route.query.pId;\n    },\n    navProgressList() {\n      // 头部的各时期进度条\n      let arr = [];\n      this.management.forEach((item, index) => {\n        if (item.classname) {\n          arr.push({\n            classname: item.classname,\n            percent: item.percent,\n            option: this.topArr[index],\n            id: item.id\n          });\n        }\n      });\n      return arr;\n    }\n  },\n  watch: {\n    management() {\n      this.$nextTick(() => {\n        this.periods.forEach(item => {\n          this.topArr.push(item.offsetTop - 100);\n        });\n      });\n    }\n  },\n  mounted() {\n    this.getmanagementData();\n    window.addEventListener(\"scroll\", this.scrollHander, false);\n  },\n  unmounted() {\n    window.removeEventListener(\"scroll\", this.scrollHander, false);\n  },\n  methods: {\n    setPeriods(el) {\n      this.periods.push(el);\n    },\n    setItemRef(el) {\n      this.refItem.push(el);\n    },\n    clickProgress(index) {\n      this.clickHandle(1, index);\n    },\n    stickyChange(obj) {\n      this.isFixed = obj.isFixed;\n    },\n    clickHandle(top, index) {\n      this.$nextTick(() => {\n        this.top = this.periods[index].offsetTop;\n        window.scrollTo({\n          top: this.top - 70,\n          behavior: \"smooth\"\n        });\n        setTimeout(() => {\n          this.active1 = index;\n        }, 201);\n      });\n    },\n    scrollHander() {\n      const aa = document.documentElement.scrollTop;\n      setTimeout(() => {\n        const arr = [...this.navProgressList].reverse();\n        for (var i = 0; i < arr.length; i++) {\n          let option = arr[i].option;\n          if (option <= aa) {\n            this.active1 = this.active = arr.length - i - 1;\n            break;\n          }\n        }\n        this.active1 = this.active;\n      }, 200);\n    },\n    getmanagementData() {\n      // 获取农事管理数据\n      axios\n        .fetchPost(\"/Mobile/Gbase/getBaseTasklists\", {\n          pId: this.pId,\n          uId: this.uId\n        })\n        .then(res => {\n          let data = res.data;\n          if (data.code == 0) {\n            this.management = data.data;\n            this.getNavWidth();\n          } else {\n            alert(data.message);\n          }\n        });\n    },\n    getNavWidth() {\n      // 导航左右滑动 初级效果\n      this.$nextTick(() => {\n        this.refItem.forEach(it => {\n          let w1 = it.offsetWidth;\n          this.w += w1;\n        });\n        this.$refs.title.style.width = this.w + \"px\";\n      });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.van-progress\n  background #D5E3FD\n.crop_management-container\n  .nav-bar\n    height 50px\n    line-height 50px\n    display flex\n    text-align center\n    .nav\n      flex 1\n      color #666666\n      font-size 15px\n      background #fff\n      &.router-link-active\n        color #155BBB\n        position relative\n        &::after\n          content ''\n          position absolute\n          left 50%\n          bottom 0px\n          width 30px\n          height 3px\n          background #155BBB\n          border-radius: 3px;\n          margin-left -15px\n  .progress-box\n    background #fff\n    padding 10px 0\n    .item\n      display flex\n      align-items center\n      height 31px\n      .left\n        width 100px\n        font-size 14px\n        color #333\n        padding 0 10px 0 10px\n      .mid\n        flex 1\n        min-width 0\n      .right\n        width 60px\n        text-align left\n        padding-left 15px\n        color #155BBB\n        font-size 14px\n  .period-box\n    background #fff\n    padding-top 20px\n    .period-title-bar\n      width 100%\n      overflow auto\n      padding 5px 12px\n      background #fff\n      .title-content\n        .item-wrap\n          display inline-block\n          padding-right 12px\n          .item\n            padding 8px 13px\n            background: #F1FAFE;\n            border-radius: 8px;\n            color #155BBB\n            font-size 14px\n            display inline-block\n          .arrow\n            display inline-block\n            padding 0 9px\n            vertical-align middle\n            color #D5E3FD\n            font-size 11px\n          &:last-child\n            .arrow\n              display none\n          &.active\n            .item\n              background #155BBB\n              color #FFFFFF\n// .paddingTop\n//   padding-top 87px\n</style>\n","<template>\n  <div class=\"period-content van-hairline--bottom\">\n    <div class=\"progress\">\n      <ProgressItem\n        :item=\"{ classname: period.classname, percent: period.percent }\"\n      >\n        <!-- <span class=\"p1\">{{ period.classname }}</span> -->\n      </ProgressItem>\n    </div>\n    <div class=\"item\" v-for=\"item in period.lists\" :key=\"item.id\">\n      <div class=\"left\">{{ item.classname }}</div>\n      <div class=\"mid\">\n        <div class=\"finished\" v-if=\"item.isdeal === 1\">\n          <van-icon name=\"clock-o\" class=\"clock\" />\n          <span>已完成</span>\n        </div>\n        <div class=\"finish\" v-else>\n          <van-icon name=\"passed\" class=\"passsed\" /><span>待完成</span>\n        </div>\n      </div>\n      <div class=\"right\">\n        <div class=\"btn btn2\" v-if=\"item.isdeal === 1\" @click=\"detail(item)\">\n          详情\n        </div>\n        <div class=\"btn btn1\" @click=\"issue(item)\" v-else>发布</div>\n      </div>\n    </div>\n    <van-dialog\n      v-model:show=\"show\"\n      message=\"该农事管理内容为选填，可点击确认直接完成\"\n      show-confirm-button\n      show-cancel-button\n      confirm-button-text=\"直接完成\"\n      cancel-button-text=\"去发布\"\n      @confirm=\"confirmDialog\"\n      @cancel=\"cancelDialog\"\n    >\n      <div class=\"van-dialog__message\">\n        该农事管理内容为选填，可点击确认直接完成\n      </div>\n      <div class=\"close\" @click.stop @click=\"show = false\">\n        <van-icon name=\"close\" size=\"25\" />\n      </div>\n    </van-dialog>\n  </div>\n</template>\n<script>\nimport ProgressItem from \"./progress_item.vue\";\nimport axios from \"@/http\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"period\",\n  components: { ProgressItem },\n  props: {\n    period: {\n      type: Object,\n      default: function() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return { show: false, activeItem: \"\" };\n  },\n  computed: {\n    ...mapState([\"uId\"])\n  },\n  watch: {},\n  mounted() {},\n  unmounted() {},\n  methods: {\n    confirmDialog() {\n      this.confirmIssue(this.activeItem.id, this.uId);\n    },\n    cancelDialog() {\n      this.$router.push({\n        path: \"/base_edit\",\n        query: { classId: this.activeItem.id, editCase: \"no\" }\n      });\n    },\n    issue(item) {\n      let iswrite = item.iswrite;\n      this.activeItem = item;\n      if (iswrite == 0) {\n        // 弹窗\n        this.show = true;\n        //确定农事记录\n        // this.$dialog\n        //   .confirm({\n        //     message: \"该农事管理内容为选填，可点击确认直接完成\",\n        //     confirmButtonText: \"直接完成\",\n        //     cancelButtonText: \"去发布\"\n        //   })\n        //   .then(() => {\n        //     // on close\n        //     this.confirmIssue(item.id, this.uId);\n        //   })\n        //   .catch(() => {\n        //     this.$router.push({\n        //       path: \"/base_edit\",\n        //       query: { classId: item.id, editCase: \"no\" }\n        //     });\n        //   });\n      } else {\n        // 编辑农事发布\n        this.$router.push({\n          path: \"/base_edit\",\n          query: { classId: item.id, editCase: \"no\" }\n        });\n      }\n    },\n    detail(item) {\n      this.$router.push({\n        path: \"/base_fram_detail\",\n        query: { id: item.rid }\n      });\n    },\n    confirmIssue(classid, uId) {\n      axios\n        .fetchPost(\"/Mobile/Gbase/subFarmerDatacommit\", { classid, uId })\n        .then(res => {\n          let data = res.data;\n          if (data.code === 0) {\n            window.location.reload();\n          }\n          this.$toast(data.message);\n        });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.period-content\n  padding-top 20px\n  .progress\n    margin-bottom 20px\n    .p1\n      color #999\n      margin-right 5px\n  .item\n    display flex\n    padding 0 12px\n    align-items flex-start\n    padding-bottom 20px\n    .left\n      width 150px\n      min-width 0\n      font-size 17px\n      color #333333\n      margin-right 20px\n    .mid\n      flex 1\n      .finished\n        font-size 14px\n        color #999999\n        .clock\n          margin-right 6px\n          font-size 18px\n          margin-top -2px\n          position relative\n          top 4px\n      .finish\n        font-size 14px\n        color #FF6600\n        .passsed\n          margin-right 6px\n          font-size 18px\n          margin-top -2px\n          position relative\n          top 4px\n    .right\n      width auto\n      height 25px\n      .btn\n        width: 55px;\n        height: 25px;\n        text-align center\n        border-radius 25px\n        font-size 14px\n        line-height 25px\n        &.btn2\n          background: #F1FAFE;\n          border: 1px solid #155BBB;\n          color #155BBB\n        &.btn1\n          border 1px solid #FF6600\n          background #FF6600\n          color #fff\n.close\n  position absolute\n  top 2px\n  right 2px\n  color #999\n  /deep/.progress-item\n    /deep/.right\n      width auto !important\n</style>\n","<template>\n  <div class=\"progress-item\">\n    <div class=\"left\">{{ item.classname }}</div>\n    <div class=\"mid\">\n      <van-progress\n        :percentage=\"item.percent\"\n        color=\"#155BBB\"\n        :show-pivot=\"false\"\n        stroke-width=\"8\"\n      />\n    </div>\n    <div class=\"right\"><slot></slot>{{ item.percent }}%</div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"progress_item\",\n  components: {},\n  props: {\n    item: {\n      type: Object,\n      default: function() {\n        return { classname: \"\", percent: 0, id: \"\" };\n      }\n    }\n  },\n  data() {\n    return {};\n  },\n  computed: {},\n  watch: {},\n  mounted() {},\n  unmounted() {},\n  methods: {}\n};\n</script>\n<style lang=\"stylus\" scoped>\n.progress-item\n  display flex\n  align-items center\n  min-height 21px\n  margin-bottom 10px\n  .left\n    width 150px\n    font-size 14px\n    color #333\n    padding 0 10px 0 10px\n  .mid\n    flex 1\n    min-width 0\n  .right\n    width 70px\n    text-align center\n    padding-left 15px\n    color #155BBB\n    font-size 14px\n    padding-right 12px\n</style>\n","import { render } from \"./progress_item.vue?vue&type=template&id=2f851b32&scoped=true\"\nimport script from \"./progress_item.vue?vue&type=script&lang=js\"\nexport * from \"./progress_item.vue?vue&type=script&lang=js\"\n\nimport \"./progress_item.vue?vue&type=style&index=0&id=2f851b32&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2f851b32\"]])\n\nexport default __exports__","import { render } from \"./period.vue?vue&type=template&id=1eeb53bc&scoped=true\"\nimport script from \"./period.vue?vue&type=script&lang=js\"\nexport * from \"./period.vue?vue&type=script&lang=js\"\n\nimport \"./period.vue?vue&type=style&index=0&id=1eeb53bc&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1eeb53bc\"]])\n\nexport default __exports__","import { render } from \"./crop_management.vue?vue&type=template&id=cb2c8348&scoped=true\"\nimport script from \"./crop_management.vue?vue&type=script&lang=js\"\nexport * from \"./crop_management.vue?vue&type=script&lang=js\"\n\nimport \"./crop_management.vue?vue&type=style&index=0&id=cb2c8348&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cb2c8348\"]])\n\nexport default __exports__"],"sourceRoot":""}