(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sign"],{"0c0b":function(e,t,n){},"3e4c":function(e,t,n){},"6be2":function(e,t,n){"use strict";n.r(t);var c=n("7a23");Object(c["K"])("data-v-6a021172");var a={class:"sign-container"},s=Object(c["k"])("div",{class:"title"},"快速注册",-1),o={style:{"margin-top":"30px","margin-left":"16px"}},i={style:{margin:"16px"}},r=Object(c["m"])(" 注册 ");function u(e,t,n,u,l,d){var b=Object(c["P"])("Header"),h=Object(c["P"])("van-field"),f=Object(c["P"])("van-count-down"),p=Object(c["P"])("Deal"),m=Object(c["P"])("van-button"),j=Object(c["P"])("van-form");return Object(c["H"])(),Object(c["j"])("div",a,[Object(c["n"])(b,{indexHeader:!1}),s,Object(c["n"])(j,{onSubmit:d.onSubmit2,class:"from"},{default:Object(c["Z"])((function(){return[Object(c["n"])(h,{modelValue:l.username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.username=e}),name:"phone",placeholder:"请输入手机号",rules:[{required:!0,message:"手机号不能为空"},{validator:d.validatorPhone,message:"手机号码格式不正确"}]},null,8,["modelValue","rules"]),Object(c["n"])(h,{modelValue:l.sms,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.sms=e}),center:"",clearable:"",name:"code",placeholder:"请输入4位验证码",maxlength:"4",rules:[{required:!0,message:"验证码不能为空"}]},{button:Object(c["Z"])((function(){return[l.showBtn?(Object(c["H"])(),Object(c["j"])("div",{key:0,class:"btn",onClick:t[1]||(t[1]=function(){return d.start&&d.start.apply(d,arguments)})},"发送验证码")):Object(c["i"])("",!0),Object(c["ab"])(Object(c["k"])("div",null,[Object(c["n"])(f,{ref:"countDown",millisecond:"",time:6e4,"auto-start":!1,format:"ss秒后重试",onFinish:d.finish},null,8,["onFinish"])],512),[[c["X"],!l.showBtn]])]})),_:1},8,["modelValue"]),Object(c["n"])(h,{modelValue:l.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.password=e}),type:"password",name:"pwd",placeholder:"请输入密码（6-20位）",minlength:"6",maxlength:"20",rules:[{required:!0,message:"密码不能为空"},{validator:d.passwordLengValidator,message:l.passwordLengthMessage}]},null,8,["modelValue","rules"]),Object(c["k"])("div",o,[Object(c["n"])(p,{checked:l.checked,"onUpdate:checked":t[4]||(t[4]=function(e){return l.checked=e})},null,8,["checked"])]),Object(c["k"])("div",i,[Object(c["n"])(m,{round:"",block:"",type:"info","native-type":"submit",class:Object(c["y"])(["sub",{success:l.checked&&l.password&&l.username&&l.sms}])},{default:Object(c["Z"])((function(){return[r]})),_:1},8,["class"])])]})),_:1},8,["onSubmit"]),Object(c["k"])("div",{class:"go-login",onClick:t[5]||(t[5]=function(){return d.goLogin&&d.goLogin.apply(d,arguments)})},"已有益农宝账号，去登录")])}Object(c["I"])();var l=n("5530"),d=n("f392"),b=n("5502"),h=n("213a"),f=n("7738"),p={class:"deal-box"},m=Object(c["m"])(" 我已阅读并同意"),j=Object(c["m"])("与"),O=["innerHTML"],v=["innerHTML"];function k(e,t,n,a,s,o){var i=Object(c["P"])("van-checkbox"),r=Object(c["P"])("van-icon"),u=Object(c["P"])("van-overlay");return Object(c["H"])(),Object(c["j"])(c["b"],null,[Object(c["k"])("div",p,[Object(c["n"])(i,{modelValue:a.checkbox,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.checkbox=e}),"icon-size":"20px",class:"checkbox","checked-color":"#338aff"},null,8,["modelValue"]),m,Object(c["k"])("span",{onClick:t[1]||(t[1]=function(e){return a.show=!0})},"用户协议"),j,Object(c["k"])("span",{onClick:t[2]||(t[2]=function(e){return a.privacyShow=!0})},"隐私政策")]),Object(c["n"])(u,{show:a.show,onClick:t[5]||(t[5]=function(e){return a.show=!1}),"z-index":"20","lock-scroll":!1},{default:Object(c["Z"])((function(){return[Object(c["k"])("div",{class:"wrapper",onClick:t[4]||(t[4]=Object(c["bb"])((function(){}),["stop"]))},[Object(c["k"])("div",{class:"close-btn",onClick:t[3]||(t[3]=function(){return a.closeDeal&&a.closeDeal.apply(a,arguments)})},[Object(c["n"])(r,{name:"cross"})]),Object(c["k"])("h3",null,Object(c["T"])(s.privacyData.title),1),Object(c["k"])("p",{class:"text",innerHTML:s.privacyData.content},null,8,O)])]})),_:1},8,["show"]),Object(c["n"])(u,{show:a.privacyShow,onClick:t[8]||(t[8]=function(e){return a.privacyShow=!1}),"z-index":"20","lock-scroll":!1},{default:Object(c["Z"])((function(){return[Object(c["k"])("div",{class:"wrapper",onClick:t[7]||(t[7]=Object(c["bb"])((function(){}),["stop"]))},[Object(c["k"])("div",{class:"close-btn",onClick:t[6]||(t[6]=function(){return a.closePrivacy&&a.closePrivacy.apply(a,arguments)})},[Object(c["n"])(r,{name:"cross"})]),Object(c["k"])("h3",null,Object(c["T"])(s.dealData.title),1),Object(c["k"])("p",{class:"text",innerHTML:s.dealData.content},null,8,v)])]})),_:1},8,["show"])],64)}var g={props:{checked:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,a=Object(c["M"])(!1),s=Object(c["M"])(!1),o=Object(c["M"])(!1);function i(){s.value=!1}function r(){o.value=!1}return Object(c["Y"])(a,(function(e){n("update:checked",e)})),{checkbox:a,show:s,privacyShow:o,closeDeal:i,closePrivacy:r}},data:function(){return{dealData:{},privacyData:{}}},created:function(){this.getUserAgreement(),this.getUserPrivacy()},methods:{getUserAgreement:function(){var e=this;this.$axios.fetchGet("/Mobile/User/user_agreement").then((function(t){0===t.data.code&&(e.dealData=t.data.data)}))},getUserPrivacy:function(){var e=this;this.$axios.fetchGet("/Mobile/User/service_agreement").then((function(t){0===t.data.code&&(e.privacyData=t.data.data)}))}}},w=(n("b954"),n("d959")),y=n.n(w);const x=y()(g,[["render",k]]);var P=x,M={name:"sign",components:{Header:d["a"],Deal:P},setup:function(){Object(h["c"])({title:"注册"})},props:{},data:function(){return{showBtn:!0,clickTrue:!1,username:"",sms:"",password:"",checked:!1,passwordLengthMessage:"密码长度不能少于6位"}},created:function(){},computed:{},watch:{},mounted:function(){},methods:Object(l["a"])(Object(l["a"])({},Object(b["b"])(["saveUserInfo"])),{},{passwordLengValidator:function(){return this.password.length<=5?(this.passwordLengthMessage="密码长度不能少于6位",!1):this.password.length>=21?(this.passwordLengthMessage="密码长度不能多于20位",!1):void 0},validatorPhone:function(e){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)?this.clickTrue=!0:this.clickTrue=!1,/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)},finish:function(){this.$refs.countDown.reset(),this.showBtn=!0,this.clickTrue=!0},onSubmit2:function(){this.checked?this.signFn(this.username,this.password,this.sms):this.$toast("必须先同意用户协议和隐私政策")},signFn:function(e,t,n){var c=this;this.$axios.fetchPost("Mobile/Member/register",{username:e,password:t,code:n}).then((function(e){var t=e.data;c.$toast(e.data.message),0==t.code&&(c.saveUserInfo(t.data),setTimeout((function(){c.$router.push({path:"/index"})}),500))}))},start:function(){this.clickTrue&&this.sendPhone()},sendPhone:function(){var e=this;this.$axios.fetchPost("Mobile/Member/ServerSmsCode",{mobile:this.username,action:"reg"}).then((function(t){0==t.data.code?(e.$toast(t.data.message),e.clickTrue=!1,e.showBtn=!1,setTimeout((function(){e.$refs.countDown.start()}),100)):e.$dialog.alert({message:t.data.message,confirmButtonText:"知道了",confirmButtonColor:"#338aff"}).then((function(){}))}))},goLogin:function(){Object(f["b"])()}})};n("f2ef");const D=y()(M,[["render",u],["__scopeId","data-v-6a021172"]]);t["default"]=D},b954:function(e,t,n){"use strict";n("3e4c")},f2ef:function(e,t,n){"use strict";n("0c0b")}}]);
//# sourceMappingURL=sign.47111165.js.map