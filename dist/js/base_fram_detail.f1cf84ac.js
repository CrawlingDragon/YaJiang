(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["base_fram_detail"],{1595:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23");Object(n["K"])("data-v-e31115a4");var i={class:"base_edit-container"},c={class:"edit-container"},s=Object(n["k"])("div",{class:"label"},"记录",-1),o={class:"box"},r=Object(n["k"])("div",{class:"title"},"用药信息",-1),u={class:"me-ul"},d={class:"mid"},l={class:"p1"},b={class:"p2"},m={class:"p2"},f=["onClick"],j={class:"box remark"},O=Object(n["k"])("div",{class:"title"},"评论",-1),h={class:"remark-ul"},v={class:"item"},g={class:"name"},p={class:"text"},k={class:"time"};function w(e,t,a,w,x,T){var C=Object(n["P"])("Header"),M=Object(n["P"])("van-field"),P=Object(n["P"])("van-picker"),I=Object(n["P"])("van-popup"),$=Object(n["P"])("van-calendar"),y=Object(n["P"])("van-icon"),D=Object(n["P"])("van-image"),H=Object(n["P"])("van-form");return Object(n["H"])(),Object(n["j"])("div",i,[Object(n["n"])(C,{indexHeader:!1}),Object(n["k"])("div",c,[Object(n["n"])(H,null,{default:Object(n["Z"])((function(){return[Object(n["n"])(M,{class:"case",readonly:"",name:"case",modelValue:x.caseValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.caseValue=e}),label:"方案",placeholder:"无"},null,8,["modelValue"]),Object(n["n"])(I,{show:x.showPicker,"onUpdate:show":t[2]||(t[2]=function(e){return x.showPicker=e}),position:"bottom"},{default:Object(n["Z"])((function(){return[Object(n["n"])(P,{ref:"casePick","show-toolbar":"",columns:x.caseColumns,onConfirm:T.onCaseConfirm,onCancel:t[1]||(t[1]=function(e){return x.showPicker=!1}),key:x.caseValue},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(n["k"])("div",null,[Object(n["n"])(M,{readonly:"",clickable:"",name:"datetime",modelValue:x.date,"onUpdate:modelValue":t[3]||(t[3]=function(e){return x.date=e}),label:"时间",placeholder:"无"},null,8,["modelValue"]),Object(n["n"])($,{show:x.show,"onUpdate:show":t[4]||(t[4]=function(e){return x.show=e}),type:"range",onConfirm:T.onTimeConfirm,color:"#155BBB","min-date":x.minDate,"max-date":x.maxDate},null,8,["show","onConfirm","min-date","max-date"]),Object(n["k"])("div",{class:Object(n["y"])(["record",{"record-more":x.ifHaveMoreText}])},[s,Object(n["k"])("div",{class:Object(n["y"])(["text",{more:x.showTextMore&&x.ifHaveMoreText}]),ref:"message"},Object(n["T"])(x.message),3),Object(n["ab"])(Object(n["k"])("div",{class:"open-more",onClick:t[5]||(t[5]=function(e){return x.showTextMore=!x.showTextMore})},[Object(n["m"])(Object(n["T"])(x.showTextMore?"展开更多":"收缩")+" ",1),Object(n["ab"])(Object(n["n"])(y,{name:"arrow-down"},null,512),[[n["X"],x.showTextMore]]),Object(n["ab"])(Object(n["n"])(y,{name:"arrow-up"},null,512),[[n["X"],!x.showTextMore]])],512),[[n["X"],x.ifHaveMoreText]])],2),Object(n["ab"])(Object(n["n"])(M,{label:"照片"},{input:Object(n["Z"])((function(){return[(Object(n["H"])(!0),Object(n["j"])(n["b"],null,Object(n["N"])(x.imgList,(function(e,t){return Object(n["H"])(),Object(n["h"])(D,{class:"upload-img",key:e,src:e,fit:"cover",onClick:function(e){return T.imagePriview(x.imgList,t)}},null,8,["src","onClick"])})),128))]})),_:1},512),[[n["X"],x.imgList.length>=1]])]),Object(n["i"])("",!0)]})),_:1}),Object(n["ab"])(Object(n["k"])("div",o,[r,Object(n["k"])("ul",u,[(Object(n["H"])(!0),Object(n["j"])(n["b"],null,Object(n["N"])(x.druginfo,(function(e){return Object(n["H"])(),Object(n["j"])("li",{key:e.name},[Object(n["n"])(D,{class:"img",src:e.pic,fit:"cover"},null,8,["src"]),Object(n["k"])("div",d,[Object(n["k"])("p",l,Object(n["T"])(e.name),1),Object(n["k"])("p",b,"规格："+Object(n["T"])(e.spec),1),Object(n["k"])("div",m,"用法用量说明:"+Object(n["T"])(e.quantity),1)]),Object(n["k"])("div",{class:"bug-btn",onClick:function(t){return T.goToBug(e.url)}},"购买",8,f)])})),128))])],512),[[n["X"],x.druginfo.length]]),Object(n["ab"])(Object(n["k"])("div",j,[O,Object(n["k"])("div",h,[Object(n["k"])("div",v,[Object(n["k"])("div",g,Object(n["T"])(x.resultinfo.expertname),1),Object(n["k"])("div",p,Object(n["T"])(x.resultinfo.result),1),Object(n["k"])("div",k,Object(n["T"])(x.resultinfo.addtime),1)])])],512),[[n["X"],""!=x.resultinfo]])])])}Object(n["I"])();var x=a("3835"),T=a("5530"),C=(a("a434"),a("99af"),a("a15b"),a("f392")),M=a("5502"),P=a("7c8d"),I=a.n(P),$=a("482f"),y={name:"base_edit",components:{Header:C["a"]},props:{},data:function(){return{eitdObj:"",caseValue:"",caseId:"",caseColumns:[],showPicker:!1,date:"",minDate:new Date(2010,1,1),maxDate:new Date(2030,1,1),show:!1,message:"",uploader:[],imgList:[],medicine:[1,2],haveMedicine:!1,detailObj:"",resultinfo:"",ifHaveMoreText:!1,showTextMore:!0,druginfo:[]}},computed:Object(T["a"])(Object(T["a"])({},Object(M["e"])(["mid","uId"])),{},{id:function(){return this.$route.query.id}}),watch:{message:function(e){var t=this;""!=e&&setTimeout((function(){var e=t.$refs.message.offsetHeight;e>=73&&(t.ifHaveMoreText=!0)}),100)}},mounted:function(){this.getCase(),this.$route.query.id&&this.getEditData()},unmounted:function(){},methods:{imagePriview:function(e,t){Object($["a"])({images:e,startPosition:t,closeable:!0})},afterRead:function(e,t){var a=this;new I.a(e.file,{quality:.4,success:function(e){var n=new FormData;n.append("urls[]",e,e.name),a.$axios.fetchPost("Mobile/Gbase/OssUploadFile",n).then((function(e){if(0==e.data.code)a.imgList.push(e.data.data);else{a.$toast(e.data.message);var n=t.index;a.uploader.splice(n,1)}}))}})},deleteItem:function(e,t){var a=t.index;return this.imgList.splice(a,1),!0},getEditData:function(){var e=this;this.$axios.fetchGet("Mobile/Gbase/getfarmerdata",{Id:this.id}).then((function(t){if(0==t.data.code){var a=t.data.data;e.detailObj=a,e.druginfo=a.druginfo,e.caseValue=a.point_name,e.resultinfo=a.resultinfo,e.date="".concat(a.starttime,"/").concat(a.endtime),e.message=a.content,e.imgList=a.thumb_urls}}))},onCaseConfirm:function(e){var t=this.$refs.casePick.getValues();""==t[2].pid?this.caseId=t[0].id+"_"+t[1].id:this.caseId=t[0].id+"_"+t[2].id,this.caseValue=e.join("-"),this.showPicker=!1},formatDate:function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},onTimeConfirm:function(e){var t=Object(x["a"])(e,2),a=t[0],n=t[1];this.show=!1,this.date="".concat(this.formatDate(a),"/").concat(this.formatDate(n))},issueFramData:function(){var e=this,t={},a="",n="";this.$route.query.id?(t={planer:this.caseId,Id:this.$route.query.id,starttoendtime:this.date,content:this.message,picurl:this.imgList.join(",")},a="修改成功",n="/Mobile/Gbase/subfarmerdata"):(t={planer:this.caseId,uId:this.uId,starttoendtime:this.date,content:this.message,picurl:this.imgList.join(",")},a="发布成功",n="/Mobile/Gbase/addfarmerdata"),this.$axios.fetchPost(n,t).then((function(t){0==t.data.code?(e.$toast.success(a),setTimeout((function(){e.$router.go(-1)}),500)):e.$toast.fail(t.data.message)}))},getCase:function(){var e=this;this.$axios.fetchGet("Mobile/Gbase/getProjectlist",{mId:this.mid,pId:16}).then((function(t){0==t.data.code&&(e.caseColumns=t.data.data)}))},closeMedicine:function(e){console.log("index :>> ",e)},addMedicine:function(){this.medicine.push(1)},goBack:function(){this.$router.go(-1)},goToBug:function(e){window.open(e,"_blank")}}},D=(a("e648"),a("d959")),H=a.n(D);const _=H()(y,[["render",w],["__scopeId","data-v-e31115a4"]]);t["default"]=_},2287:function(e,t,a){},e648:function(e,t,a){"use strict";a("2287")}}]);
//# sourceMappingURL=base_fram_detail.f1cf84ac.js.map