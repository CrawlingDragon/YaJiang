{"version":3,"sources":["webpack:///./src/views/ask_choose_crop/ask_choose_crop.vue?59c9","webpack:///./src/views/ask_choose_crop/ask_choose_crop.vue","webpack:///./src/views/ask_choose_crop/ask_choose_crop.vue?c849"],"names":["class","id","action","ref","value","onSearch","show-action","placeholder","onCancel","clearable","hispitalList","cropName","item","key","fid","choose","name","length","searchResultShow","index-list","letterList","style","barTop","list","index","letter","it","title","noResult","searchResult","data","computed","this","$route","query","crop","arr","forEach","el","push","crops","concat","watch","newVal","undefined","getCropList","mounted","methods","val","indexOf","$router","go","$emit","$axios","fetchPost","uId","then","res","code","historydata","$nextTick","computedBarTop","h","$refs","historyRef","getBoundingClientRect","height","__exports__","render"],"mappings":"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","file":"js/ask_choose_crop.a07e394f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ask_choose_crop.vue?vue&type=style&index=0&id=5f5dc818&lang=stylus&scoped=true\"","<template>\n  <div class=\"choose_crop-container\" id=\"wrap\">\n    <form action=\"/\" class=\"from\">\n      <van-search\n        v-model=\"value\"\n        show-action\n        placeholder=\"请输入作物名\"\n        @search=\"onSearch\"\n        @cancel=\"onCancel\"\n        clearable\n        @update:model-value=\"onSearch\"\n      />\n    </form>\n    <div class=\"history-box\" v-if=\"hispitalList\" ref=\"historyRef\">\n      <div class=\"title\">当前选择：{{ cropName }}</div>\n      <div class=\"history-ul\" v-show=\"hispitalList.length != 0\">\n        <div class=\"small-title\">最近选择/全部作物</div>\n        <li v-for=\"item in hispitalList\" :key=\"item.fid\" @click=\"choose(item)\">\n          {{ item.name }}\n        </li>\n      </div>\n    </div>\n    <van-index-bar\n      class=\"bar\"\n      :index-list=\"letterList\"\n      v-if=\"!searchResultShow\"\n      :style=\"{ top: barTop + 'px' }\"\n    >\n      <div v-for=\"item in list\" :key=\"item.id\">\n        <van-index-anchor :index=\"item.letter\" />\n        <van-cell\n          :title=\"it.name\"\n          v-for=\"it in item.index\"\n          :key=\"it.fid\"\n          @click=\"choose(it)\"\n        />\n      </div>\n    </van-index-bar>\n    <ul class=\"search_result-ul\" v-show=\"searchResultShow\">\n      <div class=\"noData\" v-show=\"noResult\">\n        抱歉没有该作物,可选择<span\n          class=\"other\"\n          @click=\"choose({ name: '其他', fid: 195 })\"\n          >其他</span\n        >\n      </div>\n      <li v-for=\"item in searchResult\" :key=\"item.fid\" @click=\"choose(item)\">\n        {{ item.name }}\n      </li>\n    </ul>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nexport default {\n  name: 'askChooseCrop',\n  data() {\n    return {\n      value: '',\n      list: [],\n      hispitalList: [],\n      searchResult: [],\n      searchResultShow: false,\n      noResult: false,\n      barTop: 64,\n    };\n  },\n  computed: {\n    cropName() {\n      return this.$route.query.crop;\n    },\n    ...mapState(['uId']),\n    letterList() {\n      let arr = [];\n      this.list.forEach((el) => {\n        arr.push(el.letter);\n      });\n      return arr;\n    },\n    crops() {\n      let arr = [];\n      this.list.forEach((el) => {\n        arr = arr.concat(el.index);\n      });\n      return arr;\n    },\n  },\n  watch: {\n    searchResult(newVal) {\n      if (newVal.length == 0) {\n        this.noResult = true;\n      } else {\n        this.noResult = false;\n      }\n    },\n    cropName(newVal) {\n      if (newVal == undefined) {\n        return;\n      }\n      this.getCropList();\n    },\n  },\n  mounted() {\n    this.getCropList();\n  },\n  methods: {\n    onSearch(val) {\n      this.searchResult = [];\n      this.crops.forEach((el) => {\n        if (el.name.indexOf(val) >= 0) {\n          this.searchResult.push(el);\n        }\n      });\n      this.searchResultShow = true;\n      if (val == '') {\n        this.searchResultShow = false;\n      }\n    },\n    choose(item) {\n      //搜索历史 选择作物\n      this.$router.go(-1);\n      this.$emit('getCrop', item);\n      this.searchResultShow = false;\n    },\n    onCancel() {\n      this.$router.go(-1);\n      this.searchResultShow = false;\n    },\n    getCropList() {\n      this.$axios\n        .fetchPost('Mobile/Mpublic/getCropIndexQuery', { uId: this.uId })\n        .then((res) => {\n          if (res.data.code == 0) {\n            if (res.data.historydata) {\n              this.hispitalList = res.data.historydata;\n            }\n            // this.hispitalList = [];\n            this.$nextTick(() => {\n              this.computedBarTop();\n              this.list = res.data.data;\n            });\n          }\n        });\n    },\n    computedBarTop() {\n      let h = this.$refs.historyRef.getBoundingClientRect().height;\n      // console.log(\"h\", h);\n      if (h > 0) {\n        this.barTop = h + 64;\n      } else {\n        this.barTop = 64;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"stylus\" scoped>\n.choose_crop-container\n  padding-top 54px\n  position relative\n  position fixed\n  background #fff\n  left 0\n  top 0\n  right 0\n  bottom 0\n  z-index 333333\n  overflow auto\n  background #EBEBEB\n  .content\n    height auto\n  .from\n    position fixed\n    top 0px\n    left 0\n    right 0\n    z-index 99999999999\n  .history-box\n    margin-top 10px\n    padding-bottom 15px\n    z-index 99999999999999\n    position relative\n    .title\n      height 40px\n      line-height 40px\n      color #333333\n      font-size 15px\n      padding-left 12px\n      background #fff\n      margin-bottom 10px\n    .history-ul\n      padding-left 12px\n      font-size 0\n\n      .small-title\n        font-size 12px\n        color #999999\n        line-height 12px\n        padding 15px 0\n      li\n        min-width 65px\n        padding 0 5px\n        height 25px\n        line-height 25px\n        color #333333\n        background #fff\n        font-size 15px\n        display inline-block\n        margin-right 15px\n        margin-bottom 10px\n        border-radius 8px\n        text-align center\n  .search_result-ul\n    position absolute\n    top 62px\n    left 0\n    right 0\n    bottom 0\n    background #EBEBEB\n    z-index 999999999999999\n    border-top 1px solid #e5e5e5\n    li\n      line-height 40px\n      border-bottom 1px solid #e5e5e5\n      background #fff\n      height 40px\n      color #333333\n      font-size 14px\n      padding 0 12px\n    .noData\n      height 300px\n      padding-top 200px\n      text-align center\n      .other\n        color $theme-color\n.bar\n  z-index 9999999\n  position fixed\n  background #fff\n  left 0\n  top 54px\n  right 0\n  bottom 0\n  width 100%\n  height 100%\n  overflow auto\n/deep/.van-index-anchor\n  background #EBEBEB\n</style>\n","import { render } from \"./ask_choose_crop.vue?vue&type=template&id=5f5dc818&scoped=true\"\nimport script from \"./ask_choose_crop.vue?vue&type=script&lang=js\"\nexport * from \"./ask_choose_crop.vue?vue&type=script&lang=js\"\n\nimport \"./ask_choose_crop.vue?vue&type=style&index=0&id=5f5dc818&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5f5dc818\"]])\n\nexport default __exports__"],"sourceRoot":""}