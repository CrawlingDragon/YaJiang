{"version":3,"sources":["webpack:///./src/views/sign/sign.vue","webpack:///./src/components/base/deal/deal.vue","webpack:///./src/components/base/deal/deal.vue?1359","webpack:///./src/views/sign/sign.vue?ae30","webpack:///./src/components/base/deal/deal.vue?cf4b","webpack:///./src/views/sign/sign.vue?e5cc"],"names":["class","style","indexHeader","onSubmit2","username","name","placeholder","rules","sms","center","clearable","maxlength","button","showBtn","start","ref","millisecond","time","auto-start","format","finish","password","type","minlength","checked","round","block","native-type","goLogin","checkbox","icon-size","checked-color","show","privacyShow","z-index","lock-scroll","closeDeal","privacyData","title","content","closePrivacy","dealData","props","Boolean","default","setup","emit","value","newVal","data","created","this","getUserAgreement","getUserPrivacy","methods","$axios","fetchGet","then","res","code","__exports__","components","Header","Deal","clickTrue","passwordLengthMessage","computed","watch","mounted","passwordLengValidator","length","validatorPhone","val","test","$refs","countDown","reset","signFn","$toast","fetchPost","message","saveUserInfo","setTimeout","$router","push","path","sendPhone","mobile","action","$dialog","alert","confirmButtonText","confirmButtonColor","render"],"mappings":"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","file":"js/sign.47111165.js","sourcesContent":["<template>\n  <div class=\"sign-container\">\n    <Header :indexHeader=\"false\"></Header>\n    <div class=\"title\">快速注册</div>\n    <van-form @submit=\"onSubmit2\" class=\"from\">\n      <van-field\n        v-model=\"username\"\n        name=\"phone\"\n        placeholder=\"请输入手机号\"\n        :rules=\"[\n          { required: true, message: '手机号不能为空' },\n          { validator: validatorPhone, message: '手机号码格式不正确' },\n        ]\"\n      />\n      <van-field\n        v-model=\"sms\"\n        center\n        clearable\n        name=\"code\"\n        placeholder=\"请输入4位验证码\"\n        maxlength=\"4\"\n        :rules=\"[{ required: true, message: '验证码不能为空' }]\"\n      >\n        <template #button>\n          <div class=\"btn\" v-if=\"showBtn\" @click=\"start\">发送验证码</div>\n          <div v-show=\"!showBtn\">\n            <van-count-down\n              ref=\"countDown\"\n              millisecond\n              :time=\"60000\"\n              :auto-start=\"false\"\n              format=\"ss秒后重试\"\n              @finish=\"finish\"\n            />\n          </div>\n        </template>\n      </van-field>\n      <van-field\n        v-model=\"password\"\n        type=\"password\"\n        name=\"pwd\"\n        placeholder=\"请输入密码（6-20位）\"\n        minlength=\"6\"\n        maxlength=\"20\"\n        :rules=\"[\n          {\n            required: true,\n            message: '密码不能为空',\n          },\n          { validator: passwordLengValidator, message: passwordLengthMessage },\n        ]\"\n      />\n      <div style=\"margin-top:30px;margin-left:16px\">\n        <Deal v-model:checked=\"checked\"></Deal>\n      </div>\n      <div style=\"margin: 16px;\">\n        <van-button\n          round\n          block\n          type=\"info\"\n          native-type=\"submit\"\n          class=\"sub\"\n          :class=\"{ success: checked && password && username && sms }\"\n        >\n          注册\n        </van-button>\n      </div>\n    </van-form>\n    <div class=\"go-login\" @click=\"goLogin\">已有益农宝账号，去登录</div>\n  </div>\n</template>\n<script>\nimport Header from '@/components/header/header';\nimport { mapActions } from 'vuex';\nimport { useMeta } from 'vue-meta';\nimport { login } from '@/common/js/getToken';\nimport Deal from '@/components/base/deal/deal.vue';\nexport default {\n  name: 'sign',\n  components: { Header, Deal },\n  setup() {\n    useMeta({\n      title: '注册',\n    });\n  },\n  props: {},\n  data() {\n    return {\n      showBtn: true,\n      clickTrue: false,\n      username: '',\n      sms: '',\n      password: '',\n      checked: false,\n      passwordLengthMessage: '密码长度不能少于6位',\n    };\n  },\n  created() {},\n  computed: {},\n  watch: {},\n  mounted() {},\n  methods: {\n    ...mapActions(['saveUserInfo']),\n    passwordLengValidator() {\n      // 密码长度6-20\n      // console.log(\"this.findPassword.length\", this.findPassword.length);\n      if (this.password.length <= 5) {\n        this.passwordLengthMessage = '密码长度不能少于6位';\n        // console.log(\"this.passwordLengthMessage\", this.passwordLengthMessage);\n        return false;\n      }\n      if (this.password.length >= 21) {\n        this.passwordLengthMessage = '密码长度不能多于20位';\n        return false;\n      }\n      // return true;\n    },\n    validatorPhone(val) {\n      // 验证手机号码\n      if (/^1(3|4|5|6|7|8|9)\\d{9}$/.test(val)) {\n        this.clickTrue = true;\n      } else {\n        this.clickTrue = false;\n      }\n      return /^1(3|4|5|6|7|8|9)\\d{9}$/.test(val);\n    },\n    finish() {\n      this.$refs.countDown.reset();\n      this.showBtn = true;\n      this.clickTrue = true;\n    },\n    onSubmit2() {\n      if (!this.checked) {\n        this.$toast('必须先同意用户协议和隐私政策');\n        return;\n      }\n      this.signFn(this.username, this.password, this.sms);\n    },\n    signFn(username, password, code) {\n      this.$axios\n        .fetchPost('Mobile/Member/register', {\n          username,\n          password,\n          code,\n        })\n        .then((res) => {\n          const data = res.data;\n          this.$toast(res.data.message);\n          if (data.code == 0) {\n            this.saveUserInfo(data.data);\n            setTimeout(() => {\n              this.$router.push({ path: '/index' });\n            }, 500);\n          }\n        });\n    },\n    start() {\n      if (!this.clickTrue) {\n        return;\n      }\n      this.sendPhone();\n    },\n    sendPhone() {\n      //发送验证码\n      this.$axios\n        .fetchPost('Mobile/Member/ServerSmsCode', {\n          mobile: this.username,\n          action: 'reg',\n        })\n        .then((res) => {\n          if (res.data.code == 0) {\n            this.$toast(res.data.message);\n            this.clickTrue = false;\n            this.showBtn = false;\n            setTimeout(() => {\n              this.$refs.countDown.start();\n            }, 100);\n          } else {\n            this.$dialog\n              .alert({\n                message: res.data.message,\n                confirmButtonText: '知道了',\n                confirmButtonColor: '#338aff',\n              })\n              .then(() => {\n                // on close\n              });\n          }\n        });\n    },\n    goLogin() {\n      login();\n    },\n  },\n};\n</script>\n<style lang=\"stylus\" scoped>\n.sign-container\n  height 100%\n  position absolute\n  left 0\n  right 0\n  background #fff\n  .title\n    font-size 24px\n    color #333333\n    text-align center\n    margin 40px 0\n  .from\n    width 80%\n    margin 0 auto\n  .go-login\n    margin 15px 0\n    text-align center\n    color #ff6600\n    font-size 15px\n  .van-count-down\n    color #999\n    font-size 13px\n.sub\n  &.success\n    background #ff6600\n    color #fff\n</style>\n","<template>\n  <div class=\"deal-box\">\n    <van-checkbox\n      v-model=\"checkbox\"\n      icon-size=\"20px\"\n      class=\"checkbox\"\n      checked-color=\"#338aff\"\n    ></van-checkbox>\n    我已阅读并同意<span @click=\"show = true\">用户协议</span>与<span\n      @click=\"privacyShow = true\"\n      >隐私政策</span\n    >\n  </div>\n  <van-overlay\n    :show=\"show\"\n    @click=\"show = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 用户协议 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closeDeal\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ privacyData.title }}</h3>\n      <p class=\"text\" v-html=\"privacyData.content\"></p>\n    </div>\n  </van-overlay>\n  <van-overlay\n    :show=\"privacyShow\"\n    @click=\"privacyShow = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 隐私政策 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closePrivacy\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ dealData.title }}</h3>\n      <p class=\"text\" v-html=\"dealData.content\"></p>\n    </div>\n  </van-overlay>\n</template>\n\n<script>\nimport { watch, ref } from \"vue\";\n// import { useMeta } from \"vue-meta\";\n\nexport default {\n  props: {\n    checked: {\n      type: Boolean,\n      default: false\n    }\n    // content: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // },\n    // PrivacyContent: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // }\n  },\n\n  setup(props, { emit }) {\n    const checkbox = ref(false);\n    const show = ref(false);\n    const privacyShow = ref(false);\n    watch(checkbox, newVal => {\n      emit(\"update:checked\", newVal);\n    });\n\n    function closeDeal() {\n      show.value = false;\n    }\n    function closePrivacy() {\n      privacyShow.value = false;\n    }\n    return { checkbox, show, privacyShow, closeDeal, closePrivacy };\n  },\n  data() {\n    return {\n      dealData: {},\n      privacyData: {}\n    };\n  },\n  created() {\n    this.getUserAgreement();\n    this.getUserPrivacy();\n  },\n  methods: {\n    getUserAgreement() {\n      this.$axios.fetchGet(\"/Mobile/User/user_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.dealData = res.data.data;\n        }\n      });\n    },\n    getUserPrivacy() {\n      this.$axios.fetchGet(\"/Mobile/User/service_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.privacyData = res.data.data;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.deal-box\n  position relative\n  padding-left 30px\n  font-size 13px\n  color #999999\n  .checkbox\n    position absolute\n    left 0\n    top 0\n  & > span\n    color #333333\n.wrapper\n  width 100%\n  height 100%\n  margin 0 auto\n  overflow auto\n  background #fff\n  padding 12px\n  position relative\n  font-family: Microsoft YaHei;\n  .close-btn\n    color #9D9D9D\n    font-size 28px\n    position absolute\n    left 19px\n    top 22px\n  h3\n    text-align center\n    font-size 19px\n    line-height 58px\n  .text\n    font-size 14px\n</style>\n","import { render } from \"./deal.vue?vue&type=template&id=75a605c7\"\nimport script from \"./deal.vue?vue&type=script&lang=js\"\nexport * from \"./deal.vue?vue&type=script&lang=js\"\n\nimport \"./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./sign.vue?vue&type=template&id=6a021172&scoped=true\"\nimport script from \"./sign.vue?vue&type=script&lang=js\"\nexport * from \"./sign.vue?vue&type=script&lang=js\"\n\nimport \"./sign.vue?vue&type=style&index=0&id=6a021172&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6a021172\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sign.vue?vue&type=style&index=0&id=6a021172&lang=stylus&scoped=true\""],"sourceRoot":""}