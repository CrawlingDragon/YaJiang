{"version":3,"sources":["webpack:///./src/components/base/deal/deal.vue","webpack:///./src/components/base/deal/deal.vue?1359","webpack:///./src/views/sign/sign.vue","webpack:///./src/views/sign/sign.vue?ae30","webpack:///./src/components/base/deal/deal.vue?cf4b","webpack:///./src/views/sign/sign.vue?b607"],"names":["class","checkbox","icon-size","checked-color","show","privacyShow","z-index","lock-scroll","closeDeal","name","privacyData","title","content","closePrivacy","dealData","props","checked","type","Boolean","default","setup","emit","value","newVal","data","created","this","getUserAgreement","getUserPrivacy","methods","$axios","fetchGet","then","res","code","__exports__","render","style","indexHeader","onSubmit2","username","placeholder","rules","sms","center","clearable","maxlength","button","showBtn","start","ref","millisecond","time","auto-start","format","finish","password","minlength","round","block","native-type","to","components","Header","Deal","clickTrue","passwordLengthMessage","computed","watch","mounted","passwordLengValidator","length","validatorPhone","val","test","$refs","countDown","reset","signFn","$toast","fetchPost","message","saveUserInfo","setTimeout","$router","push","path","sendPhone","mobile","action","$dialog","alert","confirmButtonText","confirmButtonColor"],"mappings":"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","file":"js/sign.365b910a.js","sourcesContent":["<template>\n  <div class=\"deal-box\">\n    <van-checkbox\n      v-model=\"checkbox\"\n      icon-size=\"20px\"\n      class=\"checkbox\"\n      checked-color=\"#338aff\"\n    ></van-checkbox>\n    我已阅读并同意<span @click=\"show = true\">用户协议</span>与<span\n      @click=\"privacyShow = true\"\n      >隐私政策</span\n    >\n  </div>\n  <van-overlay\n    :show=\"show\"\n    @click=\"show = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 用户协议 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closeDeal\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ privacyData.title }}</h3>\n      <p class=\"text\" v-html=\"privacyData.content\"></p>\n    </div>\n  </van-overlay>\n  <van-overlay\n    :show=\"privacyShow\"\n    @click=\"privacyShow = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 隐私政策 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closePrivacy\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ dealData.title }}</h3>\n      <p class=\"text\" v-html=\"dealData.content\"></p>\n    </div>\n  </van-overlay>\n</template>\n\n<script>\nimport { watch, ref } from \"vue\";\n// import { useMeta } from \"vue-meta\";\n\nexport default {\n  props: {\n    checked: {\n      type: Boolean,\n      default: false\n    }\n    // content: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // },\n    // PrivacyContent: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // }\n  },\n\n  setup(props, { emit }) {\n    const checkbox = ref(false);\n    const show = ref(false);\n    const privacyShow = ref(false);\n    watch(checkbox, newVal => {\n      emit(\"update:checked\", newVal);\n    });\n\n    function closeDeal() {\n      show.value = false;\n    }\n    function closePrivacy() {\n      privacyShow.value = false;\n    }\n    return { checkbox, show, privacyShow, closeDeal, closePrivacy };\n  },\n  data() {\n    return {\n      dealData: {},\n      privacyData: {}\n    };\n  },\n  created() {\n    this.getUserAgreement();\n    this.getUserPrivacy();\n  },\n  methods: {\n    getUserAgreement() {\n      this.$axios.fetchGet(\"/Mobile/User/user_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.dealData = res.data.data;\n        }\n      });\n    },\n    getUserPrivacy() {\n      this.$axios.fetchGet(\"/Mobile/User/service_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.privacyData = res.data.data;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.deal-box\n  position relative\n  padding-left 30px\n  font-size 13px\n  color #999999\n  .checkbox\n    position absolute\n    left 0\n    top 0\n  & > span\n    color #333333\n.wrapper\n  width 100%\n  height 100%\n  margin 0 auto\n  overflow auto\n  background #fff\n  padding 12px\n  position relative\n  font-family: Microsoft YaHei;\n  .close-btn\n    color #9D9D9D\n    font-size 28px\n    position absolute\n    left 19px\n    top 22px\n  h3\n    text-align center\n    font-size 19px\n    line-height 58px\n  .text\n    font-size 14px\n</style>\n","import { render } from \"./deal.vue?vue&type=template&id=75a605c7\"\nimport script from \"./deal.vue?vue&type=script&lang=js\"\nexport * from \"./deal.vue?vue&type=script&lang=js\"\n\nimport \"./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"sign-container\">\n    <Header :indexHeader=\"false\"></Header>\n    <div class=\"title\">快速注册</div>\n    <van-form @submit=\"onSubmit2\" class=\"from\">\n      <van-field\n        v-model=\"username\"\n        name=\"phone\"\n        placeholder=\"请输入手机号\"\n        :rules=\"[\n          { required: true, message: '手机号不能为空' },\n          { validator: validatorPhone, message: '手机号码格式不正确' }\n        ]\"\n      />\n      <van-field\n        v-model=\"sms\"\n        center\n        clearable\n        name=\"code\"\n        placeholder=\"请输入4位验证码\"\n        maxlength=\"4\"\n        :rules=\"[{ required: true, message: '验证码不能为空' }]\"\n      >\n        <template #button>\n          <div class=\"btn\" v-if=\"showBtn\" @click=\"start\">发送验证码</div>\n          <div v-show=\"!showBtn\">\n            <van-count-down\n              ref=\"countDown\"\n              millisecond\n              :time=\"60000\"\n              :auto-start=\"false\"\n              format=\"ss秒后重试\"\n              @finish=\"finish\"\n            />\n          </div>\n        </template>\n      </van-field>\n      <van-field\n        v-model=\"password\"\n        type=\"password\"\n        name=\"pwd\"\n        placeholder=\"请输入密码（6-20位）\"\n        minlength=\"6\"\n        maxlength=\"20\"\n        :rules=\"[\n          {\n            required: true,\n            message: '密码不能为空'\n          },\n          { validator: passwordLengValidator, message: passwordLengthMessage }\n        ]\"\n      />\n      <div style=\"margin-top:30px;margin-left:16px\">\n        <Deal v-model:checked=\"checked\"></Deal>\n      </div>\n      <div style=\"margin: 16px;\">\n        <van-button\n          round\n          block\n          type=\"info\"\n          native-type=\"submit\"\n          class=\"sub\"\n          :class=\"{ success: checked && password && username && sms }\"\n        >\n          注册\n        </van-button>\n      </div>\n    </van-form>\n    <router-link class=\"go-login\" to=\"/login\"\n      >已有益农宝账号，去登录</router-link\n    >\n  </div>\n</template>\n<script>\nimport Header from \"@/components/header/header\";\nimport { mapActions } from \"vuex\";\nimport { useMeta } from \"vue-meta\";\nimport Deal from \"@/components/base/deal/deal.vue\";\nexport default {\n  name: \"sign\",\n  components: { Header, Deal },\n  setup() {\n    useMeta({\n      title: \"注册\"\n    });\n  },\n  props: {},\n  data() {\n    return {\n      showBtn: true,\n      clickTrue: false,\n      username: \"\",\n      sms: \"\",\n      password: \"\",\n      checked: false,\n      passwordLengthMessage: \"密码长度不能少于6位\"\n    };\n  },\n  created() {},\n  computed: {},\n  watch: {},\n  mounted() {},\n  methods: {\n    ...mapActions([\"saveUserInfo\"]),\n    passwordLengValidator() {\n      // 密码长度6-20\n      // console.log(\"this.findPassword.length\", this.findPassword.length);\n      if (this.password.length <= 5) {\n        this.passwordLengthMessage = \"密码长度不能少于6位\";\n        // console.log(\"this.passwordLengthMessage\", this.passwordLengthMessage);\n        return false;\n      }\n      if (this.password.length >= 21) {\n        this.passwordLengthMessage = \"密码长度不能多于20位\";\n        return false;\n      }\n      // return true;\n    },\n    validatorPhone(val) {\n      // 验证手机号码\n      if (/^1(3|4|5|6|7|8|9)\\d{9}$/.test(val)) {\n        this.clickTrue = true;\n      } else {\n        this.clickTrue = false;\n      }\n      return /^1(3|4|5|6|7|8|9)\\d{9}$/.test(val);\n    },\n    finish() {\n      this.$refs.countDown.reset();\n      this.showBtn = true;\n      this.clickTrue = true;\n    },\n    onSubmit2() {\n      if (!this.checked) {\n        this.$toast(\"必须先同意用户协议和隐私政策\");\n        return;\n      }\n      this.signFn(this.username, this.password, this.sms);\n    },\n    signFn(username, password, code) {\n      this.$axios\n        .fetchPost(\"Mobile/Member/register\", {\n          username,\n          password,\n          code\n        })\n        .then(res => {\n          const data = res.data;\n          this.$toast(res.data.message);\n          if (data.code == 0) {\n            this.saveUserInfo(data.data);\n            setTimeout(() => {\n              this.$router.push({ path: \"/index\" });\n            }, 500);\n          }\n        });\n    },\n    start() {\n      if (!this.clickTrue) {\n        return;\n      }\n      this.sendPhone();\n    },\n    sendPhone() {\n      //发送验证码\n      this.$axios\n        .fetchPost(\"Mobile/Member/ServerSmsCode\", {\n          mobile: this.username,\n          action: \"reg\"\n        })\n        .then(res => {\n          if (res.data.code == 0) {\n            this.$toast(res.data.message);\n            this.clickTrue = false;\n            this.showBtn = false;\n            setTimeout(() => {\n              this.$refs.countDown.start();\n            }, 100);\n          } else {\n            this.$dialog\n              .alert({\n                message: res.data.message,\n                confirmButtonText: \"知道了\",\n                confirmButtonColor: \"#338aff\"\n              })\n              .then(() => {\n                // on close\n              });\n          }\n        });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.sign-container\n  height 100%\n  position absolute\n  left 0\n  right 0\n  background #fff\n  .title\n    font-size 24px\n    color #333333\n    text-align center\n    margin 40px 0\n  .from\n    width 80%\n    margin 0 auto\n  .go-login\n    margin 15px 0\n    text-align center\n    color #ff6600\n    font-size 15px\n  .van-count-down\n    color #999\n    font-size 13px\n.sub\n  &.success\n    background #ff6600\n    color #fff\n</style>\n","import { render } from \"./sign.vue?vue&type=template&id=4c8c7136&scoped=true\"\nimport script from \"./sign.vue?vue&type=script&lang=js\"\nexport * from \"./sign.vue?vue&type=script&lang=js\"\n\nimport \"./sign.vue?vue&type=style&index=0&id=4c8c7136&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c8c7136\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sign.vue?vue&type=style&index=0&id=4c8c7136&lang=stylus&scoped=true\""],"sourceRoot":""}