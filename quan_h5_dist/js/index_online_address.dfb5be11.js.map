{"version":3,"sources":["webpack:///./src/views/index_online_address/index_online_address.vue?84c0","webpack:///./src/common/js/baidu_locationAddress.js","webpack:///./src/views/index_online_address/index_online_address.vue","webpack:///./src/views/index_online_address/index_online_address.vue?2b48"],"names":["geolocation","Promise","resolve","store","useStore","axiosAddressComputed","computed","state","axiosAddress","value","undefined","BMapGL","Geolocation","getCurrentPosition","r","console","log","this","getStatus","address","province","city","district","commit","geo","geolocationAgain","askGeo","askGeolocationAgain","class","teleport","action","style","ref","index-header","show","z-index","type","vertical","searchBox","onSearch","show-action","clearable","placeholder","onCancel","currentSelectAddress","clickGeoAddress","geoViewAddress","goToIndexOnline","latelyAddressArrayComputed","item","index","key","hotCity","id","choose","name","sticky-offset-top","index-list","indexList","barTop","computedList","items","it","title","searchAddress","description","noData","metaInfo","components","Headers","setup","router","getters","geoAddress","setTimeout","push","path","query","data","list","storageArr","get","activated","initSearchListAll","arr","forEach","concat","filter","length","x","split","y","$route","currentAxiosAddress","mounted","getAreaList","methods","val","page","filtrate","includes","$router","go","$axios","fetchGet","then","res","code","hotcity","letterlist","lists","computedBarTop","h","$refs","historyRef","getBoundingClientRect","height","__exports__","render"],"mappings":"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","file":"js/index_online_address.dfb5be11.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index_online_address.vue?vue&type=style&index=0&id=23ee9ad2&lang=stylus&scoped=true\"","import BMapGL from \"BMapGL\";\n// import storage from \"good-storage\";\nimport { useStore } from \"vuex\";\nimport { computed } from \"vue\";\n\nexport function geolocation() {\n  // 浏览器精确定位\n  // console.log(\"store\", store);\n  return new Promise(resolve => {\n    // console.log(\"已经定位\", axiosAddressComputed.value);\n    const store = useStore();\n    const axiosAddressComputed = computed(() => store.state.axiosAddress);\n\n    if (\n      axiosAddressComputed.value !== \"\" &&\n      axiosAddressComputed.value !== undefined\n    ) {\n      // 如果已经定位过了，直接返回定位的地址\n      // console.log(\"已经定位\", axiosAddressComputed.value);\n      resolve(axiosAddressComputed.value);\n      return;\n    }\n    var geolocation = new BMapGL.Geolocation();\n    geolocation.getCurrentPosition(function(r) {\n      console.log(\"this.getStatus()\", this.getStatus());\n      if (this.getStatus() == 0) {\n        let axiosAddress =\n          r.address.province +\n          \",\" +\n          r.address.city +\n          (r.address.district ? \",\" + r.address.district : \"\");\n        // good-storage 保存地址\n        // 1.保存 接口使用的地址\n        // console.log(\"address\", address);\n        // 保存接口请求的地址\n        // console.log(\"返回地址\", axiosAddress);\n        store.commit(\"setAxiosAddress\", axiosAddress);\n        store.commit(\"setGeoAddress\", axiosAddress);\n        //保存定位的地址\n        resolve(axiosAddress);\n      } else {\n        // 定位失败，去到下一步，判断个人资料\n        store.commit(\"setGeoAddress\", \"定位失败\");\n        if (this.getStatus() === 6) {\n          // this.getStatus == 6 表示权限未打开\n          resolve(6);\n        } else {\n          resolve(99);\n        }\n      }\n    });\n  });\n}\n\nexport function getCityAddress() {\n  // ip定位，获取市\n  return new Promise(resolve => {\n    function myFun(result) {\n      var cityName = result.name;\n      resolve(cityName);\n    }\n    var myCity = new BMapGL.LocalCity();\n    myCity.get(myFun);\n  });\n}\n\nexport function geo() {\n  const store = useStore();\n  function geolocationAgain() {\n    // 浏览器精确定位\n    // console.log(\"store\", store);\n    return new Promise(resolve => {\n      // console.log(\"已经定位\", axiosAddressComputed.value);\n      var geolocation = new BMapGL.Geolocation();\n      geolocation.getCurrentPosition(function(r) {\n        console.log(\"this.getStatus()\", this.getStatus());\n        if (this.getStatus() == 0) {\n          let axiosAddress =\n            r.address.province +\n            \",\" +\n            r.address.city +\n            (r.address.district ? \",\" + r.address.district : \"\");\n          // good-storage 保存地址\n          // 1.保存 接口使用的地址\n          // console.log(\"address\", address);\n          // 保存接口请求的地址\n          // console.log(\"返回地址\", axiosAddress);\n          // store.commit(\"setAxiosAddress\", axiosAddress);\n          store.commit(\"setGeoAddress\", axiosAddress);\n          //保存定位的地址\n          resolve(axiosAddress);\n        } else {\n          // 定位失败，去到下一步，判断个人资料\n          store.commit(\"setGeoAddress\", \"定位失败\");\n          if (this.getStatus() === 6) {\n            // this.getStatus == 6 表示权限未打开\n            resolve(6);\n          } else {\n            resolve(99);\n          }\n        }\n      });\n    });\n  }\n  return {\n    geolocationAgain\n  };\n}\n\nexport function askGeo() {\n  //\n  function askGeolocationAgain() {\n    // 浏览器精确定位\n    return new Promise(resolve => {\n      // console.log(\"已经定位\", axiosAddressComputed.value);\n      var geolocation = new BMapGL.Geolocation();\n      geolocation.getCurrentPosition(function(r) {\n        // console.log(\"this.getStatus()\", this.getStatus());\n        if (this.getStatus() == 0) {\n          let axiosAddress =\n            r.address.province +\n            \",\" +\n            r.address.city +\n            (r.address.district ? \",\" + r.address.district : \"\");\n          // good-storage 保存地址\n          // 1.保存 接口使用的地址\n          // console.log(\"address\", address);\n          // 保存接口请求的地址\n          // console.log(\"返回地址\", axiosAddress);\n          // store.commit(\"setAxiosAddress\", axiosAddress);\n          // store.commit(\"setGeoAddress\", axiosAddress);\n          //保存定位的地址\n          resolve(axiosAddress);\n        } else {\n          // 定位失败，去到下一步，判断个人资料\n          // store.commit(\"setGeoAddress\", \"定位失败\");\n          if (this.getStatus() === 6) {\n            // this.getStatus == 6 表示权限未打开\n            resolve(6);\n          } else {\n            resolve(99);\n          }\n        }\n      });\n    });\n  }\n  return {\n    askGeolocationAgain\n  };\n}\n","<template>\n  <div class=\"area-container\" teleport=\"body\">\n    <Headers ref=\"header\" :index-header=\"false\"></Headers>\n    <van-overlay :show=\"show\" class=\"loading\" z-index=\"99999999999999\">\n      <div class=\"wrapper\" @click.stop>\n        <van-loading type=\"spinner\" vertical />\n      </div>\n    </van-overlay>\n    <div class=\"area-content\" :class=\"{ searchBox: searchBox }\">\n      <form action=\"/\" class=\"from\">\n        <van-search\n          v-model=\"value\"\n          show-action\n          clearable\n          placeholder=\"输入城市名、拼音或字母查询\"\n          @search=\"onSearch\"\n          @update:model-value=\"onSearch\"\n          @cancel=\"onCancel\"\n          class=\"search-input\"\n          :class=\"{ searchBox: searchBox }\"\n        />\n      </form>\n      <div style=\"background:#ebebeb\">\n        <div class=\"now-choose-title\">当前选择:{{ currentSelectAddress }}</div>\n        <div class=\"tip-title\">定位/最近访问</div>\n        <div class=\"choose-wrap\">\n          <div\n            class=\"choosed-area location\"\n            :class=\"{\n              fail:\n                geoViewAddress == '定位失败' ||\n                geoViewAddress == '定位中...' ||\n                geoViewAddress == ''\n            }\"\n            @click=\"clickGeoAddress\"\n          >\n            <div class=\"icon\"></div>\n            <div>{{ geoViewAddress || \"定位失败\" }}</div>\n          </div>\n          <!--  最近选择地址 -->\n          <div class=\"choosed-area\" @click=\"goToIndexOnline('全部地区')\">\n            全部地区\n          </div>\n          <div\n            class=\"choosed-area\"\n            @click=\"goToIndexOnline(index)\"\n            v-for=\"(item, index) in latelyAddressArrayComputed\"\n            :key=\"item\"\n          >\n            {{ item }}\n          </div>\n        </div>\n        <div class=\"tip-title\">热门城市</div>\n        <ul class=\"hot-city-ul\">\n          <li v-for=\"item in hotCity\" :key=\"item.id\" @click=\"choose(item)\">\n            {{ item.name }}\n          </li>\n        </ul>\n        <van-index-bar\n          :sticky-offset-top=\"40\"\n          :index-list=\"indexList\"\n          :style=\"{ top: barTop + 'px' }\"\n        >\n          <!-- class=\"bar\" -->\n          <template v-for=\"item in computedList\" :key=\"item.items\">\n            <van-index-anchor :index=\"item.index\" />\n            <van-cell\n              :title=\"it.name\"\n              v-for=\"it in item.items\"\n              :key=\"it.name\"\n              @click=\"choose(it)\"\n            />\n          </template>\n        </van-index-bar>\n      </div>\n      <div class=\"search-content\" v-show=\"searchBox\">\n        <div\n          class=\"item\"\n          v-for=\"item in searchAddress\"\n          :key=\"item.name\"\n          @click=\"choose(item)\"\n        >\n          {{ item.name }}\n        </div>\n        <van-empty description=\"未搜索到符合条件的内容\" v-show=\"noData\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Headers from \"@/components/header/header.vue\";\nimport { geo } from \"@/common/js/baidu_locationAddress.js\";\nimport { mapState, useStore } from \"vuex\";\nimport { computed, onUnmounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { Toast } from \"vant\";\nimport storage from \"good-storage\";\n\nexport default {\n  name: \"index_online_address\",\n  metaInfo() {\n    return {\n      title: \"切换地区\"\n    };\n  },\n  components: { Headers },\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    const geoViewAddress = computed(() => store.getters.geoViewAddress);\n    const geoAddress = computed(() => store.state.geoAddress);\n    const { geolocationAgain } = geo();\n    onUnmounted(() => {\n      console.log(\"geoAddress\", geoAddress);\n      if (geoViewAddress.value == \"定位中...\") {\n        store.commit(\"setGeoAddress\", \"定位失败\");\n        return;\n      }\n    });\n    async function clickGeoAddress() {\n      //点击定位地址\n      // 如果是定位失败。重新定位\n      if (geoViewAddress.value == \"定位中...\") {\n        Toast(\"定位中\");\n        return;\n      }\n      if (geoViewAddress.value === \"定位失败\") {\n        store.commit(\"setGeoAddress\", \"定位中...\");\n        await geolocationAgain();\n        return;\n        // to do\n      }\n      //路由到首页网诊\n      setTimeout(() => {\n        router.push({\n          path: \"/index_online\",\n          query: { address: geoAddress.value, axiosAddress: geoAddress.value }\n        });\n      }, 300);\n    }\n    return {\n      clickGeoAddress,\n      geoViewAddress\n    };\n  },\n  data() {\n    return {\n      value: \"\",\n      hotCity: [],\n      list: [],\n      searchAddress: [],\n      searchBox: false,\n      noData: false,\n      show: true,\n      barTop: 64,\n      storageArr: storage.get(\"onlineLatelyAddressArray\", [])\n    };\n  },\n  activated() {\n    this.value = \"\";\n    this.searchBox = false;\n    this.storageArr = storage.get(\"onlineLatelyAddressArray\", []);\n    console.log(\" this.storageArr\", this.storageArr);\n  },\n  computed: {\n    ...mapState([\"geoAddress\", \"latelyAddressArray\"]),\n    initSearchListAll() {\n      let arr = [];\n      this.list.forEach(item => {\n        arr = arr.concat(item.items);\n      });\n      return arr;\n    },\n    computedList() {\n      let arr = [];\n      arr = this.list.filter(item => {\n        return item.items.length != 0;\n      });\n      return arr;\n    },\n    indexList() {\n      let arr = [];\n      this.list.forEach(item => {\n        if (item.items.length != 0) {\n          arr.push(item.index);\n        }\n      });\n      return arr;\n    },\n    latelyAddressArrayComputed() {\n      let arr = [];\n      this.storageArr.forEach(item => {\n        let x = item.split(\",\");\n        let y = x[x.length - 1];\n        arr.push(y);\n      });\n      return arr;\n    },\n    currentSelectAddress() {\n      return this.$route.query.address;\n    },\n    currentAxiosAddress() {\n      return this.$route.query.axiosAddress;\n    }\n  },\n\n  mounted() {\n    this.getAreaList();\n  },\n\n  methods: {\n    onSearch(val) {\n      if (val != \"\") {\n        this.page = 0;\n        this.searchAddress = [];\n        this.searchBox = true;\n        this.filtrate(val);\n        if (this.searchAddress.length == 0) {\n          this.noData = true;\n        } else {\n          this.noData = false;\n        }\n      }\n      if (val == \"\") {\n        this.searchAddress = [];\n        this.searchBox = false;\n      }\n    },\n    filtrate(val) {\n      this.initSearchListAll.forEach(item => {\n        let name = item.name;\n        if (name.includes(val)) {\n          this.searchAddress.push(item);\n        }\n      });\n    },\n    onCancel() {\n      this.searchBox = false;\n      this.$router.go(-1);\n    },\n    choose(it) {\n      setTimeout(() => {\n        this.$router.push({\n          path: \"/index_online\",\n          query: { address: it.data, axiosAddress: it.data }\n        });\n        this.searchBox = false;\n      }, 100);\n    },\n    goToIndexOnline(index) {\n      //  选择最近选择地址\n      if (index === \"全部地区\") {\n        this.$router.push({\n          path: \"/index_online\",\n          query: { address: \"全部地区\" }\n        });\n      } else {\n        let storageArr = storage.get(\"onlineLatelyAddressArray\", []);\n        let address = storageArr[index];\n        this.$router.push({\n          path: \"/index_online\",\n          query: { address: address, axiosAddress: address }\n        });\n      }\n      this.searchBox = false;\n    },\n    getAreaList() {\n      this.$axios.fetchGet(\"Mobile/Position/getAreaPostion\").then(res => {\n        if (res.data.code == 0) {\n          this.hotCity = res.data.data.hotcity.letterlist;\n          this.list = res.data.data.lists;\n          this.show = false;\n          // this.computedBarTop();\n        }\n      });\n    },\n    computedBarTop() {\n      let h = this.$refs.historyRef.getBoundingClientRect().height;\n      console.log(\"h\", h);\n      if (h > 0) {\n        this.barTop = h + 64;\n      } else {\n        this.barTop = 64;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.area-container\n  background: #fff\n  position fixed\n  left 0\n  right 0\n  top 0\n  bottom 0\n  z-index 9999999999999\n  overflow auto\n  .loading\n    width 100%\n    padding-top 50%\n    height 100vh\n    position: fixed\n    left 0\n    top 0\n    right: 0\n    bottom 0\n  .area-content\n    padding-top 50px\n    &.searchBox\n      height 300px\n      overflow hidden\n      padding-top 67px\n      position fixed\n      top 40px\n      right 0\n      left 0\n      z-index 3\n    .search-input\n      background: #EBEBEB;\n      margin 0 12px 0 0\n      width auto\n      border-radius 8px\n      &.searchBox\n        position fixed\n        top 52px\n        left 12px\n        right 0\n    .tip-title\n      font-size 14px\n      color: #999999;\n      margin 15px 0\n      padding-left 12px\n    .choose-wrap\n      padding-left 12px\n    .choosed-area\n      min-width 23%\n      padding 0 3px\n      display inline-block\n      // border: 1px solid #E5E5E5;\n      background: #fff\n      border-radius: 8px;\n      height 35px\n      line-height 35px\n      text-align center\n      font-size: 16px;\n      font-family: Microsoft YaHei;\n      color: #333333;\n      margin-right 1%\n      margin-bottom 10px\n      &.location\n        .icon\n          width 12px\n          height: 15px\n          background url('./icon_1.png') center no-repeat\n          background-size contain\n          margin-right: 3px\n        & > div\n          display: inline-block\n          vertical-align: middle\n      &.fail\n        color #999\n        .icon\n          background url('./icon_2.png') center no-repeat\n          background-size contain\n    .hot-city-ul\n      font-size 0\n      margin-right 12px\n      padding-left 12px\n      li\n        min-width 23%\n        // border: 1px solid #E5E5E5;\n        background: #fff\n        border-radius: 8px;\n        height 35px\n        line-height 35px\n        text-align center\n        font-size: 16px;\n        font-family: Microsoft YaHei;\n        color: #333333;\n        margin-right 2%\n        display inline-block\n        margin-bottom 10px\n  .search-content\n    position fixed\n    left 0\n    right 0\n    bottom 0\n    top 108px\n    background #fff\n    z-index 222\n    overflow auto\n    .item\n      height 40px\n      line-height 40px\n      border-bottom 1px solid #e5e5e5\n      text-indent 20px\n/deep/.van-index-bar__sidebar\n  z-index 1\n.now-choose-title\n  line-height: 40px\n  padding-left 12px\n  color #333\n  background #fff\n.bar\n  z-index 9999999\n  position fixed\n  background #fff\n  left 0\n  top 54px\n  right 0\n  bottom 0\n  width 100%\n  height 100%\n  overflow auto\n</style>\n","import { render } from \"./index_online_address.vue?vue&type=template&id=23ee9ad2&scoped=true\"\nimport script from \"./index_online_address.vue?vue&type=script&lang=js\"\nexport * from \"./index_online_address.vue?vue&type=script&lang=js\"\n\nimport \"./index_online_address.vue?vue&type=style&index=0&id=23ee9ad2&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23ee9ad2\"]])\n\nexport default __exports__"],"sourceRoot":""}