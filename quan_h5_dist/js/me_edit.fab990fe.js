(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["me_edit"],{"1c3e":function(e,t,a){"use strict";a("206a")},"1f4b":function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23");Object(n["K"])("data-v-ec831c2c");var i={class:"me_edit-container"},c=Object(n["k"])("div",{class:"left"},"头像",-1),s={class:"mid"},o=Object(n["k"])("div",{class:"left"},"用户名",-1),r={class:"mid"},d=Object(n["k"])("div",{class:"left"},"名字",-1),u={class:"mid"},l=Object(n["k"])("div",{class:"left"},"性别",-1),m={class:"mid"},f=Object(n["k"])("div",{class:"left"},"所在地",-1),h={class:"mid"};function b(e,t,a,b,j,O){var p=Object(n["P"])("Header"),v=Object(n["P"])("van-image"),w=Object(n["P"])("van-icon"),k=Object(n["P"])("van-uploader"),I=Object(n["P"])("van-field"),S=Object(n["P"])("van-dialog"),x=Object(n["P"])("van-action-sheet"),y=Object(n["P"])("van-area"),P=Object(n["P"])("van-popup");return Object(n["H"])(),Object(n["j"])("div",i,[Object(n["n"])(p,{indexHeader:!1}),Object(n["k"])("ul",null,[Object(n["n"])(k,{class:"upload",accept:"image/*","after-read":O.afterRead},{default:Object(n["Z"])((function(){return[Object(n["k"])("li",null,[c,Object(n["k"])("div",s,[Object(n["n"])(v,{class:"avator",fit:"cover",round:"",src:j.avatar},null,8,["src"])]),Object(n["n"])(w,{name:"arrow",class:"arrow"})])]})),_:1},8,["after-read"]),Object(n["k"])("li",null,[o,Object(n["k"])("div",r,Object(n["T"])(j.userName),1)]),Object(n["k"])("li",{onClick:t[0]||(t[0]=function(){return O.clickName&&O.clickName.apply(O,arguments)})},[d,Object(n["k"])("div",u,Object(n["T"])(j.name),1),0==j.identity&&0==j.ismember?(Object(n["H"])(),Object(n["h"])(w,{key:0,name:"arrow",class:"arrow"})):Object(n["i"])("",!0)]),Object(n["k"])("li",{onClick:t[1]||(t[1]=function(e){return j.sexShow=!0})},[l,Object(n["k"])("div",m,Object(n["T"])("1"==j.sex?"男":"女"),1),Object(n["n"])(w,{name:"arrow",class:"arrow"})]),Object(n["k"])("li",{onClick:t[2]||(t[2]=function(e){return j.areaShow=!0})},[f,Object(n["k"])("div",h,Object(n["T"])(j.resideprovince)+Object(n["T"])(j.residecity)+Object(n["T"])(j.residedist),1),Object(n["n"])(w,{name:"arrow",class:"arrow"})])]),Object(n["n"])(S,{show:j.nameShow,"onUpdate:show":t[4]||(t[4]=function(e){return j.nameShow=e}),title:"修改名字","show-cancel-button":"",onConfirm:O.confirmName},{default:Object(n["Z"])((function(){return[Object(n["n"])(I,{modelValue:j.names,"onUpdate:modelValue":t[3]||(t[3]=function(e){return j.names=e}),placeholder:"请输入用户名",class:"name",maxlength:"10"},null,8,["modelValue"])]})),_:1},8,["show","onConfirm"]),Object(n["n"])(x,{show:j.sexShow,"onUpdate:show":t[5]||(t[5]=function(e){return j.sexShow=e}),actions:j.actions,onSelect:O.onSelect},null,8,["show","actions","onSelect"]),Object(n["n"])(P,{show:j.areaShow,"onUpdate:show":t[6]||(t[6]=function(e){return j.areaShow=e}),"close-icon-position":"top-left",position:"bottom"},{default:Object(n["Z"])((function(){return[Object(n["n"])(y,{title:"选择所在地","area-list":j.areaList,onConfirm:O.confimArea,onCancel:O.cancelArea},null,8,["area-list","onConfirm","onCancel"])]})),_:1},8,["show"])])}Object(n["I"])();var j=a("5530"),O=a("f392"),p=a("5502"),v=a("1b7a"),w=a("213a"),k=a("7c8d"),I=a.n(k),S={setup:function(){Object(w["c"])({title:"编辑资料"})},name:"meEdit",components:{Header:O["a"]},props:{},data:function(){return{updated:!1,info:"",avatar:"",userName:"",name:"",sex:"请选择",nameShow:!1,sexShow:!1,areaShow:!1,names:"",actions:[{name:"男",id:1},{name:"女",id:0}],areaList:v["a"],resideprovince:"",residecity:"",residedist:"",identity:0,ismember:0}},computed:Object(j["a"])({},Object(p["e"])(["uId","mid","initMid"])),watch:{name:function(e,t){if(""==t)return!1;this.upDate()},sex:function(e,t){"请选择"!=t&&this.upDate()},residedist:function(e,t){""!=t&&this.upDate()},residecity:function(e,t){""!=t&&this.upDate()},resideprovince:function(e,t){""!=t&&this.upDate()}},mounted:function(){this.getInfo()},created:function(){},updated:function(){},methods:Object(j["a"])(Object(j["a"])({},Object(p["d"])(["setUserInfo"])),{},{getUserInfo:function(){var e=this;this.updated&&this.$axios.fetchPost("Mobile/User/userCenter",{uId:this.uId,mId:this.initMid}).then((function(t){0==t.data.code&&e.setUserInfo(t.data.data)}))},afterRead:function(e){var t=this;new I.a(e.file,{quality:.1,success:function(e){var a=new FormData;a.append("urls[]",e,e.name),a.append("uId",t.uId),t.$axios.fetchPost("/Mobile/Wen/OssUploadFile",a).then((function(e){0==e.data.code&&(t.avatar=e.data.data,t.updated=!0,t.getUserInfo()),t.$toast(e.data.message)}))}})},getInfo:function(){var e=this;this.$axios.fetchPost("/Mobile/User/userCenter",{uId:this.uId,mId:this.initMid}).then((function(t){if(0==t.data.code){var a=t.data.data;e.avatar=a.avatar,e.userName=a.username,e.name=a.realname,e.sex=a.gender,e.resideprovince=a.resideprovince||"请选择",e.residecity=a.residecity,e.residedist=a.residedist,e.identity=a.identity,e.ismember=a.ismember}}))},upDate:function(){var e=this;this.$axios.fetchPost("Mobile/User/updateInfo",{uId:this.uId,gender:this.sex,realname:this.name,resideprovince:this.resideprovince,residecity:this.residecity,residedist:this.residedist}).then((function(t){0==t.data.code&&(e.updated=!0),e.$toast(t.data.message)}))},clickName:function(){1!=this.identity&&1!=this.ismember&&(this.nameShow=!0,this.names=this.name)},confirmName:function(){this.name=this.names},onSelect:function(e){this.sex=e.id,this.sexShow=!1},confimArea:function(e){this.areaShow=!1,this.resideprovince=e[0].name,this.residecity=e[1].name,this.residedist=e[2].name},cancelArea:function(){this.areaShow=!1}})},x=(a("1c3e"),a("d959")),y=a.n(x);const P=y()(S,[["render",b],["__scopeId","data-v-ec831c2c"]]);t["default"]=P},"206a":function(e,t,a){}}]);
//# sourceMappingURL=me_edit.fab990fe.js.map