{"version":3,"sources":["webpack:///./src/views/solution/preview/preview.vue?2ce1","webpack:///./src/views/solution/preview/preview.vue","webpack:///./src/views/solution/preview/preview.vue?3d08"],"names":["class","ref","indexHeader","goBackHeader","offset-top","navBar","item","index","key","classname","setItemRefItem","active1","clickHandle","name","caseArr","id","setItemRefIt","lists","it","timepoint","content","druginfo","length","drug","specid","src","thumb","fit","quantity","href","url","metaInfo","title","components","Header","props","data","w","top","re","active","offTop","computed","pId","this","$route","query","arr","forEach","push","option","watch","$nextTick","offsetTop","mounted","getPreviewData","window","addEventListener","handleScroll","unmounted","removeEventListener","methods","el","scrollTo","behavior","aa","document","documentElement","scrollTop","body","setTimeout","reverse","i","fetchGet","uId","action","then","res","code","list","getNavWidth","errcode","alert","message","w1","offsetWidth","$refs","style","width","__exports__","render"],"mappings":"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","file":"js/chunk-371a3d0c.9584833e.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./preview.vue?vue&type=style&index=0&id=477bdc93&lang=stylus&scoped=true\"","<template>\n  <div class=\"preview\">\n    <Header :indexHeader=\"false\" :goBackHeader=\"true\"></Header>\n    <van-sticky :offset-top=\"40\">\n      <div class=\"step-title-bar\">\n        <div class=\"title-content\" ref=\"title\">\n          <div\n            v-for=\"(item, index) in navBar\"\n            :key=\"item.classname\"\n            :ref=\"setItemRefItem\"\n            class=\"item-wrap\"\n            :class=\"{ active: active1 === index }\"\n            @click=\"clickHandle(item, index)\"\n          >\n            <div class=\"item\">\n              {{ item.classname }}\n            </div>\n            <van-icon name=\"arrow\" class=\"arrow\" />\n          </div>\n        </div>\n      </div>\n    </van-sticky>\n    <div\n      class=\"steps\"\n      v-for=\"item in caseArr\"\n      :key=\"item.id\"\n      :ref=\"setItemRefIt\"\n    >\n      <div class=\"step-box\">\n        <div class=\"title\">{{ item.classname }}</div>\n        <div class=\"step\" v-for=\"it in item.lists\" :key=\"it.id\">\n          <div class=\"small-title\">{{ it.classname }}</div>\n          <div class=\"right\">\n            <div class=\"time\">{{ it.timepoint }}</div>\n            <div class=\"text\">\n              {{ it.content }}\n            </div>\n            <div class=\"pharmacy\" v-if=\"it.druginfo.length !== 0\">\n              <div class=\"pharmacy-title\">用肥用药：</div>\n              <div\n                class=\"pharmacy-item\"\n                v-for=\"drug in it.druginfo\"\n                :key=\"drug.specid\"\n              >\n                <van-image class=\"img\" :src=\"drug.thumb\" fit=\"fill\"></van-image>\n                <div class=\"pharmacy-text\">\n                  <div class=\"p1\">{{ drug.name }}</div>\n                  <div class=\"p2\">用法用量说明：{{ drug.quantity }}</div>\n                </div>\n                <a :href=\"drug.url\" class=\"bug\">购买</a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Header from \"@/components/header/header.vue\";\nimport axios from \"@/http\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"preview\",\n  metaInfo: {\n    title: \"预览\"\n  },\n  components: { Header },\n  props: {},\n  data() {\n    return {\n      w: 0,\n      caseArr: [],\n      active1: 0,\n      top: 0,\n      re: [],\n      active: 0,\n      offTop: [],\n      item: [],\n      it: []\n    };\n  },\n  computed: {\n    ...mapState([\"uId\"]),\n    pId() {\n      return this.$route.query.pId;\n    },\n    navBar() {\n      let arr = [];\n      if (this.caseArr.length !== 0) {\n        this.caseArr.forEach((item, index) => {\n          arr.push({\n            classname: item.classname,\n            index: index,\n            option: this.offTop[index]\n          });\n        });\n      }\n      return arr;\n    }\n  },\n  watch: {\n    caseArr() {\n      this.$nextTick(() => {\n        this.re = this.it;\n        this.re.forEach(item => {\n          this.offTop.push(item.offsetTop - 100);\n        });\n      });\n    }\n  },\n  mounted() {\n    this.getPreviewData();\n    window.addEventListener(\"scroll\", this.handleScroll, false);\n  },\n  unmounted() {\n    window.removeEventListener(\"scroll\", this.handleScroll, false);\n  },\n  methods: {\n    setItemRefItem(el) {\n      this.item.push(el);\n    },\n    setItemRefIt(el) {\n      this.it.push(el);\n    },\n    clickHandle(top, index) {\n      this.$nextTick(() => {\n        // this.active1 = index;\n        this.top = this.it[index].offsetTop - 100;\n        window.scrollTo({\n          top: this.top,\n          behavior: \"smooth\"\n        });\n      });\n    },\n    handleScroll() {\n      let aa = document.documentElement.scrollTop || document.body.scrollTop;\n      setTimeout(() => {\n        // let nav = this.navBar.concat([]);\n        const arr = [...this.navBar].reverse();\n        // console.log(aa);\n        for (var i = 0; i < arr.length; i++) {\n          if (arr[i].option <= aa) {\n            this.active = arr.length - 1 - i;\n            break;\n          }\n        }\n        this.active1 = this.active;\n      }, 200);\n    },\n    getPreviewData() {\n      axios\n        .fetchGet(\"/Mobile/Gbase/getUserproject\", {\n          uId: this.uId,\n          action: \"template_preview\",\n          pId: this.pId\n        })\n        .then(res => {\n          let data = res.data;\n          if (data.code === 0) {\n            this.caseArr = data.data.list;\n            this.getNavWidth();\n          }\n          if (data.errcode) {\n            alert(data.message);\n          }\n        });\n    },\n    getNavWidth() {\n      this.$nextTick(() => {\n        this.item.forEach(it => {\n          let w1 = it.offsetWidth;\n          this.w += w1;\n        });\n        this.$refs.title.style.width = this.w + 20 + \"px\";\n      });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.preview\n  .step-title-bar\n    width 100%\n    overflow auto\n    padding 10px 12px\n    background #fff\n    .title-content\n      .item-wrap\n        display inline-block\n        .item\n          padding 8px 13px\n          background: #F1FAFE;\n          border-radius: 8px;\n          color #155BBB\n          font-size 14px\n          display inline-block\n        .arrow\n          display inline-block\n          padding 0 9px\n          vertical-align middle\n          color #D5E3FD\n          font-size 11px\n        &:last-child\n          .arrow\n            display none\n        &.active\n          .item\n            background #155BBB\n            color #FFFFFF\n  .steps\n    background #fff\n    padding-left 20px\n    .step-box\n      border-left 2px solid #D5E3FD;\n      padding-left 16px\n      .title\n        font-size 17px\n        color #155BBB\n        font-weight: bold;\n        position relative\n        margin-bottom 20px\n        &::before\n          content \"\"\n          width 18px\n          height 18px\n          border 5px solid #155BBB\n          border-radius 100%\n          position absolute\n          left -26px\n          top 0\n          box-sizing border-box\n          background #fff\n      .step\n        padding-bottom 20px\n        .small-title\n          font-size 15px\n          color #333\n          font-weight: bold;\n          position relative\n          &::before\n            content \"\"\n            width 15px\n            height 15px\n            border 3px solid #D5E3FD\n            border-radius 100%\n            position absolute\n            left -25px\n            top 2px\n            box-sizing border-box\n            background #155BBB\n        .right\n          margin-top 18px\n          margin-right 12px\n          background #F2F7F7\n          position relative\n          padding 10px 10px 10px\n          color #666666\n          font-size 15px\n          line-height 1.2\n          &:before\n            content ''\n            width 10px\n            height 10px\n            background url('./bj-icon.png') no-repeat\n            background-size 100% 100%\n            position absolute\n            left 10px\n            top -10px\n          .time\n            line-height 1.2\n            margin-bottom 12px\n          .text\n            line-height 1.4\n            margin-bottom 0\n          .pharmacy\n            .pharmacy-title\n              margin-top 15px\n            .pharmacy-item\n              display flex\n              margin-top 10px\n              position relative\n              padding-right 55px\n              .img\n                width 60px\n                height 60px\n                background: #FFFFFF;\n                border: 1px solid #E5E5E5;\n                margin-right 10px\n              .pharmacy-text\n                .p1\n                  color #666666\n                  font-size 14px\n                  margin-bottom 10px\n                  line-height 1.2\n                .p2\n                  color #999999\n                  font-size 14px\n              .bug\n                position absolute\n                right 10px\n                bottom 10px\n                color #ff6600\n                border 1px solid #ff6600\n                border-radius 10px\n                padding 5px\n</style>\n","import { render } from \"./preview.vue?vue&type=template&id=477bdc93&scoped=true\"\nimport script from \"./preview.vue?vue&type=script&lang=js\"\nexport * from \"./preview.vue?vue&type=script&lang=js\"\n\nimport \"./preview.vue?vue&type=style&index=0&id=477bdc93&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-477bdc93\"]])\n\nexport default __exports__"],"sourceRoot":""}