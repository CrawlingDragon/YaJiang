{"version":3,"sources":["webpack:///./src/views/me_edit/me_edit.vue?610b","webpack:///./src/views/me_edit/me_edit.vue","webpack:///./src/views/me_edit/me_edit.vue?200a"],"names":["class","indexHeader","accept","after-read","afterRead","fit","round","src","avatar","name","userName","clickName","identity","ismember","sexShow","sex","areaShow","resideprovince","residecity","residedist","show","nameShow","title","show-cancel-button","confirmName","names","placeholder","maxlength","actions","onSelect","close-icon-position","position","area-list","areaList","confimArea","cancelArea","setup","components","Header","props","data","updated","info","id","computed","watch","newVal","oldVal","this","upDate","mounted","getInfo","created","methods","getUserInfo","$axios","fetchPost","uId","mId","initMid","then","res","code","setUserInfo","file","that","quality","success","result","formData","FormData","append","$toast","message","username","realname","gender","item","__exports__","render"],"mappings":"2GAAA,W,8GCCOA,MAAM,qB,EAKH,eAA0B,OAArBA,MAAM,QAAO,MAAE,G,GACfA,MAAM,O,EAYb,eAA2B,OAAtBA,MAAM,QAAO,OAAG,G,GAChBA,MAAM,O,EAGX,eAA0B,OAArBA,MAAM,QAAO,MAAE,G,GACfA,MAAM,O,EAQX,eAA0B,OAArBA,MAAM,QAAO,MAAE,G,GACfA,MAAM,O,EAIX,eAA2B,OAAtBA,MAAM,QAAO,OAAG,G,GAChBA,MAAM,O,wUArCjB,eA2EM,MA3EN,EA2EM,CA1EJ,eAAsC,GAA7BC,aAAa,IACtB,eAwCK,WAvCH,eAae,GAbDD,MAAM,SAASE,OAAO,UAAWC,aAAY,EAAAC,W,yBACzD,iBAWK,CAXL,eAWK,WAVH,EACA,eAOM,MAPN,EAOM,CANJ,eAKa,GAJXJ,MAAM,SACNK,IAAI,QACJC,MAAA,GACCC,IAAK,EAAAC,Q,kBAGV,eAAuC,GAA7BC,KAAK,QAAQT,MAAM,gB,uBAGjC,eAGK,WAFH,EACA,eAAqC,MAArC,EAAqC,eAAjB,EAAAU,UAAQ,KAE9B,eAQK,MARA,QAAK,8BAAE,EAAAC,WAAA,EAAAA,UAAA,sB,CACV,EACA,eAAiC,MAAjC,EAAiC,eAAb,EAAAF,MAAI,GAIR,GAAR,EAAAG,UAAyB,GAAR,EAAAC,U,iBAHzB,eAIE,G,MAHAJ,KAAK,QACLT,MAAM,W,wBAIV,eAIK,MAJA,QAAK,+BAAE,EAAAc,SAAO,K,CACjB,EACA,eAAmD,MAAnD,EAAmD,eAA5B,KAAH,EAAAC,IAAG,YACvB,eAAuC,GAA7BN,KAAK,QAAQT,MAAM,YAE/B,eAMK,MANA,QAAK,+BAAE,EAAAgB,UAAQ,K,CAClB,EACA,eAEM,MAFN,EAEM,eADD,EAAAC,gBAAc,eAAM,EAAAC,YAAU,eAAM,EAAAC,YAAU,GAEnD,eAAuC,GAA7BV,KAAK,QAAQT,MAAM,cAGjC,eAaa,GAZHoB,KAAM,EAAAC,S,+CAAA,EAAAA,SAAQ,IACtBC,MAAM,OACNC,qBAAA,GACC,UAAS,EAAAC,a,yBAGV,iBAKE,CALF,eAKE,G,WAJS,EAAAC,M,qDAAA,EAAAA,MAAK,IACdC,YAAY,SACZ1B,MAAM,OACN2B,UAAU,M,wDAGd,eAIE,GAHQP,KAAM,EAAAN,Q,+CAAA,EAAAA,QAAO,IACpBc,QAAS,EAAAA,QACT,SAAQ,EAAAC,U,sCAGX,eAWY,GAVFT,KAAM,EAAAJ,S,+CAAA,EAAAA,SAAQ,IACtBc,sBAAoB,WACpBC,SAAS,U,yBAET,iBAKE,CALF,eAKE,GAJAT,MAAM,QACLU,YAAW,EAAAC,SACX,UAAS,EAAAC,WACT,SAAQ,EAAAC,Y,0KAWF,GACbC,MADa,WAEX,eAAQ,CACNd,MAAO,UAGXb,KAAM,SACN4B,WAAY,CAAEC,OAAA,QACdC,MAAO,GACPC,KATa,WAUX,MAAO,CACLC,SAAS,EACTC,KAAM,GACNlC,OAAQ,GACRE,SAAU,GACVD,KAAM,GACNM,IAAK,MACLM,UAAU,EACVP,SAAS,EACTE,UAAU,EACVS,MAAO,GACPG,QAAS,CACP,CAAEnB,KAAM,IAAKkC,GAAI,GACjB,CAAElC,KAAM,IAAKkC,GAAI,IAEnBV,SAAU,OACVhB,eAAgB,GAChBC,WAAY,GACZC,WAAY,GACZP,SAAU,EACVC,SAAU,IAGd+B,SAAU,kBAAK,eAAS,CAAC,MAAO,MAAO,aACvCC,MAAO,CACLpC,KADK,SACAqC,EAAQC,GACX,GAAc,IAAVA,EACF,OAAO,EAETC,KAAKC,UAEPlC,IAPK,SAOD+B,EAAQC,GACI,OAAVA,GAGJC,KAAKC,UAEP9B,WAbK,SAaM2B,EAAQC,GACH,IAAVA,GAGJC,KAAKC,UAEP/B,WAnBK,SAmBM4B,EAAQC,GACH,IAAVA,GAGJC,KAAKC,UAEPhC,eAzBK,SAyBU6B,EAAQC,GACP,IAAVA,GAGJC,KAAKC,WAGTC,QAlEa,WAmEXF,KAAKG,WAEPC,QArEa,aAsEbX,QAtEa,aA0EbY,QAAS,iCACJ,eAAa,CAAC,iBADZ,IAELC,YAFO,WAEO,WACRN,KAAKP,SACPO,KAAKO,OACFC,UAAU,yBAA0B,CACnCC,IAAKT,KAAKS,IACVC,IAAKV,KAAKW,UAEXC,MAAK,SAAAC,GACiB,GAAjBA,EAAIrB,KAAKsB,MAEX,EAAKC,YAAYF,EAAIrB,KAAKA,UAKpCpC,UAjBO,SAiBG4D,GACR,IAAIC,EAAOjB,KACX,IAAI,IAAWgB,EAAKA,KAAM,CACxBE,QAAS,GACTC,QAFwB,SAEhBC,GACN,IAAIC,EAAW,IAAIC,SACnBD,EAASE,OAAO,SAAUH,EAAQA,EAAO3D,MACzC4D,EAASE,OAAO,MAAON,EAAKR,KAC5BQ,EAAKV,OACFC,UAAU,4BAA6Ba,GACvCT,MAAK,SAAAC,GAEiB,GAAjBA,EAAIrB,KAAKsB,OACXG,EAAKzD,OAASqD,EAAIrB,KAAKA,KACvByB,EAAKxB,SAAU,EACfwB,EAAKX,eAEPW,EAAKO,OAAOX,EAAIrB,KAAKiC,gBAK/BtB,QAvCO,WAuCG,WACRH,KAAKO,OACFC,UAAU,0BAA2B,CACpCC,IAAKT,KAAKS,IACVC,IAAKV,KAAKW,UAEXC,MAAK,SAAAC,GACJ,GAAqB,GAAjBA,EAAIrB,KAAKsB,KAAW,CACtB,IAAItB,EAAOqB,EAAIrB,KAAKA,KACpB,EAAKhC,OAASgC,EAAKhC,OACnB,EAAKE,SAAW8B,EAAKkC,SACrB,EAAKjE,KAAO+B,EAAKmC,SACjB,EAAK5D,IAAMyB,EAAKoC,OAChB,EAAK3D,eAAiBuB,EAAKvB,gBAAkB,MAC7C,EAAKC,WAAasB,EAAKtB,WACvB,EAAKC,WAAaqB,EAAKrB,WACvB,EAAKP,SAAW4B,EAAK5B,SACrB,EAAKC,SAAW2B,EAAK3B,cAI7BoC,OA5DO,WA4DE,WAEPD,KAAKO,OACFC,UAAU,yBAA0B,CACnCC,IAAKT,KAAKS,IACVmB,OAAQ5B,KAAKjC,IACb4D,SAAU3B,KAAKvC,KACfQ,eAAgB+B,KAAK/B,eACrBC,WAAY8B,KAAK9B,WACjBC,WAAY6B,KAAK7B,aAElByC,MAAK,SAAAC,GACiB,GAAjBA,EAAIrB,KAAKsB,OAEX,EAAKrB,SAAU,GAEjB,EAAK+B,OAAOX,EAAIrB,KAAKiC,aAG3B9D,UA/EO,WAgFgB,GAAjBqC,KAAKpC,UAAkC,GAAjBoC,KAAKnC,WAG/BmC,KAAK3B,UAAW,EAChB2B,KAAKvB,MAAQuB,KAAKvC,OAEpBe,YAtFO,WAuFLwB,KAAKvC,KAAOuC,KAAKvB,OAEnBI,SAzFO,SAyFEgD,GACP7B,KAAKjC,IAAM8D,EAAKlC,GAChBK,KAAKlC,SAAU,GAEjBoB,WA7FO,SA6FI2C,GACT7B,KAAKhC,UAAW,EAChBgC,KAAK/B,eAAiB4D,EAAK,GAAGpE,KAC9BuC,KAAK9B,WAAa2D,EAAK,GAAGpE,KAC1BuC,KAAK7B,WAAa0D,EAAK,GAAGpE,MAE5B0B,WAnGO,WAoGLa,KAAKhC,UAAW,M,iCC3PtB,MAAM8D,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/me_edit.fab990fe.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./me_edit.vue?vue&type=style&index=0&id=ec831c2c&lang=stylus&scoped=true\"","<template>\n  <div class=\"me_edit-container\">\n    <Header :indexHeader=\"false\"></Header>\n    <ul>\n      <van-uploader class=\"upload\" accept=\"image/*\" :after-read=\"afterRead\">\n        <li>\n          <div class=\"left\">头像</div>\n          <div class=\"mid\">\n            <van-image\n              class=\"avator\"\n              fit=\"cover\"\n              round\n              :src=\"avatar\"\n            ></van-image>\n          </div>\n          <van-icon name=\"arrow\" class=\"arrow\" />\n        </li>\n      </van-uploader>\n      <li>\n        <div class=\"left\">用户名</div>\n        <div class=\"mid\">{{ userName }}</div>\n      </li>\n      <li @click=\"clickName\">\n        <div class=\"left\">名字</div>\n        <div class=\"mid\">{{ name }}</div>\n        <van-icon\n          name=\"arrow\"\n          class=\"arrow\"\n          v-if=\"identity == 0 && ismember == 0\"\n        />\n      </li>\n      <li @click=\"sexShow = true\">\n        <div class=\"left\">性别</div>\n        <div class=\"mid\">{{ sex == \"1\" ? \"男\" : \"女\" }}</div>\n        <van-icon name=\"arrow\" class=\"arrow\" />\n      </li>\n      <li @click=\"areaShow = true\">\n        <div class=\"left\">所在地</div>\n        <div class=\"mid\">\n          {{ resideprovince }}{{ residecity }}{{ residedist }}\n        </div>\n        <van-icon name=\"arrow\" class=\"arrow\" />\n      </li>\n    </ul>\n    <van-dialog\n      v-model:show=\"nameShow\"\n      title=\"修改名字\"\n      show-cancel-button\n      @confirm=\"confirmName\"\n    >\n      <!-- 修改用户名 -->\n      <van-field\n        v-model=\"names\"\n        placeholder=\"请输入用户名\"\n        class=\"name\"\n        maxlength=\"10\"\n      />\n    </van-dialog>\n    <van-action-sheet\n      v-model:show=\"sexShow\"\n      :actions=\"actions\"\n      @select=\"onSelect\"\n    />\n    <!-- 选择性别 -->\n    <van-popup\n      v-model:show=\"areaShow\"\n      close-icon-position=\"top-left\"\n      position=\"bottom\"\n    >\n      <van-area\n        title=\"选择所在地\"\n        :area-list=\"areaList\"\n        @confirm=\"confimArea\"\n        @cancel=\"cancelArea\"\n      />\n    </van-popup>\n  </div>\n</template>\n<script>\nimport Header from \"@/components/header/header\";\nimport { mapMutations, mapState } from \"vuex\";\nimport areaList from \"@/common/js/area.js\";\nimport { useMeta } from \"vue-meta\";\nimport Compressor from \"compressorjs\";\nexport default {\n  setup() {\n    useMeta({\n      title: \"编辑资料\"\n    });\n  },\n  name: \"meEdit\",\n  components: { Header },\n  props: {},\n  data() {\n    return {\n      updated: false,\n      info: \"\",\n      avatar: \"\",\n      userName: \"\",\n      name: \"\", // 名字\n      sex: \"请选择\", // 性别\n      nameShow: false,\n      sexShow: false,\n      areaShow: false,\n      names: \"\",\n      actions: [\n        { name: \"男\", id: 1 },\n        { name: \"女\", id: 0 }\n      ],\n      areaList: areaList,\n      resideprovince: \"\", // 省\n      residecity: \"\", // 市\n      residedist: \"\", // 区\n      identity: 0, // 1是专家，不允许改名字，0是普通人\n      ismember: 0 // 1是会员，不允许改名字，0可以修改\n    };\n  },\n  computed: { ...mapState([\"uId\", \"mid\", \"initMid\"]) },\n  watch: {\n    name(newVal, oldVal) {\n      if (oldVal == \"\") {\n        return false;\n      }\n      this.upDate();\n    },\n    sex(newVal, oldVal) {\n      if (oldVal == \"请选择\") {\n        return;\n      }\n      this.upDate();\n    },\n    residedist(newVal, oldVal) {\n      if (oldVal == \"\") {\n        return;\n      }\n      this.upDate();\n    },\n    residecity(newVal, oldVal) {\n      if (oldVal == \"\") {\n        return;\n      }\n      this.upDate();\n    },\n    resideprovince(newVal, oldVal) {\n      if (oldVal == \"\") {\n        return;\n      }\n      this.upDate();\n    }\n  },\n  mounted() {\n    this.getInfo();\n  },\n  created() {},\n  updated() {\n    // this.upDate();\n    // this.getUserInfo();\n  },\n  methods: {\n    ...mapMutations([\"setUserInfo\"]),\n    getUserInfo() {\n      if (this.updated) {\n        this.$axios\n          .fetchPost(\"Mobile/User/userCenter\", {\n            uId: this.uId,\n            mId: this.initMid\n          })\n          .then(res => {\n            if (res.data.code == 0) {\n              // this.setIsMember(res.data.data.ismember);\n              this.setUserInfo(res.data.data);\n            }\n          });\n      }\n    },\n    afterRead(file) {\n      let that = this;\n      new Compressor(file.file, {\n        quality: 0.1,\n        success(result) {\n          let formData = new FormData();\n          formData.append(\"urls[]\", result, result.name);\n          formData.append(\"uId\", that.uId);\n          that.$axios\n            .fetchPost(\"/Mobile/Wen/OssUploadFile\", formData)\n            .then(res => {\n              // console.log(\"res :>> \", res);\n              if (res.data.code == 0) {\n                that.avatar = res.data.data;\n                that.updated = true;\n                that.getUserInfo();\n              }\n              that.$toast(res.data.message);\n            });\n        }\n      });\n    },\n    getInfo() {\n      this.$axios\n        .fetchPost(\"/Mobile/User/userCenter\", {\n          uId: this.uId,\n          mId: this.initMid\n        })\n        .then(res => {\n          if (res.data.code == 0) {\n            let data = res.data.data;\n            this.avatar = data.avatar;\n            this.userName = data.username;\n            this.name = data.realname;\n            this.sex = data.gender;\n            this.resideprovince = data.resideprovince || \"请选择\";\n            this.residecity = data.residecity;\n            this.residedist = data.residedist;\n            this.identity = data.identity;\n            this.ismember = data.ismember;\n          }\n        });\n    },\n    upDate() {\n      //分开上传\n      this.$axios\n        .fetchPost(\"Mobile/User/updateInfo\", {\n          uId: this.uId,\n          gender: this.sex,\n          realname: this.name,\n          resideprovince: this.resideprovince,\n          residecity: this.residecity,\n          residedist: this.residedist\n        })\n        .then(res => {\n          if (res.data.code == 0) {\n            //\n            this.updated = true;\n          }\n          this.$toast(res.data.message);\n        });\n    },\n    clickName() {\n      if (this.identity == 1 || this.ismember == 1) {\n        return;\n      }\n      this.nameShow = true;\n      this.names = this.name;\n    },\n    confirmName() {\n      this.name = this.names;\n    },\n    onSelect(item) {\n      this.sex = item.id;\n      this.sexShow = false;\n    },\n    confimArea(item) {\n      this.areaShow = false;\n      this.resideprovince = item[0].name;\n      this.residecity = item[1].name;\n      this.residedist = item[2].name;\n    },\n    cancelArea() {\n      this.areaShow = false;\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.me_edit-container\n  ul\n    margin-top 10px\n    padding-left 12px\n    background #fff\n    .upload\n      width 100%\n      /deep/.van-uploader__input-wrapper\n        width 100%\n    li\n      display flex\n      align-items center\n      height 50px\n      border-bottom 1px solid #e5e5e5\n      &:last-child\n        border none\n      .left\n        width 90px\n        color #333333\n        font-size 16px\n      .mid\n        flex 1\n        color #333333\n        font-size 16px\n        .avator\n          width 40px\n          height 40px\n          margin-top 5px\n      .arrow\n        margin-right 12px\n        margin-left 4px\n        color #969799\n        min-width 1em\n        height 24px\n        font-size 16px\n        line-height 24px\n  .name\n    width 90%\n    margin 10px auto\n    border 1px solid #e5e5e5\n    height 35px\n    line-height 35px\n    padding 0 12px\n</style>\n","import { render } from \"./me_edit.vue?vue&type=template&id=ec831c2c&scoped=true\"\nimport script from \"./me_edit.vue?vue&type=script&lang=js\"\nexport * from \"./me_edit.vue?vue&type=script&lang=js\"\n\nimport \"./me_edit.vue?vue&type=style&index=0&id=ec831c2c&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ec831c2c\"]])\n\nexport default __exports__"],"sourceRoot":""}