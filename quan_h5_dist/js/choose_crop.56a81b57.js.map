{"version":3,"sources":["webpack:///./src/views/choose_crop/choose_crop.vue","webpack:///./src/views/choose_crop/choose_crop.vue?f56e","webpack:///./src/views/choose_crop/choose_crop.vue?43f9"],"names":["class","id","action","ref","value","onSearch","show-action","placeholder","onCancel","clearable","hispitalList","cropName","item","key","fid","choose","name","length","searchResultShow","index-list","letterList","style","barTop","list","index","letter","it","title","noResult","searchResult","metaInfo","components","props","data","this","$route","query","crop","created","computed","arr","forEach","el","push","crops","concat","watch","newVal","mounted","getCropList","methods","val","indexOf","$router","go","$emit","$axios","fetchPost","uId","then","res","code","historydata","$nextTick","computedBarTop","h","$refs","historyRef","getBoundingClientRect","height","console","log","__exports__","render"],"mappings":"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","file":"js/choose_crop.56a81b57.js","sourcesContent":["<template>\n  <div class=\"choose_crop-container\" id=\"wrap\">\n    <form action=\"/\" class=\"from\">\n      <van-search\n        v-model=\"value\"\n        show-action\n        placeholder=\"请输入作物名\"\n        @search=\"onSearch\"\n        @cancel=\"onCancel\"\n        clearable\n        @update:model-value=\"onSearch\"\n      />\n    </form>\n    <div class=\"history-box\" v-if=\"hispitalList\" ref=\"historyRef\">\n      <div class=\"title\">当前选择：{{ cropName }}</div>\n      <div class=\"history-ul\" v-show=\"hispitalList.length != 0\">\n        <div class=\"small-title\">最近选择/全部作物</div>\n        <li v-for=\"item in hispitalList\" :key=\"item.fid\" @click=\"choose(item)\">\n          {{ item.name }}\n        </li>\n      </div>\n    </div>\n    <van-index-bar\n      class=\"bar\"\n      :index-list=\"letterList\"\n      v-if=\"!searchResultShow\"\n      :style=\"{ top: barTop + 'px' }\"\n    >\n      <div v-for=\"item in list\" :key=\"item.id\">\n        <van-index-anchor :index=\"item.letter\" />\n        <van-cell\n          :title=\"it.name\"\n          v-for=\"it in item.index\"\n          :key=\"it.fid\"\n          @click=\"choose(it)\"\n        />\n      </div>\n    </van-index-bar>\n    <ul class=\"search_result-ul\" v-show=\"searchResultShow\">\n      <div class=\"noData\" v-show=\"noResult\">\n        抱歉没有该作物,可选择<span\n          class=\"other\"\n          @click=\"choose({ name: '其他', fid: 195 })\"\n          >其他</span\n        >\n      </div>\n      <li v-for=\"item in searchResult\" :key=\"item.fid\" @click=\"choose(item)\">\n        {{ item.name }}\n      </li>\n    </ul>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"askChooseCrop\",\n  metaInfo: {\n    title: \"选择作物\"\n  },\n  components: {},\n  props: {},\n  data() {\n    return {\n      value: \"\",\n      list: [],\n      hispitalList: [],\n      cropName: this.$route.query.crop,\n      searchResult: [],\n      searchResultShow: false,\n      noResult: false,\n      barTop: 54\n    };\n  },\n  created() {},\n  computed: {\n    ...mapState([\"uId\"]),\n    letterList() {\n      let arr = [];\n      this.list.forEach(el => {\n        arr.push(el.letter);\n      });\n      return arr;\n    },\n    crops() {\n      let arr = [];\n      this.list.forEach(el => {\n        arr = arr.concat(el.index);\n      });\n      return arr;\n    }\n  },\n  watch: {\n    searchResult(newVal) {\n      if (newVal.length == 0) {\n        this.noResult = true;\n      } else {\n        this.noResult = false;\n      }\n    }\n  },\n  mounted() {\n    this.getCropList();\n  },\n  methods: {\n    onSearch(val) {\n      this.searchResult = [];\n      this.crops.forEach(el => {\n        if (el.name.indexOf(val) >= 0) {\n          this.searchResult.push(el);\n        }\n      });\n      this.searchResultShow = true;\n      if (val == \"\") {\n        this.searchResultShow = false;\n      }\n    },\n    choose(item) {\n      //搜索历史 选择作物\n      this.$router.go(-1);\n      this.$emit(\"getCrop\", item);\n      this.searchResultShow = false;\n    },\n    onCancel() {\n      this.$router.go(-1);\n      this.searchResultShow = false;\n    },\n    getCropList() {\n      this.$axios\n        .fetchPost(\"Mobile/Mpublic/getCropIndexQuery\", { uId: this.uId })\n        .then(res => {\n          if (res.data.code == 0) {\n            this.hispitalList = res.data.historydata;\n            // this.hispitalList = [];\n            this.$nextTick(() => {\n              this.computedBarTop();\n              this.list = res.data.data;\n            });\n          }\n        });\n    },\n    computedBarTop() {\n      let h = this.$refs.historyRef.getBoundingClientRect().height;\n      console.log(\"h\", h);\n      if (h > 0) {\n        this.barTop = h + 54;\n      } else {\n        this.barTop = 54;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.choose_crop-container\n  padding-top 54px\n  position relative\n  position fixed\n  background #fff\n  left 0\n  top 0\n  right 0\n  bottom 0\n  z-index 333333\n  overflow auto\n  background #EBEBEB\n  .content\n    height auto\n  .from\n    position fixed\n    top 0px\n    left 0\n    right 0\n    z-index 99999999999\n  .history-box\n    margin-top 10px\n    padding-bottom 15px\n    .title\n      height 40px\n      line-height 40px\n      color #333333\n      font-size 15px\n      padding-left 12px\n      background #fff\n      margin-bottom 10px\n    .history-ul\n      padding-left 12px\n      font-size 0\n\n      .small-title\n        font-size 12px\n        color #999999\n        line-height 12px\n        padding 15px 0\n      li\n        min-width 65px\n        padding 0 5px\n        height 25px\n        line-height 25px\n        color #333333\n        background #fff\n        font-size 15px\n        display inline-block\n        margin-right 15px\n        margin-bottom 10px\n        border-radius 8px\n        text-align center\n  .search_result-ul\n    position absolute\n    top 62px\n    left 0\n    right 0\n    bottom 0\n    background #EBEBEB\n    z-index 111\n    border-top 1px solid #e5e5e5\n    li\n      line-height 40px\n      border-bottom 1px solid #e5e5e5\n      background #fff\n      height 40px\n      color #333333\n      font-size 14px\n      padding 0 12px\n    .noData\n      height 300px\n      padding-top 200px\n      text-align center\n      .other\n        color $theme-color\n.bar\n  z-index 9999999\n  position fixed\n  background #fff\n  left 0\n  top 54px\n  right 0\n  bottom 0\n  width 100%\n  height 100%\n  overflow auto\n</style>\n","import { render } from \"./choose_crop.vue?vue&type=template&id=547e0cb6&scoped=true\"\nimport script from \"./choose_crop.vue?vue&type=script&lang=js\"\nexport * from \"./choose_crop.vue?vue&type=script&lang=js\"\n\nimport \"./choose_crop.vue?vue&type=style&index=0&id=547e0cb6&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-547e0cb6\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./choose_crop.vue?vue&type=style&index=0&id=547e0cb6&lang=stylus&scoped=true\""],"sourceRoot":""}