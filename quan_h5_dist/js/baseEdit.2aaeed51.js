(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["baseEdit"],{"0cb2":function(e,t,n){var o=n("7b0b"),a=Math.floor,r="".replace,c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,i,s){var d=n+e.length,m=l.length,b=u;return void 0!==i&&(i=o(i),b=c),r.call(s,b,(function(o,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":c=i[r.slice(1,-1)];break;default:var u=+r;if(0===u)return o;if(u>m){var s=a(u/10);return 0===s?o:s<=m?void 0===l[s-1]?r.charAt(1):l[s-1]+r.charAt(1):o}c=l[u-1]}return void 0===c?"":c}))}},"4bb2":function(e,t,n){},5319:function(e,t,n){"use strict";var o=n("d784"),a=n("d039"),r=n("825a"),c=n("a691"),u=n("50c4"),l=n("577e"),i=n("1d80"),s=n("8aa5"),d=n("0cb2"),m=n("14c3"),b=n("b622"),f=b("replace"),h=Math.max,p=Math.min,j=function(e){return void 0===e?e:String(e)},O=function(){return"$0"==="a".replace(/./,"$0")}(),w=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),v=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var o=w?"$":"$0";return[function(e,n){var o=i(this),a=void 0==e?void 0:e[f];return void 0!==a?a.call(e,o,n):t.call(l(o),e,n)},function(e,a){var i=r(this),b=l(e);if("string"===typeof a&&-1===a.indexOf(o)&&-1===a.indexOf("$<")){var f=n(t,i,b,a);if(f.done)return f.value}var O="function"===typeof a;O||(a=l(a));var w=i.global;if(w){var v=i.unicode;i.lastIndex=0}var k=[];while(1){var g=m(i,b);if(null===g)break;if(k.push(g),!w)break;var y=l(g[0]);""===y&&(i.lastIndex=s(b,u(i.lastIndex),v))}for(var C="",V=0,P=0;P<k.length;P++){g=k[P];for(var I=l(g[0]),_=h(p(c(g.index),b.length),0),Z=[],x=1;x<g.length;x++)Z.push(j(g[x]));var $=g.groups;if(O){var S=[I].concat(Z,_,b);void 0!==$&&S.push($);var z=l(a.apply(void 0,S))}else z=d(I,b,_,Z,$,a);_>=V&&(C+=b.slice(V,_)+z,V=_+I.length)}return C+b.slice(V)}]}),!v||!O||w)},9024:function(e,t,n){},"9f52":function(e,t,n){"use strict";n("4bb2")},cf1a:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23");Object(o["K"])("data-v-518ea581");var a={class:"edit-container"},r=Object(o["k"])("div",{class:"icon"},null,-1),c={class:"company-box",style:{"margin-top":"10px"}},u={style:{margin:"16px"}};function l(e,t,n,l,i,s){var d=Object(o["P"])("van-uploader"),m=Object(o["P"])("van-field"),b=Object(o["P"])("van-icon"),f=Object(o["P"])("Checkbox"),h=Object(o["P"])("van-picker"),p=Object(o["P"])("van-popup"),j=Object(o["P"])("AskChooseCrop"),O=Object(o["P"])("van-button"),w=Object(o["P"])("van-form"),v=Object(o["P"])("router-view");return Object(o["H"])(),Object(o["j"])(o["b"],null,[Object(o["k"])("div",a,[Object(o["n"])(w,{onSubmit:s.onSubmit},{default:Object(o["Z"])((function(){return[Object(o["n"])(m,{name:"uploader",class:"upload-box"},{input:Object(o["Z"])((function(){return[Object(o["n"])(d,{modelValue:i.uploader,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.uploader=e}),class:"upload",deletable:!1,"after-read":s.afterRead,accept:"image/*","before-read":s.beforeRead},{default:Object(o["Z"])((function(){return[r]})),_:1},8,["modelValue","after-read","before-read"])]})),_:1}),Object(o["n"])(m,{modelValue:i.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.name=e}),name:"名称",label:"名称",placeholder:"请输入名称"},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["n"])(m,{modelValue:i.zuowu,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.zuowu=e}),name:"作物种类",label:"作物种类",placeholder:"请选择作物种类",readonly:"",onClick:s.clickZuowu},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["n"])(f,{chooseData:i.ChooseData.zwtype,onEmitArray:s.onZuowuCancel,ref:"zuowu"},null,8,["chooseData","onEmitArray"]),Object(o["n"])(m,{modelValue:i.time,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.time=e}),name:"供应时间",label:"供应时间",placeholder:"请选择供应时间",readonly:"",onClick:s.clickTime},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["n"])(f,{chooseData:i.ChooseData.supplytime,onEmitArray:s.cancelTime,ref:"time"},null,8,["chooseData","onEmitArray"]),Object(o["n"])(m,{modelValue:i.scale,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.scale=e}),name:"规模",label:"规模",readonly:"",placeholder:"请输入规模",onClick:t[5]||(t[5]=function(e){return i.guimoPicker=!0})},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["n"])(p,{show:i.guimoPicker,"onUpdate:show":t[7]||(t[7]=function(e){return i.guimoPicker=e}),position:"bottom"},{default:Object(o["Z"])((function(){return[Object(o["n"])(h,{"show-toolbar":"",columns:i.ChooseData.guimo,onConfirm:s.guimoConfirm,onCancel:t[6]||(t[6]=function(e){return i.guimoPicker=!1})},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(o["n"])(m,{modelValue:i.module,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.module=e}),name:"经营模式",label:"经营模式",placeholder:"请输入经营模式",readonly:"",onClick:s.clickModule},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["n"])(f,{chooseData:i.ChooseData.pattern,onEmitArray:s.cancelPattern,ref:"pattern"},null,8,["chooseData","onEmitArray"]),Object(o["n"])(m,{modelValue:i.areaname,"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.areaname=e}),name:"所在地",label:"所在地",placeholder:"请选择所在地",readonly:"",onClick:t[10]||(t[10]=function(e){return i.addressPicker=!0})},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["n"])(p,{show:i.addressPicker,"onUpdate:show":t[12]||(t[12]=function(e){return i.addressPicker=e}),position:"bottom"},{default:Object(o["Z"])((function(){return[Object(o["n"])(h,{"show-toolbar":"",columns:i.ThreeTreeAddressColumns,onConfirm:s.onAddressConfirm,onCancel:t[11]||(t[11]=function(e){return i.addressPicker=!1})},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(o["n"])(m,{modelValue:i.sell,"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.sell=e}),name:"主营",label:"主营",placeholder:"请选择主营商品",readonly:"",onClick:s.openSeller},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["ab"])(Object(o["n"])(j,{baseEdit:!0,onGetCrop:s.chooseSell},null,8,["onGetCrop"]),[[o["X"],i.sellShow]]),Object(o["n"])(m,{modelValue:i.linkman,"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.linkman=e}),name:"联系人",label:"联系人",placeholder:"请选择联系人"},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["n"])(m,{modelValue:i.phone,"onUpdate:modelValue":t[15]||(t[15]=function(e){return i.phone=e}),name:"号码",label:"号码",placeholder:"请输入号码"},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["n"])(m,{modelValue:i.address,"onUpdate:modelValue":t[16]||(t[16]=function(e){return i.address=e}),name:"经营地址",label:"经营地址",placeholder:"请输入经营地址"},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue"]),Object(o["k"])("div",c,[Object(o["n"])(m,{modelValue:i.typesname,"onUpdate:modelValue":t[17]||(t[17]=function(e){return i.typesname=e}),name:"企业类型",label:"企业类型",placeholder:"请输入企业类型",readonly:"",onClick:s.clickCompanyTypes},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["n"])(p,{show:i.typesnamePicker,"onUpdate:show":t[19]||(t[19]=function(e){return i.typesnamePicker=e}),position:"bottom"},{default:Object(o["Z"])((function(){return[Object(o["n"])(h,{"show-toolbar":"",columns:i.ChooseData.types,onConfirm:s.typesConfirm,onCancel:t[18]||(t[18]=function(e){return i.typesnamePicker=!1})},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(o["n"])(m,{modelValue:i.genre,"onUpdate:modelValue":t[20]||(t[20]=function(e){return i.genre=e}),name:"企业性质",label:"企业性质",placeholder:"请输入企业性质",onClick:s.clickGenre,readonly:""},{button:Object(o["Z"])((function(){return[Object(o["n"])(b,{name:"arrow",class:"arrow"})]})),_:1},8,["modelValue","onClick"]),Object(o["n"])(p,{show:i.genrePicker,"onUpdate:show":t[22]||(t[22]=function(e){return i.genrePicker=e}),position:"bottom"},{default:Object(o["Z"])((function(){return[Object(o["n"])(h,{"show-toolbar":"",columns:i.ChooseData.genre,onConfirm:s.genreConfirm,onCancel:t[21]||(t[21]=function(e){return i.genrePicker=!1})},null,8,["columns","onConfirm"])]})),_:1},8,["show"])]),Object(o["k"])("div",u,[Object(o["n"])(O,{round:"",block:"",type:"info","native-type":"submit",class:"submit"},{default:Object(o["Z"])((function(){return[Object(o["m"])(Object(o["T"])("edit"==s.routeFrom?"修改":"创建"),1)]})),_:1})])]})),_:1},8,["onSubmit"]),Object(o["n"])(p,{modelValue:i.popupShow,"onUpdate:modelValue":t[23]||(t[23]=function(e){return i.popupShow=e}),position:"bottom",style:{height:"30%"}},null,8,["modelValue"])]),Object(o["n"])(v,null,{default:Object(o["Z"])((function(e){var t=e.Component;return[(Object(o["H"])(),Object(o["h"])(o["c"],null,[(Object(o["H"])(),Object(o["h"])(Object(o["R"])(t),{onGetCrop:s.chooseSell},null,8,["onGetCrop"]))],1024))]})),_:1})],64)}Object(o["I"])();var i=n("5530"),s=(n("d3b7"),n("a15b"),n("159b"),n("ac1f"),n("5319"),n("ba6a")),d=n("5502");Object(o["K"])("data-v-b359a082");var m={class:"zuowuContent"},b={class:"item-wrap"};function f(e,t,n,a,r,c){var u=Object(o["P"])("van-checkbox"),l=Object(o["P"])("van-checkbox-group"),i=Object(o["P"])("van-action-sheet");return Object(o["H"])(),Object(o["j"])("div",null,[Object(o["n"])(i,{show:r.zuowuShow,"onUpdate:show":t[1]||(t[1]=function(e){return r.zuowuShow=e}),"cancel-text":"确定",onCancel:c.onZuowuCancel},{default:Object(o["Z"])((function(){return[Object(o["k"])("div",m,[Object(o["n"])(l,{modelValue:r.result,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.result=e})},{default:Object(o["Z"])((function(){return[(Object(o["H"])(!0),Object(o["j"])(o["b"],null,Object(o["N"])(n.chooseData,(function(e){return Object(o["H"])(),Object(o["j"])("div",{class:"item",key:e},[Object(o["k"])("div",b,[Object(o["n"])(u,{name:e},{icon:Object(o["Z"])((function(t){return[Object(o["k"])("div",{class:Object(o["y"])([t.checked?"activeIcon":"inactiveIcon","props"])},Object(o["T"])(e),3)]})),_:2},1032,["name"])])])})),128))]})),_:1},8,["modelValue"])])]})),_:1},8,["show","onCancel"])])}Object(o["I"])();var h={name:"",components:{},props:{chooseData:{type:Array,default:function(){return[]}}},data:function(){return{zuowuShow:!1,result:[]}},computed:{},watch:{},mounted:function(){},unmounted:function(){},methods:{onZuowuCancel:function(){this.$emit("emitArray",this.result),this.zuowuShow=!1}}},p=(n("fa1e"),n("d959")),j=n.n(p);const O=j()(h,[["render",f],["__scopeId","data-v-b359a082"]]);var w=O,v=n("7c8d"),k=n.n(v),g={metaInfo:{title:1},name:"base_edit",components:{Checkbox:w},props:{},data:function(){return{uploader:[{url:""}],name:"",zuowu:"",time:"",scale:"",scaleId:"",module:"",address:"",sell:"",sellShow:!1,linkman:"",phone:"",areaname:"",areanameId:"",genre:"",popupShow:!1,ChooseData:"",zuowuShow:!0,checked:!1,typesname:"",typesnameId:"",guimoPicker:!1,result:[],addressPicker:!1,ThreeTreeAddressColumns:[],typesnamePicker:!1,genrePicker:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(d["e"])(["uId"])),{},{routeFrom:function(){return this.$route.query.from}}),watch:{},mounted:function(){"edit"===this.routeFrom&&this.getBaseInfo(),this.getChooseData(),this.getThreeTreeAddress()},unmounted:function(){},methods:{beforeRead:function(e){return new Promise((function(t){new k.a(e,{quality:.6,success:function(e){t(e)},error:function(e){this.$toast(e.message)}})}))},afterRead:function(e,t){var n=this,o=new FormData;o.append("urls[]",e.file,e.file.name),o.append("uId",this.uId),o.append("type","company"),this.$axios.fetchPost("/Mobile/Wen/OssUploadFile",o).then((function(e){0==e.data.code?(n.uploader=[{url:e.data.data_tiny}],console.log("res.data :>> ",e.data)):(n.$toast(e.data.message),console.log("detail :>> ",t))}))},onSubmit:function(e){console.log("values :>> ",e),this.updataBaseInfo()},clickZuowu:function(){this.$refs.zuowu.zuowuShow=!0},clickTime:function(){this.$refs.time.zuowuShow=!0},onZuowuCancel:function(e){0!==e.length&&(this.zuowu=e.join(","))},cancelTime:function(e){0!==e.length&&(this.time=e.join(","))},guimoConfirm:function(e){this.guimoPicker=!1,this.scale=e.text,this.scaleId=e.id},clickModule:function(){console.log(this.$refs.pattern.zuowuShow),this.$refs.pattern.zuowuShow=!0},onAddressConfirm:function(e){var t=this;e.forEach((function(e){t.areaname+=e.text}));var n=e[e.length-1].id;this.areanameId=n?e[e.length-1].id:e[e.length-2].id,this.addressPicker=!1},cancelPattern:function(e){0!==e.length&&(this.module=e.join(","))},clickCompanyTypes:function(){this.typesnamePicker=!0},typesConfirm:function(e){this.typesname=e.text,this.typesnameId=e.id,this.typesnamePicker=!1},clickGenre:function(){this.genrePicker=!0},genreConfirm:function(e){this.genre=e,this.genrePicker=!1},chooseSell:function(e){this.sell=e.name},getBaseInfo:function(){var e=this;s["a"].fetchGet("/Mobile/Gbase/getCompanyinfo",{uId:this.uId}).then((function(t){var n=t.data;0===n.code&&(e.name=n.data.title,e.zuowu=n.data.zwtype,e.time=n.data.supplytime,e.scale=n.data.guimo.text,e.scaleId=n.data.guimo.id,e.module=n.data.pattern,e.address=n.data.address,e.sell=n.data.products,e.linkman=n.data.linkman,e.phone=n.data.bile,e.areaname=n.data.areaname.text,e.areanameId=n.data.areaname.id,e.genre=n.data.genre,e.typesname=n.data.typesname.text,e.typesnameId=n.data.typesname.id,e.uploader=[{url:n.data.logo}])}))},getChooseData:function(){var e=this;this.$axios.fetchGet("/Mobile/Gbase/getBaseOptions").then((function(t){var n=t.data;0==n.code&&(e.ChooseData=n.data)}))},getThreeTreeAddress:function(){var e=this;this.$axios.fetchGet("/Mobile/Gbase/getLinkagelist").then((function(t){var n=t.data;0===n.code&&(e.ThreeTreeAddressColumns=n.data)}))},updataBaseInfo:function(){var e=this;this.$axios.fetchPost("/Mobile/Gbase/subCompanyAttention",{uId:this.uId,title:this.name,zwtype:this.zuowu,guimo:this.scaleId,pattern:this.module,supplytime:this.time,areaid:this.areanameId,linkman:this.linkman,bile:this.phone,address:this.address,types:this.typesnameId,genre:this.genre,products:this.sell,logo:this.uploader[0].url}).then((function(t){var n=t.data;0===n.code&&(e.$toast(n.message),"add"===e.routeFrom&&e.$router.replace({path:"/base_center"}))}))},openSeller:function(){this.$router.push({path:"/baseInfoEdit/ask_choose_crop",query:{crop:this.sell}})}}};n("9f52");const y=j()(g,[["render",l],["__scopeId","data-v-518ea581"]]);t["default"]=y},fa1e:function(e,t,n){"use strict";n("9024")}}]);
//# sourceMappingURL=baseEdit.2aaeed51.js.map