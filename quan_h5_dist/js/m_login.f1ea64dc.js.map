{"version":3,"sources":["webpack:///./src/views/m_login/m_login.vue","webpack:///./src/views/m_login/m_login.vue?db15","webpack:///./src/components/base/deal/deal.vue","webpack:///./src/components/base/deal/deal.vue?1359","webpack:///./src/components/base/deal/deal.vue?cf4b","webpack:///./src/views/m_login/m_login.vue?624d"],"names":["class","style","indexHeader","to","onSubmit","mPhone","name","placeholder","rules","mCode","center","clearable","maxlength","button","start","showBtn","ref","millisecond","time","auto-start","format","finish","checked","round","block","type","native-type","setup","title","components","Header","Deal","props","data","clickTrue","success","methods","validatorPhone","val","test","this","$refs","countDown","reset","lgoinFn","$toast","sendPhone","$axios","fetchPost","mobile","action","then","res","code","message","setTimeout","$dialog","alert","confirmButtonText","confirmButtonColor","username","saveUserInfo","$router","push","path","__exports__","render","checkbox","icon-size","checked-color","show","privacyShow","z-index","lock-scroll","closeDeal","privacyData","content","closePrivacy","dealData","Boolean","default","emit","value","newVal","created","getUserAgreement","getUserPrivacy","fetchGet"],"mappings":"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","file":"js/m_login.f1ea64dc.js","sourcesContent":["<template>\n  <div class=\"m_login-container\">\n    <Header :indexHeader=\"false\"></Header>\n    <div class=\"title\">\n      短信快捷登录<router-link to=\"/sign\" class=\"small-title\">注册</router-link>\n    </div>\n    <van-form @submit=\"onSubmit\" class=\"from\">\n      <van-field\n        v-model=\"mPhone\"\n        name=\"phone\"\n        placeholder=\"请输入手机号\"\n        :rules=\"[\n          { required: true, message: '请填写手机号' },\n          { validator: validatorPhone, message: '手机号码格式不正确' }\n        ]\"\n      />\n      <van-field\n        v-model=\"mCode\"\n        name=\"code\"\n        center\n        clearable\n        placeholder=\"请输入4位验证码\"\n        maxlength=\"4\"\n        :rules=\"[{ required: true, message: '验证码不能为空' }]\"\n      >\n        <template #button>\n          <div class=\"btn\" v-show=\"showBtn\" @click=\"start\">发送验证码</div>\n          <div v-show=\"!showBtn\">\n            <van-count-down\n              ref=\"countDown\"\n              millisecond\n              :time=\"60000\"\n              :auto-start=\"false\"\n              format=\"ss秒后重试\"\n              @finish=\"finish\"\n            />\n          </div>\n        </template>\n      </van-field>\n      <div style=\"margin-top:30px;margin-left:16px\">\n        <Deal v-model:checked=\"checked\"></Deal>\n      </div>\n      <div style=\"margin: 16px;\">\n        <van-button\n          round\n          block\n          type=\"info\"\n          native-type=\"submit\"\n          class=\"sub\"\n          :class=\"{ success: this.mPhone && this.mCode && checked }\"\n        >\n          登录\n        </van-button>\n      </div>\n    </van-form>\n    <router-link class=\"go-login\" to=\"/login\">账号密码登录</router-link>\n  </div>\n</template>\n<script>\nimport Header from \"@/components/header/header\";\nimport { mapActions } from \"vuex\";\nimport { useMeta } from \"vue-meta\";\nimport Deal from \"@/components/base/deal/deal.vue\";\nexport default {\n  name: \"mLogin\",\n  setup() {\n    useMeta({\n      title: \"短信快捷登录\"\n    });\n  },\n  components: { Header, Deal },\n  props: {},\n  data() {\n    return {\n      showBtn: true,\n      clickTrue: false,\n      success: false,\n      mPhone: \"\",\n      mCode: \"\",\n      checked: false\n    };\n  },\n\n  methods: {\n    ...mapActions([\"saveUserInfo\"]),\n    validatorPhone(val) {\n      // 验证手机号码\n      if (/^1(3|4|5|6|7|8|9)\\d{9}$/.test(val)) {\n        this.clickTrue = true;\n      } else {\n        this.clickTrue = false;\n      }\n      return /^1(3|4|5|6|7|8|9)\\d{9}$/.test(val);\n    },\n    finish() {\n      this.$refs.countDown.reset();\n      this.showBtn = true;\n      this.clickTrue = true;\n    },\n    onSubmit() {\n      if (!this.checked) {\n        this.$toast(\"必须先同意用户协议和隐私政策\");\n        return;\n      }\n      this.lgoinFn(this.mCode, this.mPhone);\n    },\n    start() {\n      if (!this.clickTrue) {\n        this.$toast(\"请先输入手机号\");\n        return;\n      }\n      this.sendPhone();\n    },\n    sendPhone() {\n      //发送验证码\n      this.$axios\n        .fetchPost(\"Mobile/Member/ServerSmsCode\", {\n          mobile: this.mPhone,\n          action: \"login\"\n        })\n        .then(res => {\n          if (res.data.code == 0) {\n            this.$toast(res.data.message);\n            this.clickTrue = false;\n            this.showBtn = false;\n            setTimeout(() => {\n              this.$refs.countDown.start();\n            }, 100);\n          } else {\n            this.$dialog\n              .alert({\n                message: res.data.message,\n                confirmButtonText: \"知道了\",\n                confirmButtonColor: \"#338aff\"\n              })\n              .then(() => {\n                // on close\n              });\n          }\n        });\n    },\n    lgoinFn(code, username) {\n      this.$axios\n        .fetchPost(\"Mobile/Member/codelogin\", {\n          code,\n          username\n        })\n        .then(res => {\n          if (res.data.code == 0) {\n            this.saveUserInfo(res.data.data);\n            this.$toast(res.data.message);\n            this.$router.push({\n              path: \"/\"\n            });\n          } else {\n            this.$dialog\n              .alert({\n                title: \"登录失败\",\n                message: res.data.message,\n                confirmButtonColor: \"#338aff\",\n                confirmButtonText: \"知道了\"\n              })\n              .then(() => {\n                // on close\n              });\n          }\n        });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.m_login-container\n  height 100%\n  position absolute\n  left 0\n  right 0\n  background #fff\n  .title\n    font-size 24px\n    color #333333\n    text-align center\n    margin 40px 0\n    padding-left 40px\n    .small-title\n      margin-left 19px\n      font-size 15px\n      display inline\n      color #333\n  .from\n    width 80%\n    margin 0 auto\n    .sub\n      background #BBBBBB\n      border none\n      &.success\n        background #ff6600\n        color #fff\n  .go-login\n    margin 15px 0\n    text-align center\n    color #ff6600\n    font-size 15px\n  .van-count-down\n    color #999\n    font-size 13px\n</style>\n","import { render } from \"./m_login.vue?vue&type=template&id=031f8816&scoped=true\"\nimport script from \"./m_login.vue?vue&type=script&lang=js\"\nexport * from \"./m_login.vue?vue&type=script&lang=js\"\n\nimport \"./m_login.vue?vue&type=style&index=0&id=031f8816&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-031f8816\"]])\n\nexport default __exports__","<template>\n  <div class=\"deal-box\">\n    <van-checkbox\n      v-model=\"checkbox\"\n      icon-size=\"20px\"\n      class=\"checkbox\"\n      checked-color=\"#338aff\"\n    ></van-checkbox>\n    我已阅读并同意<span @click=\"show = true\">用户协议</span>与<span\n      @click=\"privacyShow = true\"\n      >隐私政策</span\n    >\n  </div>\n  <van-overlay\n    :show=\"show\"\n    @click=\"show = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 用户协议 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closeDeal\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ privacyData.title }}</h3>\n      <p class=\"text\" v-html=\"privacyData.content\"></p>\n    </div>\n  </van-overlay>\n  <van-overlay\n    :show=\"privacyShow\"\n    @click=\"privacyShow = false\"\n    z-index=\"20\"\n    :lock-scroll=\"false\"\n  >\n    <!-- 隐私政策 -->\n    <div class=\"wrapper\" @click.stop>\n      <div class=\"close-btn\" @click=\"closePrivacy\">\n        <van-icon name=\"cross\" />\n      </div>\n      <h3>{{ dealData.title }}</h3>\n      <p class=\"text\" v-html=\"dealData.content\"></p>\n    </div>\n  </van-overlay>\n</template>\n\n<script>\nimport { watch, ref } from \"vue\";\n// import { useMeta } from \"vue-meta\";\n\nexport default {\n  props: {\n    checked: {\n      type: Boolean,\n      default: false\n    }\n    // content: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // },\n    // PrivacyContent: {\n    //   type: Object,\n    //   default: function() {\n    //     return {};\n    //   }\n    // }\n  },\n\n  setup(props, { emit }) {\n    const checkbox = ref(false);\n    const show = ref(false);\n    const privacyShow = ref(false);\n    watch(checkbox, newVal => {\n      emit(\"update:checked\", newVal);\n    });\n\n    function closeDeal() {\n      show.value = false;\n    }\n    function closePrivacy() {\n      privacyShow.value = false;\n    }\n    return { checkbox, show, privacyShow, closeDeal, closePrivacy };\n  },\n  data() {\n    return {\n      dealData: {},\n      privacyData: {}\n    };\n  },\n  created() {\n    this.getUserAgreement();\n    this.getUserPrivacy();\n  },\n  methods: {\n    getUserAgreement() {\n      this.$axios.fetchGet(\"/Mobile/User/user_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.dealData = res.data.data;\n        }\n      });\n    },\n    getUserPrivacy() {\n      this.$axios.fetchGet(\"/Mobile/User/service_agreement\").then(res => {\n        if (res.data.code === 0) {\n          this.privacyData = res.data.data;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\">\n.deal-box\n  position relative\n  padding-left 30px\n  font-size 13px\n  color #999999\n  .checkbox\n    position absolute\n    left 0\n    top 0\n  & > span\n    color #333333\n.wrapper\n  width 100%\n  height 100%\n  margin 0 auto\n  overflow auto\n  background #fff\n  padding 12px\n  position relative\n  font-family: Microsoft YaHei;\n  .close-btn\n    color #9D9D9D\n    font-size 28px\n    position absolute\n    left 19px\n    top 22px\n  h3\n    text-align center\n    font-size 19px\n    line-height 58px\n  .text\n    font-size 14px\n</style>\n","import { render } from \"./deal.vue?vue&type=template&id=75a605c7\"\nimport script from \"./deal.vue?vue&type=script&lang=js\"\nexport * from \"./deal.vue?vue&type=script&lang=js\"\n\nimport \"./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"\n\nimport exportComponent from \"/Users/wuhelong/Documents/project_two/全市一体化/quan_h5/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./deal.vue?vue&type=style&index=0&id=75a605c7&lang=stylus\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./m_login.vue?vue&type=style&index=0&id=031f8816&lang=stylus&scoped=true\""],"sourceRoot":""}